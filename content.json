{"meta":{"title":"zhuqiaolun - 个人博客","subtitle":"","description":"zhuqiaolun的个人博客","author":"十二","url":"https://www.zhuqiaolun.com","root":"/"},"pages":[{"title":"","date":"2021-03-16T06:45:37.435Z","updated":"2020-05-29T13:21:34.674Z","comments":true,"path":"baidu_verify_KzupUF583A.html","permalink":"https://www.zhuqiaolun.com/baidu_verify_KzupUF583A.html","excerpt":"","text":"KzupUF583A document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });"},{"title":"404 Not Found：该页无法显示","date":"2021-03-16T06:45:37.430Z","updated":"2020-05-21T02:45:41.758Z","comments":false,"path":"/404.html","permalink":"https://www.zhuqiaolun.com/404.html","excerpt":"","text":"document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });"},{"title":"关于","date":"2020-09-28T08:12:05.000Z","updated":"2021-05-12T02:32:31.883Z","comments":true,"path":"about/index.html","permalink":"https://www.zhuqiaolun.com/about/index.html","excerpt":"","text":"document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });"}],"posts":[{"title":"Yaml的配置文件读取","slug":"2022/02/1644832599629/1644832599629","date":"2022-02-14T09:56:39.000Z","updated":"2022-02-14T10:11:05.540Z","comments":false,"path":"2022/02/1644832599629/1644832599629/","link":"","permalink":"https://www.zhuqiaolun.com/2022/02/1644832599629/1644832599629/","excerpt":"Yaml的配置文件读取","text":"引入依赖1234567891011&lt;dependency&gt; &lt;groupId&gt;org.yaml&lt;/groupId&gt; &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt; &lt;version&gt;1.29&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.18.20&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt; 配置文件在项目resources下存在文件：config.yaml内容如下： 12345code: 000message: \"成功\"stringList: - \"hello\" - \"world\" 只要定义同等名称及类型即可赋值获取 类YamlUtils采用 @Data 注解 省略set/get 方法 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import lombok.Data;import org.yaml.snakeyaml.Yaml;import java.io.InputStream;import java.lang.reflect.Field;import java.util.List;import java.util.Map;/** * author ：demon * date ：2021 2021/8/15 14:51 * desc ：读取yaml文件，并获取值 */@Datapublic class YamlUtils { private static YamlUtils yamlUtils; public static YamlUtils getInstance() { if (yamlUtils == null) { yamlUtils = new YamlUtils(); } return yamlUtils; } static { try { Yaml yaml = new Yaml(); InputStream inputStream = YamlUtils.class.getResourceAsStream(\"/config.yaml\"); // 可以将值转换为Map，通过map我们取值就可以了. Map&lt;String, Object&gt; ymlMap = yaml.load(inputStream); // 动态赋值 yamlUtils = YamlUtils.class.newInstance(); for (Field field : yamlUtils.getClass().getDeclaredFields()) { if (ymlMap.containsKey(field.getName())) { boolean flag = field.isAccessible(); field.setAccessible(true); Object object = ymlMap.get(field.getName()); if (object != null &amp;&amp; field.getType().isAssignableFrom(object.getClass())) { field.set(yamlUtils, object); } field.setAccessible(flag); } } } catch (Exception e) { e.printStackTrace(); } } private Integer code; private String message; private List&lt;String&gt; stringList;} 测试123456@Testpublic void Test1(){ System.out.println(YamlUtils.getInstance().getCode()); System.out.println(YamlUtils.getInstance().getMessage()); System.out.println(YamlUtils.getInstance().getStringList());} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Yaml","slug":"Yaml","permalink":"https://www.zhuqiaolun.com/tags/Yaml/"}]},{"title":"Maven多模块指定模块工程打包","slug":"2022/02/1644831407066/1644831407066","date":"2022-02-14T09:36:47.000Z","updated":"2022-02-14T09:53:24.539Z","comments":false,"path":"2022/02/1644831407066/1644831407066/","link":"","permalink":"https://www.zhuqiaolun.com/2022/02/1644831407066/1644831407066/","excerpt":"Maven多模块工程打包","text":"打包说明12345678Maven多模块工程打包指定模块工程执行如下命令：mvn clean package -pl 指定模块工程名 -am参数说明：-am --also-make 同时构建所列模块的依赖模块；-amd -also-make-dependents 同时构建依赖于所列模块的模块；-pl --projects &lt;arg&gt; 构建制定的模块，模块间用逗号分隔；-rf -resume-from &lt;arg&gt; 从指定的模块恢复反应堆。 项目结构123456789101112Parent - common 公共模块 - deploy 部署模块 - service1 部署服务1 -&gt; 引入 服务1 - service2 部署服务2 -&gt; 引入 服务2 - service3 部署服务3 -&gt; 引入 服务3 - forward 第三方模块 -&gt; 引入 公共模块 - framework Spring模块 -&gt; 引入 公共模块 - service 服务模块 - service1 服务1 -&gt; 引入 Spring模块 - service2 服务2 -&gt; 引入 Spring模块 - service3 服务3 -&gt; 引入 Spring模块 打包命令在根目录Parent下进行打包 打包部署service1模块 : mvn clean package -pl deploy/service1 -am 打包部署service2模块 : mvn clean package -pl deploy/service2 -am 打包部署service3模块 : mvn clean package -pl deploy/service3 -am document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/categories/Maven/"}],"tags":[{"name":"pom","slug":"pom","permalink":"https://www.zhuqiaolun.com/tags/pom/"}]},{"title":"SpringBoot日志之logback","slug":"2022/02/1644829623396/1644829623396","date":"2022-02-14T09:07:03.000Z","updated":"2022-02-14T09:35:44.040Z","comments":false,"path":"2022/02/1644829623396/1644829623396/","link":"","permalink":"https://www.zhuqiaolun.com/2022/02/1644829623396/1644829623396/","excerpt":"SpringBoot日志之logback","text":"自定义日志根路径：一般在jar中使用 12&lt;define name=\"LOG_HOME\" class=\"com.xxx.framework.config.LogHomeConfig\"/&gt;&lt;property name=\"logback.dirPath\" value=\"${LOG_HOME}\"/&gt; LogHomeConfig 日志路径在Tomcat下：一般在war中使用 1&lt;property name=\"logback.dirPath\" value=\"${catalina.base}/logs\"/&gt; 引入文件 logback-spring.xml内容如下： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;&lt;!--status log4j2自身日志输出等级monitorInterval 自动检测间隔 30s--&gt;&lt;configuration scan=\"true\" scanPeriod=\"30 seconds\" debug=\"false\"&gt; &lt;!-- 日志格式和颜色渲染 --&gt; &lt;!-- 彩色日志依赖的渲染类 --&gt; &lt;conversionRule conversionWord=\"clr\" converterClass=\"org.springframework.boot.logging.logback.ColorConverter\"/&gt; &lt;conversionRule conversionWord=\"wex\" converterClass=\"org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter\"/&gt; &lt;conversionRule conversionWord=\"wEx\" converterClass=\"org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter\"/&gt; &lt;!-- 设置上下文名称 --&gt; &lt;contextName value=\"project-name\"/&gt; &lt;!-- 定义日志根目录 --&gt; &lt;property name=\"logback.dirPath\" value=\"${catalina.base}/logs\"/&gt; &lt;!-- 定义日志目录参数 --&gt; &lt;property name=\"logback.contextName\" value=\"project-name/logs\"/&gt; &lt;property name=\"logback.lever\" value=\"DEBUG\"/&gt; &lt;property name=\"logback.pattern\" value=\"%d{yyyy-MM-dd HH:mm:ss.SSS,CTT}[%p][%t] %c[%L] %m %n\"/&gt; &lt;property name=\"logback.MaxFileSize\" value=\"1MB\"/&gt; &lt;property name=\"logback.maxHistory\" value=\"7\"/&gt; &lt;!-- 日志格式 --&gt; &lt;property name=\"CONSOLE_LOG_PATTERN\" value=\"${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS,CTT}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}\"/&gt; &lt;!--子节点一: 输出到控制台 --&gt; &lt;appender name=\"CONSOLE_APPENDER\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt; &lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt; &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt; &lt;level&gt;debug&lt;/level&gt; &lt;/filter&gt; &lt;encoder&gt; &lt;Pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/Pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- 输出到文件 --&gt; &lt;!-- 按照每天生成日志文件 --&gt; &lt;!-- TRACE --&gt; &lt;appender name=\"TRACE_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt; &lt;file&gt;${logback.dirPath}/${logback.contextName}/trace.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt; &lt;!--日志文件输出的文件名--&gt; &lt;fileNamePattern&gt;${logback.dirPath}/${logback.contextName}/%d{yyyy-MM-dd}/trace.logs-%i.log &lt;/fileNamePattern&gt; &lt;!--日志文件最大的大小--&gt; &lt;MaxFileSize&gt;${logback.MaxFileSize}&lt;/MaxFileSize&gt; &lt;!--日志文件保留天数--&gt; &lt;MaxHistory&gt;${logback.maxHistory}&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;${logback.pattern}&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt; &lt;level&gt;TRACE&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- DEBUG --&gt; &lt;appender name=\"DEBUG_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt; &lt;file&gt;${logback.dirPath}/${logback.contextName}/debug.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt; &lt;fileNamePattern&gt;${logback.dirPath}/${logback.contextName}/%d{yyyy-MM-dd}/debug.logs-%i.log &lt;/fileNamePattern&gt; &lt;MaxFileSize&gt;${logback.MaxFileSize}&lt;/MaxFileSize&gt; &lt;MaxHistory&gt;${logback.maxHistory}&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;${logback.pattern}&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt; &lt;level&gt;DEBUG&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- INFO --&gt; &lt;appender name=\"INFO_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt; &lt;file&gt;${logback.dirPath}/${logback.contextName}/info.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt; &lt;fileNamePattern&gt;${logback.dirPath}/${logback.contextName}/%d{yyyy-MM-dd}/info.logs-%i.log&lt;/fileNamePattern&gt; &lt;MaxFileSize&gt;${logback.MaxFileSize}&lt;/MaxFileSize&gt; &lt;MaxHistory&gt;${logback.maxHistory}&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;${logback.pattern}&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt; &lt;level&gt;INFO&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- WARN --&gt; &lt;appender name=\"WARN_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt; &lt;file&gt;${logback.dirPath}/${logback.contextName}/warn.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt; &lt;fileNamePattern&gt;${logback.dirPath}/${logback.contextName}/%d{yyyy-MM-dd}/warn.logs-%i.log&lt;/fileNamePattern&gt; &lt;MaxFileSize&gt;${logback.MaxFileSize}&lt;/MaxFileSize&gt; &lt;MaxHistory&gt;${logback.maxHistory}&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;${logback.pattern}&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt; &lt;level&gt;WARN&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- ERROR --&gt; &lt;appender name=\"ERROR_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt; &lt;file&gt;${logback.dirPath}/${logback.contextName}/error.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt; &lt;fileNamePattern&gt;${logback.dirPath}/${logback.contextName}/%d{yyyy-MM-dd}/error.logs-%i.log &lt;/fileNamePattern&gt; &lt;MaxFileSize&gt;${logback.MaxFileSize}&lt;/MaxFileSize&gt; &lt;MaxHistory&gt;${logback.maxHistory}&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;${logback.pattern}&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!--第三方日志配置--&gt; &lt;logger name=\"org.apache.axis\" level=\"info\"/&gt; &lt;logger name=\"org.apache.http\" level=\"info\"/&gt; &lt;logger name=\"com.baomidou.mybatisplus.core.MybatisConfiguration\" level=\"info\"/&gt; &lt;logger name=\"com.zaxxer.hikari\" level=\"info\"/&gt; &lt;logger name=\"org.springframework\" level=\"info\"/&gt; &lt;logger name=\"org.springframework.web.servlet.DispatcherServlet\" level=\"${logback.lever}\"/&gt; &lt;!-- 日志输出级别 --&gt; &lt;root level=\"${logback.lever}\"&gt; &lt;appender-ref ref=\"CONSOLE_APPENDER\"/&gt; &lt;appender-ref ref=\"TRACE_APPENDER\" /&gt; &lt;appender-ref ref=\"DEBUG_APPENDER\"/&gt; &lt;appender-ref ref=\"INFO_APPENDER\"/&gt; &lt;appender-ref ref=\"WARN_APPENDER\"/&gt; &lt;appender-ref ref=\"ERROR_APPENDER\"/&gt; &lt;/root&gt;&lt;/configuration&gt; LogHomeConfig1234567891011121314151617181920import ch.qos.logback.core.PropertyDefinerBase;/** * className LogHomeConfig * author demon * createTime 2021/4/15 13:51 * description logback日志路径配置 * 由logback-spring.xml使用：例如： * &lt;define name=\"LOG_HOME\" class=\"com.xxx.framework.config.LogHomeConfig\" /&gt; */public class LogHomeConfig extends PropertyDefinerBase { @Override public String getPropertyValue() { String logHome = System.getProperty(\"user.home\") + File.separator + \"project-name\"; System.out.println(\"自定义日志路径:\" + logHome); return logHome; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"logback","slug":"logback","permalink":"https://www.zhuqiaolun.com/tags/logback/"}]},{"title":"分布式自增ID算法---雪花算法","slug":"2022/02/1644472320483/1644472320483","date":"2022-02-10T05:52:00.000Z","updated":"2022-02-14T09:01:27.810Z","comments":false,"path":"2022/02/1644472320483/1644472320483/","link":"","permalink":"https://www.zhuqiaolun.com/2022/02/1644472320483/1644472320483/","excerpt":"分布式自增ID算法---雪花算法","text":"规则SnowFlake的结构如下(每部分用-分开):0 - 0000000000 0000000000 0000000000 0000000000 0 - 00000 - 00000 - 0000000000001位标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，所以id一般是正数，最高位是041位时间截(毫秒级)，注意，41位时间截不是存储当前时间的时间截，而是存储时间截的差值（当前时间截 - 开始时间截)得到的值），这里的的开始时间截，一般是我们的id生成器开始使用的时间，由我们程序来指定的（如下下面程序IdWorker类的startTime属性）。41位的时间截，可以使用69年，年T = (1L &lt;&lt; 41) / (1000L * 60 * 60 * 24 * 365) = 6910位的数据机器位，可以部署在1024个节点，包括5位datacenterId和5位workerId12位序列，毫秒内的计数，12位的计数顺序号支持每个节点每毫秒(同一机器，同一时间截)产生4096个ID序号加起来刚好64位，为一个Long型。 SnowFlake的优点是，整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞(由数据中心ID和机器ID作区分)，并且效率较高，经测试，SnowFlake每秒能够产生26万ID左右。 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121public class SnowflakeIdWorker { /** 开始时间截 (2015-01-01) */ private final long twepoch = 1489111610226L; /** 机器id所占的位数 */ private final long workerIdBits = 5L; /** 数据标识id所占的位数 */ private final long dataCenterIdBits = 5L; /** 支持的最大机器id，结果是31 (这个移位算法可以很快的计算出几位二进制数所能表示的最大十进制数) */ private final long maxWorkerId = -1L ^ (-1L &lt;&lt; workerIdBits); /** 支持的最大数据标识id，结果是31 */ private final long maxDataCenterId = -1L ^ (-1L &lt;&lt; dataCenterIdBits); /** 序列在id中占的位数 */ private final long sequenceBits = 12L; /** 机器ID向左移12位 */ private final long workerIdShift = sequenceBits; /** 数据标识id向左移17位(12+5) */ private final long dataCenterIdShift = sequenceBits + workerIdBits; /** 时间截向左移22位(5+5+12) */ private final long timestampLeftShift = sequenceBits + workerIdBits + dataCenterIdBits; /** 生成序列的掩码，这里为4095 (0b111111111111=0xfff=4095) */ private final long sequenceMask = -1L ^ (-1L &lt;&lt; sequenceBits); /** 工作机器ID(0~31) */ private long workerId; /** 数据中心ID(0~31) */ private long dataCenterId; /** 毫秒内序列(0~4095) */ private long sequence = 0L; /** 上次生成ID的时间截 */ private long lastTimestamp = -1L; //==============================Constructors===================================== /** * 构造函数 * @param workerId 工作ID (0~31) * @param dataCenterId 数据中心ID (0~31) */ public SnowflakeIdWorker(long workerId, long dataCenterId) { if (workerId &gt; maxWorkerId || workerId &lt; 0) { throw new IllegalArgumentException(String.format(\"workerId can't be greater than %d or less than 0\", maxWorkerId)); } if (dataCenterId &gt; maxDataCenterId || dataCenterId &lt; 0) { throw new IllegalArgumentException(String.format(\"dataCenterId can't be greater than %d or less than 0\", maxDataCenterId)); } this.workerId = workerId; this.dataCenterId = dataCenterId; } // ==============================Methods========================================== /** * 获得下一个ID (该方法是线程安全的) * @return SnowflakeId */ public synchronized long nextId() { long timestamp = timeGen(); //如果当前时间小于上一次ID生成的时间戳，说明系统时钟回退过这个时候应当抛出异常 if (timestamp &lt; lastTimestamp) { throw new RuntimeException( String.format(\"Clock moved backwards. Refusing to generate id for %d milliseconds\", lastTimestamp - timestamp)); } //如果是同一时间生成的，则进行毫秒内序列 if (lastTimestamp == timestamp) { sequence = (sequence + 1) &amp; sequenceMask; //毫秒内序列溢出 if (sequence == 0) { //阻塞到下一个毫秒,获得新的时间戳 timestamp = tilNextMillis(lastTimestamp); } } //时间戳改变，毫秒内序列重置 else { sequence = 0L; } //上次生成ID的时间截 lastTimestamp = timestamp; //移位并通过或运算拼到一起组成64位的ID return ((timestamp - twepoch) &lt;&lt; timestampLeftShift) // | (dataCenterId &lt;&lt; dataCenterIdShift) // | (workerId &lt;&lt; workerIdShift) // | sequence; } /** * 阻塞到下一个毫秒，直到获得新的时间戳 * @param lastTimestamp 上次生成ID的时间截 * @return 当前时间戳 */ protected long tilNextMillis(long lastTimestamp) { long timestamp = timeGen(); while (timestamp &lt;= lastTimestamp) { timestamp = timeGen(); } return timestamp; } /** * 返回以毫秒为单位的当前时间 * @return 当前时间(毫秒) */ protected long timeGen() { return System.currentTimeMillis(); }} 测试12345678910public static void main(String[] args) { System.out.println(System.currentTimeMillis()); SnowflakeIdWorker idWorker = new SnowflakeIdWorker(1, 1); long startTime = System.nanoTime(); for (int i = 0; i &lt; 50000; i++) { long id = idWorker.nextId(); System.out.println(id); } System.out.println((System.nanoTime()-startTime)/1000000+\"ms\");} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Snowflake","slug":"Snowflake","permalink":"https://www.zhuqiaolun.com/tags/Snowflake/"}]},{"title":"Go-FastDfs 工具类","slug":"2021/11/1636190973137/1636190973137","date":"2021-11-06T09:29:33.000Z","updated":"2021-11-06T09:42:55.682Z","comments":false,"path":"2021/11/1636190973137/1636190973137/","link":"","permalink":"https://www.zhuqiaolun.com/2021/11/1636190973137/1636190973137/","excerpt":"Go-FastDfs","text":"安装 依赖12345678910&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.76&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt; &lt;artifactId&gt;okhttp&lt;/artifactId&gt; &lt;version&gt;3.9.1&lt;/version&gt;&lt;/dependency&gt; 上传1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import okhttp3.*;/** * author ：demon * date ：2021 2021/5/26 11:36 * desc ：GoFast工具类 */public class GoFastFileService { public GoFastFileResult upload(String url, String scene, String fileName, byte[] bytes) throws Exception { MultipartBody multipartBody = new MultipartBody.Builder(). setType(MultipartBody.FORM) .addFormDataPart(\"file\", fileName, RequestBody.create(MediaType.parse(\"multipart/form-data;charset=utf-8\"), bytes)) .addFormDataPart(\"output\", \"json\") .addFormDataPart(\"scene\", scene) .build(); try { GoFastFileResult goFastFileResult = new GoFastFileResult(); Request request = new Request.Builder().url(url).post(multipartBody).build(); Response response = new OkHttpClient().newCall(request).execute(); if (response.isSuccessful()) { ResponseBody body = response.body(); if (body != null) { String result = body.string(); System.out.println(result); JSONObject jsonObject = JSON.parseObject(result); if(String.valueOf(jsonObject.get(\"status\")).equals(\"fail\")){ throw new Exception(\"上传文件异常:\"+ jsonObject.get(\"message\")); } else { goFastFileResult.setUrl(String.valueOf(jsonObject.get(\"url\"))); goFastFileResult.setMd5(String.valueOf(jsonObject.get(\"md5\"))); goFastFileResult.setPath(String.valueOf(jsonObject.get(\"path\"))); goFastFileResult.setDomain(String.valueOf(jsonObject.get(\"domain\"))); goFastFileResult.setScene(String.valueOf(jsonObject.get(\"scene\"))); goFastFileResult.setSize(Long.parseLong(String.valueOf(jsonObject.get(\"size\")))); goFastFileResult.setMtime(Long.parseLong(String.valueOf(jsonObject.get(\"mtime\")))); goFastFileResult.setScenes(String.valueOf(jsonObject.get(\"scenes\"))); goFastFileResult.setRetmsg(String.valueOf(jsonObject.get(\"retmsg\"))); goFastFileResult.setRetcode(String.valueOf(jsonObject.get(\"retcode\")).equals(\"0\")); goFastFileResult.setSrc(String.valueOf(jsonObject.get(\"src\"))); } } } return goFastFileResult; } catch (Exception e) { log.error(\"上传文件到影像服务器异常\", e); throw new Exception(\"上传文件异常\",e); } }} 返回值的实体类 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108/** * author ：demon * date ：2021 2021/5/26 13:23 * desc ：GoFastFile 结果返回映射 */public class GoFastFileResult implements Serializable { private String url; private String md5; private String path; private String domain; private String scene; private long size; private long mtime; private String scenes; private String retmsg; private Boolean retcode; private String src; public String getUrl() { return url; } public void setUrl(String url) { this.url = url; } public String getMd5() { return md5; } public void setMd5(String md5) { this.md5 = md5; } public String getPath() { return path; } public void setPath(String path) { this.path = path; } public String getDomain() { return domain; } public void setDomain(String domain) { this.domain = domain; } public String getScene() { return scene; } public void setScene(String scene) { this.scene = scene; } public long getSize() { return size; } public void setSize(long size) { this.size = size; } public long getMtime() { return mtime; } public void setMtime(long mtime) { this.mtime = mtime; } public String getScenes() { return scenes; } public void setScenes(String scenes) { this.scenes = scenes; } public String getRetmsg() { return retmsg; } public void setRetmsg(String retmsg) { this.retmsg = retmsg; } public Boolean getRetcode() { return retcode; } public void setRetcode(Boolean retcode) { this.retcode = retcode; } public String getSrc() { return src; } public void setSrc(String src) { this.src = src; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Go-FastDfs","slug":"Go-FastDfs","permalink":"https://www.zhuqiaolun.com/tags/Go-FastDfs/"}]},{"title":"接口测试 - 常用测试点有哪些","slug":"2021/09/1632971629467/1632971629467","date":"2021-09-30T03:13:49.000Z","updated":"2021-09-30T03:27:49.430Z","comments":false,"path":"2021/09/1632971629467/1632971629467/","link":"","permalink":"https://www.zhuqiaolun.com/2021/09/1632971629467/1632971629467/","excerpt":"接口测试 - 常用测试点有哪些","text":"功能方面接口的功能是否正确实现了？接口是否按照设计文档中来实现 1234567891011121314151617181920兼容性测试： 比如说今天接口进行了调整，但是前端没有进行变更，这时候需要验证新的接口是否满足旧的调用方式错误码测试： 通用的错误码与业务错误码是否能够清晰的说明调用问题，错误码是否能够尽可能的全的覆盖所有的情况返回值测试： 返回值除了内容需要是正确的，还需要类型也是正确的，保证调用方拿到这些参数能够正确的解析参数测试 边界值、等价类等， 比如username参数写为了user，那么这就不符合，因为接口文档在整个开发中都需要使用，所以接口实际的设计要与接口设计文档中保持一致json格式测试： 通常我们的接口一般设计的都是传递json串，那么就需要去测试 如果传递非json的情况，这时候程序会不会正确的处理，返回相应的 error code默认值测试： 很多情况一些非必填的参数会有默认值，比如说一个查询的接口，参数count为返回查询的结果数量， 默认为10， 那么就应该有一条case来测试，当然前置条件是数据库里面必须要存在这样的数据超过10条。 逻辑方面是否有依赖业务，比如查看订单，是需要用户首先登录的，所以肯定要保证登录了或有相应的cookie 123业务测试： 传递正确的参数，接口对数据库进行查询的操作，需要去验证数据库查询是否正确， 接口对数据库进行增删改的操作，也需要看数据库是否同步进行了这些操作， 异常方面异常分为两类：参数异常和数据异常 123456789101112131415参数异常： 关键字参数：将参数写为开发语言中的关键字 参数为空：比如去掉了username参数 多或少参数：多或者少参数的验证，现在还不确定如果一个接口多了参数如果没有报错是否是合理的，或者是否需要优化 错误参数：比如将username参数写为了user等看是否能返回相应的error?code 数据异常： 关键字数据：将参数的值填为开发语言中的关键字 数据为空：将参数的额值填为空 长度不一致：因为数据库中每个字段都设置有字段长度，填写不符合的长度进行验证 错误数据：就是将参数的值任意填写，或填写不存在的数值 异常类型： 比如count参数，这个参数的类型一定是可以转换为int类型的， 这时候我们需要测试如果传的一些不可以转换为int类型值来测试代码是否加入 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"论扩","slug":"论扩","permalink":"https://www.zhuqiaolun.com/categories/%E8%AE%BA%E6%89%A9/"}],"tags":[{"name":"接口","slug":"接口","permalink":"https://www.zhuqiaolun.com/tags/%E6%8E%A5%E5%8F%A3/"}]},{"title":"Java面试题","slug":"2021/07/1626834884475/1626834884475","date":"2021-07-21T02:34:44.000Z","updated":"2021-09-30T03:28:46.611Z","comments":false,"path":"2021/07/1626834884475/1626834884475/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1626834884475/1626834884475/","excerpt":"Java面试题","text":"基础部门 1.面向对象的特征有哪些方面？ 1234567891011121314Java面向对象的几个特征分别为：封装，继承，多态。封装： 是将代码及其处理的数据绑定在一起的一种编程机制。 该机制保证了程序和数据都不受外部干扰且不被误用。继承： 是指子类拥有父类的全部特征和行为。 这是类之间的一种关系，Java 只支持单继承。多态： 面向对象的多态性，即“一个接口，多个方法”。 多态性体现在父类中定义的属性和方法被子类继承后，可以具有不同的属性或表现方式。 多态性允许一个接口被多个同类使用，弥补了单继承的不足。 2.访问修饰符public,private,protected,以及不写（默认default）时的区别？ 1234public： 当前类（√） 同包（√） 子类（√） 其他包（√） private： 当前类（√） 同包（√） 子类（√） 其他包（×）protected： 当前类（√） 同包（√） 子类（×） 其他包（×）default： 当前类（√） 同包（×） 子类（×） 其他包（×） 3.String 是最基本的数据类型吗？ 1234不是。Java中的基本数据类型只有8个：byte、short、int、long、float、double、char、boolean；除了基本类型（primitive type），剩下的都是引用类型（reference type），Java 5以后引入的枚举类型也算是一种比较特殊的引用类型。 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"ElasticSearch安装head插件","slug":"2021/07/1626760500688/1626760500688","date":"2021-07-20T05:55:00.000Z","updated":"2021-07-20T06:37:10.744Z","comments":false,"path":"2021/07/1626760500688/1626760500688/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1626760500688/1626760500688/","excerpt":"ElasticSearch安装head插件","text":"ElasticSearch-head页面介绍在登陆和访问head插件地址和ElasticSearch前需要事先在服务器上安装和配置好ElasticSearch以及head插件。安装完后，默认head插件的web端口为9100，ElasticSearch服务的端口为9200，使用浏览器访问head地址，如 http://localhost:9100/，推荐使用Chrome浏览器，head插件对Chrome浏览器兼容更佳。进入head页面后将ElasticSearch连接输入框中填写正确的ElasticSearch服务地址，如 http://localhost:9200/。 下载网址 https://github.com/mobz/elasticsearch-head下载 https://github.com/mobz/elasticsearch-head/archive/refs/heads/master.zip 解压 进入head文件夹下，执行命令：npm install (此处是为安装进行安装pathomjs) 启动安装完成之后 npm run start 启动head插件 访问：http://localhost:9100/ 修改es配置修改es使用的参数.编辑目录下的config\\elasticsearch.yml文件, 123# 增加新的参数，这样head插件可以访问eshttp.cors.enabled: true http.cors.allow-origin: \"*\" 修改完配置将es重启,浏览器访问 http://localhost:9100 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://www.zhuqiaolun.com/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch-Plug","slug":"ElasticSearch-Plug","permalink":"https://www.zhuqiaolun.com/tags/ElasticSearch-Plug/"}]},{"title":"ElasticSearch的安装","slug":"2021/07/1626758495025/1626758495025","date":"2021-07-20T05:21:35.000Z","updated":"2021-07-20T07:11:45.364Z","comments":false,"path":"2021/07/1626758495025/1626758495025/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1626758495025/1626758495025/","excerpt":"ElasticSearch，Windows，Linux 的安装","text":"前置ElasticSearch是基于lucence开发的，也就是运行需要java jdk支持，所以要先安装JAVA环境。由于ElasticSearch 5.x 往后依赖于JDK 1.8的，所以现在我们下载JDK 1.8或者更高版本。下载JDK1.8,下载完成后安装 如若不安装JDK，可使用ElasticSearch的自带的JDK 使用自带的JDK 下载官网 解压 运行进入bin目录下,双击执行elasticsearch.bat 查看第一次启动： 第N+1次启动： 浏览器访问：http://localhost:9200 配置远程访问修改es使用的参数.编辑目录下的config\\elasticsearch.yml文件, 1234network.host: 0.0.0.0 http.port: 9200cluster.initial_master_nodes: [\"node-1\"] 使用自带的JDK在bin目录下找到elasticsearch-env.bat并打开，加入你es7本身自带的jdk路径：rem 配置es自己的jdkset ES_JAVA_HOME=D:\\services\\elasticsearch-7.13.3\\jdk ElasticSearch安装为Windows服务bin目录下有一个文件 elasticsearch-service.bat 执行: elasticsearch-service.bat install 即可安装为服务 安装ElasticSearch服务： elasticsearch-service.bat install 删除已安装的ElasticSearch服务（如果启动则停止服务） elasticsearch-service.bat remove 启动ElasticSearch服务（如果已安装） elasticsearch-service.bat start 停止ElasticSearch服务（如果已安装） elasticsearch-service.bat stop 启动GUI来管理已安装的服务 elasticsearch-service.bat manager document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://www.zhuqiaolun.com/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://www.zhuqiaolun.com/tags/ElasticSearch/"}]},{"title":"Freemarker 封装工具类","slug":"2021/07/1625196322877/1625196322877","date":"2021-07-02T03:25:22.000Z","updated":"2021-11-06T09:24:10.596Z","comments":false,"path":"2021/07/1625196322877/1625196322877/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1625196322877/1625196322877/","excerpt":"Freemarker 封装工具类","text":"配置 FreemarkerService： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import java.io.File;import java.util.Map;/** * className FreemarkerService * author demon * createTime 2021/5/20 17:40 * description 生成静态页面service */public interface FreemarkerService { /** * 生成静态页面 * * @param ftlName 模板名称 * @param params 数据模型 * @param outFile 输出文件 * @return 返回 */ boolean createStaticHtml(String ftlName, Map&lt;Object, Object&gt; params, File outFile); /** * 生成静态数据 * * @param ftlName 模板名称 * @param params 数据模型 * @return 返回 * @throws Exception 异常 */ String createStaticData(String ftlName, Map&lt;Object, Object&gt; params) throws Exception; /** * 渲染静态数据 * * @param ftlName 模板名称 - 自定义(随便一个值都行) * @param ftlStr 模板字符串 - 内容 * @param params 数据模型 * @return 返回 * @throws Exception 异常 */ String createStaticData(String ftlName,String ftlStr, Map&lt;Object, Object&gt; params) throws Exception; /** * 渲染静态数据 * * @param ftlName 模板名称 - 自定义(随便一个值都行) * @param inputStream 模板字符串 - 内容 （文件流） * resources目录下的文件 如： * InputStream inputStream = xxx.class.getResourceAsStream(\"/ftl/example.ftl\"); * @param params 数据模型 * @return 返回 * @throws Exception 异常 */ String createStaticData(String ftlName, InputStream inputStream, Map&lt;Object, Object&gt; params) throws Exception;} 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106import freemarker.template.Configuration;import freemarker.template.Template;import freemarker.template.TemplateException;import org.apache.commons.io.FileUtils;import org.apache.commons.io.IOUtils;import org.springframework.stereotype.Service;import org.springframework.ui.freemarker.FreeMarkerTemplateUtils;import javax.annotation.Resource;import java.io.File;import java.io.FileOutputStream;import java.io.IOException;import java.io.InputStream;import java.util.Map;/** * className FreemarkerServiceImpl * author demon * createTime 2021/5/20 17:40 */@Servicepublic class FreemarkerServiceImpl implements FreemarkerService { @Resource private Configuration configuration; @Override public boolean createStaticHtml(String ftlName, Map&lt;Object, Object&gt; params, File outFile) { InputStream inputStream = null; FileOutputStream fileOutputStream = null; try { //获取模板 Template template = configuration.getTemplate(ftlName); // 静态化页面内容 String content = FreeMarkerTemplateUtils.processTemplateIntoString(template, params); inputStream = IOUtils.toInputStream(content, \"UTF-8\"); // 输出文件 FileUtils.forceMkdirParent(outFile); fileOutputStream = new FileOutputStream(outFile); IOUtils.copy(inputStream, fileOutputStream); return true; } catch (IOException | TemplateException e) { e.printStackTrace(); return false; } finally { // 关闭流 if (inputStream != null) { try { inputStream.close(); } catch (IOException e) { e.printStackTrace(); } finally { if (fileOutputStream != null) { try { fileOutputStream.close(); } catch (IOException e) { e.printStackTrace(); } } } } } } @Override public String createStaticData(String ftlName, Map&lt;Object, Object&gt; params) throws Exception { try { //获取模板 Template template = configuration.getTemplate(ftlName); // 静态化数据内容 return FreeMarkerTemplateUtils.processTemplateIntoString(template, params); } catch (IOException | TemplateException e) { e.printStackTrace(); throw new Exception(e); } } @Override public String createStaticData(String ftlName, String templateStr, Map&lt;Object, Object&gt; params) throws Exception { try { //创建模板 Template template = new Template(ftlName, templateStr, configuration); // 渲染静态数据内容 return FreeMarkerTemplateUtils.processTemplateIntoString(template, params); } catch (IOException | TemplateException e) { e.printStackTrace(); throw new Exception(e); } } @Override public String createStaticData(String ftlName, InputStream inputStream, Map&lt;Object, Object&gt; params) throws Exception { try { String ftlStr = IOUtils.toString(inputStream, \"utf-8\"); //创建模板 Template template = new Template(ftlName, ftlStr, configuration); // 渲染静态数据内容 return FreeMarkerTemplateUtils.processTemplateIntoString(template, params); } catch (IOException | TemplateException e) { e.printStackTrace(); throw new Exception(e); } }} 模板：example.ftl： 123{ \"username\": \"${username}\"} 示例1： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051@Testvoid 测试模板_静态页面() { String ftlName = \"example.ftl\"; Map&lt;Object, Object&gt; params = new HashMap&lt;&gt;(); params.put(\"username\", \"测试888\"); System.out.println(JSONObject.toJSONString(params)); File outFile = new File(\"d:/test/page/test.html\"); System.out.println(freemarkerService.createStaticHtml(ftlName, params, outFile));} @Testvoid 测试模板_渲染数据1() { String ftlName = \"example.ftl\"; String templateValue = \"hello,${username}\"; Map&lt;Object, Object&gt; params = new HashMap&lt;&gt;(); params.put(\"username\",\"测试888\"); try { System.out.println(freemarkerService.createStaticData(ftlName,params)); } catch (Exception e) { e.printStackTrace(); }}@Testvoid 测试模板_渲染数据2() { String ftlName = \"example.ftl\"; String templateStr = \"hello,${username}\"; Map&lt;Object, Object&gt; params = new HashMap&lt;&gt;(); params.put(\"username\",\"测试888\"); try { System.out.println(freemarkerService.createStaticData(ftlName,templateStr,params)); } catch (Exception e) { e.printStackTrace(); }}@Testvoid 测试模板_渲染数据3() { String ftlName = \"example.ftl\"; String templateValue = \"hello,${username}\"; Map&lt;Object, Object&gt; params = new HashMap&lt;&gt;(); params.put(\"username\", \"测试888\"); System.out.println(JSONObject.toJSONString(params)); try { InputStream inputStream = xxx.class.getResourceAsStream(\"/ftl/example.ftl\"); System.out.println(freemarkerService.createStaticData(ftlName, inputStream, params)); } catch (Exception e) { e.printStackTrace(); }} 运行结果： 1234hello,测试888{ \"username\": \"测试888\"} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Freemarker","slug":"Freemarker","permalink":"https://www.zhuqiaolun.com/tags/Freemarker/"}]},{"title":"RedisTemplate 封装工具类","slug":"2021/07/1625194461536/1625194461536","date":"2021-07-02T02:54:21.000Z","updated":"2021-07-02T05:13:56.012Z","comments":false,"path":"2021/07/1625194461536/1625194461536/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1625194461536/1625194461536/","excerpt":"RedisTemplate 封装工具类","text":"配置 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525import lombok.extern.slf4j.Slf4j;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.stereotype.Component;import org.springframework.util.CollectionUtils;import javax.annotation.Resource;import java.util.List;import java.util.Map;import java.util.Set;import java.util.concurrent.TimeUnit;/** * @author: Demon * @date 2019/8/19 14:34 * @description: 封装redisUtil类 */@SuppressWarnings(\"ConstantConditions\")@Slf4j@Componentpublic class RedisTemplateUtil { @Resource private RedisTemplate&lt;String, Object&gt; redisTemplate; /** * 指定缓存失效时间 * @param key 键 * @param time 时间(秒) */ public boolean expire(String key, long time) { try { if (time &gt; 0) { redisTemplate.expire(key, time, TimeUnit.SECONDS); } log.info(\"指定缓存失效时间成功，key:{}, time:{}\", key, time); return true; } catch (Exception e) { log.info(\"指定缓存失效时间错误，key:{}, time:{}\", key, time); return false; } } /** * 根据key 获取过期时间 * @param key 键 不能为null * @return 时间(秒) 返回0代表为永久有效 */ @SuppressWarnings(\"ConstantConditions\") public long getExpire(String key) { log.info(\"获取过期时间，key:{}\", key); return redisTemplate.getExpire(key, TimeUnit.SECONDS); } /** * 判断key是否存在 * @param key 键 * @return true 存在 false不存在 */ public boolean hasKey(String key) { try { log.info(\"判断key是否存在，key:{}\", key); return redisTemplate.hasKey(key); } catch (Exception e) { log.info(\"判断key是否存在error，key:{}\", key); return false; } } /** * 删除缓存 * @param key 可以传一个值 或多个 */ public void del(String... key) { if (key != null &amp;&amp; key.length &gt; 0) { if (key.length == 1) { redisTemplate.delete(key[0]); } else { redisTemplate.delete(CollectionUtils.arrayToList(key)); } } } /** * 普通缓存获取 * @param key 键 * @return 值 */ public Object get(String key) { redisTemplate.getConnectionFactory().getConnection(); log.info(\"获取缓存, key:{}\", key); return key == null ? null : redisTemplate.opsForValue().get(key); } /** * 普通缓存放入 * @param key 键 * @param value 值 * @return true成功 false失败 */ public boolean set(String key, Object value) { try { System.out.println(redisTemplate.getConnectionFactory().getConnection()); redisTemplate.opsForValue().set(key, value); log.info(\"保存缓存, key:{}, value:{}\", key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 普通缓存放入并设置时间 * @param key 键 * @param value 值 * @param time 时间(秒) time要大于0 如果time小于等于0 将设置无限期 * @return true成功 false 失败 */ public boolean set(String key, Object value, long time) { try { if (time &gt; 0) { redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS); } else { set(key, value); } log.info(\"保存缓存并设置时间, key:{}, value:{}, time:{}\", key, value, time); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 递增 * @param key 键 * @param delta 要增加几(大于0) */ public long incr(String key, long delta) { if (delta &lt; 0) { throw new RuntimeException(\"递增因子必须大于0\"); } return redisTemplate.opsForValue().increment(key, delta); } /** * 递减 * @param key 键 * @param delta 要减少几(小于0) * @return 值 */ public long decr(String key, long delta) { if (delta &lt; 0) { throw new RuntimeException(\"递减因子必须大于0\"); } return redisTemplate.opsForValue().increment(key, -delta); } /** * HashGet * @param key 键 不能为null * @param item 项 不能为null * @return 值 */ public Object hget(String key, String item) { return redisTemplate.opsForHash().get(key, item); } /** * 获取hashKey对应的所有键值 * @param key 键 * @return 对应的多个键值 */ public Map&lt;Object, Object&gt; hmget(String key) { return redisTemplate.opsForHash().entries(key); } /** * HashSet * @param key 键 * @param map 对应多个键值 * @return true 成功 false 失败 */ public boolean hmset(String key, Map&lt;String, Object&gt; map) { try { redisTemplate.opsForHash().putAll(key, map); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * HashSet 并设置时间 * @param key 键 * @param map 对应多个键值 * @param time 时间(秒) * @return true成功 false失败 */ public boolean hmset(String key, Map&lt;String, Object&gt; map, long time) { try { redisTemplate.opsForHash().putAll(key, map); if (time &gt; 0) { expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 向一张hash表中放入数据,如果不存在将创建 * @param key 键 * @param item 项 * @param value 值 * @return true 成功 false失败 */ public boolean hset(String key, String item, Object value) { try { redisTemplate.opsForHash().put(key, item, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 向一张hash表中放入数据,如果不存在将创建 * @param key 键 * @param item 项 * @param value 值 * @param time 时间(秒) 注意:如果已存在的hash表有时间,这里将会替换原有的时间 * @return true 成功 false失败 */ public boolean hset(String key, String item, Object value, long time) { try { redisTemplate.opsForHash().put(key, item, value); if (time &gt; 0) { expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 删除hash表中的值 * @param key 键 不能为null * @param item 项 可以使多个 不能为null */ public void hdel(String key, Object... item) { redisTemplate.opsForHash().delete(key, item); } /** * 判断hash表中是否有该项的值 * @param key 键 不能为null * @param item 项 不能为null * @return true 存在 false不存在 */ public boolean hHasKey(String key, String item) { return redisTemplate.opsForHash().hasKey(key, item); } /** * hash递增 如果不存在,就会创建一个 并把新增后的值返回 * @param key 键 * @param item 项 * @param by 要增加几(大于0) */ public double hincr(String key, String item, double by) { return redisTemplate.opsForHash().increment(key, item, by); } /** * hash递减 * @param key 键 * @param item 项 * @param by 要减少记(小于0) */ public double hdecr(String key, String item, double by) { return redisTemplate.opsForHash().increment(key, item, -by); } /** * 根据key获取Set中的所有值 * @param key 键 */ public Set&lt;Object&gt; sGet(String key) { try { return redisTemplate.opsForSet().members(key); } catch (Exception e) { e.printStackTrace(); return null; } } /** * 根据value从一个set中查询,是否存在 * @param key 键 * @param value 值 * @return true 存在 false不存在 */ public boolean sHasKey(String key, Object value) { try { return redisTemplate.opsForSet().isMember(key, value); } catch (Exception e) { e.printStackTrace(); return false; } } /** * 将数据放入set缓存 * @param key 键 * @param values 值 可以是多个 */ public long sSet(String key, Object... values) { try { return redisTemplate.opsForSet().add(key, values); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * 将set数据放入缓存 * @param key 键 * @param time 时间(秒) * @param values 值 可以是多个 */ public long sSetAndTime(String key, long time, Object... values) { try { Long count = redisTemplate.opsForSet().add(key, values); if (time &gt; 0){ expire(key, time); } return count; } catch (Exception e) { e.printStackTrace(); return 0; } } /** * 获取set缓存的长度 * @param key 键 * @return 值 */ @SuppressWarnings(\"ConstantConditions\") public long sGetSetSize(String key) { try { return redisTemplate.opsForSet().size(key); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * 移除值为value的 * @param key 键 * @param values 值 可以是多个 * @return 移除的个数 */ public long setRemove(String key, Object... values) { try { return redisTemplate.opsForSet().remove(key, values); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * 获取list缓存的内容 * @param key 键 * @param start 开始 * @param end 结束 0 到 -1代表所有值 */ public List&lt;Object&gt; lGet(String key, long start, long end) { try { return redisTemplate.opsForList().range(key, start, end); } catch (Exception e) { e.printStackTrace(); return null; } } /** * 获取list缓存的长度 * @param key 键 */ public long lGetListSize(String key) { try { return redisTemplate.opsForList().size(key); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * 通过索引 获取list中的值 * @param key 键 * @param index 索引 index&gt;=0时， 0 表头，1 第二个元素，依次类推；index&lt;0时，-1，表尾，-2倒数第二个元素，依次类推 */ public Object lGetIndex(String key, long index) { try { return redisTemplate.opsForList().index(key, index); } catch (Exception e) { e.printStackTrace(); return null; } } /** * 将list放入缓存 * @param key 键 * @param value 值 */ public boolean lSet(String key, Object value) { try { redisTemplate.opsForList().rightPush(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 将list放入缓存 * @param key 键 * @param value 值 * @param time 时间(秒) */ public boolean lSet(String key, Object value, long time) { try { redisTemplate.opsForList().rightPush(key, value); if (time &gt; 0){ expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 将list放入缓存 * @param key 键 * @param value 值 */ public boolean lSet(String key, List&lt;Object&gt; value) { try { redisTemplate.opsForList().rightPushAll(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 将list放入缓存 * * @param key 键 * @param value 值 * @param time 时间(秒) */ public boolean lSet(String key, List&lt;Object&gt; value, long time) { try { redisTemplate.opsForList().rightPushAll(key, value); if (time &gt; 0){ expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 根据索引修改list中的某条数据 * @param key 键 * @param index 索引 * @param value 值 */ public boolean lUpdateIndex(String key, long index, Object value) { try { redisTemplate.opsForList().set(key, index, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * 移除N个值为value * @param key 键 * @param count 移除多少个 * @param value 值 */ public long lRemove(String key, long count, Object value) { try { return redisTemplate.opsForList().remove(key, count, value); } catch (Exception e) { e.printStackTrace(); return 0; } }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"RedisTemplate","slug":"RedisTemplate","permalink":"https://www.zhuqiaolun.com/tags/RedisTemplate/"}]},{"title":"RestTemplate 封装工具类","slug":"2021/07/1625194440104/1625194440104","date":"2021-07-02T02:54:00.000Z","updated":"2021-07-23T05:15:52.045Z","comments":false,"path":"2021/07/1625194440104/1625194440104/","link":"","permalink":"https://www.zhuqiaolun.com/2021/07/1625194440104/1625194440104/","excerpt":"RestTemplate 封装工具类","text":"配置ApplicationContextHelper RestTemplate配置 说明 简单的 Get、Post 请求 自定义请求头的 Get、Post 请求 带参数的 Get(Query) 请求 带参数的 Post(Query/Body) 请求 可上传单个、多个文件的 Post 请求 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200import org.springframework.http.HttpEntity;import org.springframework.http.HttpHeaders;import org.springframework.http.HttpMethod;import org.springframework.http.ResponseEntity;import org.springframework.util.LinkedMultiValueMap;import org.springframework.util.MultiValueMap;import org.springframework.web.client.RestTemplate;import org.springframework.web.util.UriComponentsBuilder;import java.io.File;import java.util.ArrayList;import java.util.List;import java.util.Map;/** * author ：demon * date ：2021 2021/6/29 18:20 * desc ：RestTemplate 工具 */public class RestTemplateUtil { /** * 自定义请求头 * 简单的 Get请求 * * @param headers 参数 * @param url 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; simpleGet(HttpHeaders headers, String url) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url); //将请求头部和参数合成一个请求 HttpEntity&lt;?&gt; httpEntity = new HttpEntity&lt;&gt;(headers); return restTemplate.exchange(builder.build().encode().toUri(), HttpMethod.GET, httpEntity, String.class); } /** * 表单 - Query * 带参数 Get请求 * * @param headers 参数 * @param url 参数 * @param params 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executeGetParam(HttpHeaders headers, String url, Map&lt;String, String&gt; params) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\"); UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url); if (params != null &amp;&amp; params.size() &gt; 0) { for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) { builder.queryParam(entry.getKey(), entry.getValue()); } } //将请求头部和参数合成一个请求 HttpEntity&lt;?&gt; httpEntity = new HttpEntity&lt;&gt;(headers); return restTemplate.exchange(builder.build().encode().toUri(), HttpMethod.GET, httpEntity, String.class); } /** * 自定义请求头 * - Query * - Body * 简单的 Post 请求 * * @param headers 参数 * @param url 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; simplePost(HttpHeaders headers, String url) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); //将请求头部和参数合成一个请求 HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(null, headers); return restTemplate.postForEntity(url, httpEntity, String.class); } /** * 表单 - Query * 带参数的 Post 请求 * * @param headers 参数 * @param url 参数 * @param params 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostFromParam(HttpHeaders headers, String url, Map&lt;String, String&gt; params) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); return restTemplate.postForEntity(url, getMultiValueMap(headers, null, params), String.class); } /** * 表单 - Query * 上传单个文件的 Post 请求 * * @param headers 参数 * @param url 参数 * @param file 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostFromFile(HttpHeaders headers, String url, File file) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); List&lt;File&gt; files = new ArrayList&lt;&gt;(); files.add(file); return restTemplate.postForEntity(url, getMultiValueMap(headers, files, null), String.class); } /** * 表单 - Query * 上传多个文件的 Post 请求 * * @param headers 参数 * @param url 参数 * @param files 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostFromFile(HttpHeaders headers, String url, List&lt;File&gt; files) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); return restTemplate.postForEntity(url, getMultiValueMap(headers, files, null), String.class); } /** * 表单 - Query * 上传单个文件且带参数的 Post 请求 * * @param headers 参数 * @param url 参数 * @param file 参数 * @param params 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostFromFileParam(HttpHeaders headers, String url, File file, Map&lt;String, String&gt; params) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); List&lt;File&gt; files = new ArrayList&lt;&gt;(); files.add(file); return restTemplate.postForEntity(url, getMultiValueMap(headers, files, params), String.class); } /** * 表单 - Query * 上传多个文件且带参数的 Post 请求 * * @param headers 参数 * @param url 参数 * @param files 参数 * @param params 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostFromFileParam(HttpHeaders headers, String url, List&lt;File&gt; files, Map&lt;String, String&gt; params) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); return restTemplate.postForEntity(url, getMultiValueMap(headers, files, params), String.class); } private static HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; getMultiValueMap(HttpHeaders headers, List&lt;File&gt; files, Map&lt;String, String&gt; params) { MultiValueMap&lt;String, Object&gt; multiValueMap = new LinkedMultiValueMap&lt;&gt;(); if (files != null &amp;&amp; files.size() &gt; 0) { headers.set(\"Content-Type\", \"multipart/form-data\"); for (File file : files) { multiValueMap.add(\"file\", new org.springframework.core.io.FileSystemResource(file)); } } else { headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\"); } if (params != null &amp;&amp; params.size() &gt; 0) { for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) { multiValueMap.add(entry.getKey(), entry.getValue()); } } return new HttpEntity&lt;&gt;(multiValueMap, headers); } /** * Body请求 - Body * @param headers 参数 * @param url 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostBody(HttpHeaders headers, String url) { return executePostBodyParam(headers,url,null); } /** * Body请求 - Body * @param headers 参数 * @param url 参数 * @param str 参数 * @return 返回 */ public static ResponseEntity&lt;String&gt; executePostBodyParam(HttpHeaders headers, String url,String str) { RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); headers.set(\"Content-Type\", \"application/json;charset=UTF-8\"); HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(str, headers); return restTemplate.postForEntity(url, httpEntity, String.class); } } document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"RestTemplate","slug":"RestTemplate","permalink":"https://www.zhuqiaolun.com/tags/RestTemplate/"}]},{"title":"CentOS7防火墙操作命令","slug":"2021/06/1624517875141/1624517875141","date":"2021-06-24T06:57:55.000Z","updated":"2021-06-24T07:13:36.816Z","comments":false,"path":"2021/06/1624517875141/1624517875141/","link":"","permalink":"https://www.zhuqiaolun.com/2021/06/1624517875141/1624517875141/","excerpt":"CentOS7防火墙操作命令","text":"查看服务是否开机启动systemctl is-enabled firewalld.service 查看已启动的服务列表systemctl list-unit-files|grep enabled 查看启动失败的服务列表systemctl –failed firewalld的基本使用 查看状态：systemctl status firewalld 启动：systemctl start firewalld 停止：systemctl stop firewalld 禁止开机启动：systemctl disable firewalld 启用开机启动：systemctl enable firewalld 配置firewall-cmd 查看版本：firewall-cmd –version 查看帮助：firewall-cmd –help 显示状态：firewall-cmd –state 查看所有打开的端口：firewall-cmd –zone=public –list-ports 更新防火墙规则：firewall-cmd –reload 更新防火墙规则，重启服务：firewall-cmd –completely-reload 查看已激活的Zone信息:firewall-cmd –get-active-zones 查看指定接口所属区域：firewall-cmd –get-zone-of-interface=eth0 拒绝所有包：firewall-cmd –panic-on 取消拒绝状态：firewall-cmd –panic-off 查看是否拒绝：firewall-cmd –query-panic firewall开启和关闭端口-permanent永久生效，没有此参数重启后失效 添加：firewall-cmd –zone=public –add-port=80/tcp –permanent 重新载入：firewall-cmd –reload 查看：firewall-cmd –zone=public –query-port=80/tcp 删除：firewall-cmd –zone=public –remove-port=80/tcp –permanent 示例：开通3306端口firewall-cmd –zone=public –add-port=3306/tcp –permanentfirewall-cmd –reload document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Linux","slug":"Linux","permalink":"https://www.zhuqiaolun.com/categories/Linux/"}],"tags":[{"name":"firewall","slug":"firewall","permalink":"https://www.zhuqiaolun.com/tags/firewall/"}]},{"title":"CentOS7服务器安装MySQL 8.0.25","slug":"2021/06/1624440649011/1624440649011","date":"2021-06-23T09:30:49.000Z","updated":"2021-06-24T07:49:44.907Z","comments":false,"path":"2021/06/1624440649011/1624440649011/","link":"","permalink":"https://www.zhuqiaolun.com/2021/06/1624440649011/1624440649011/","excerpt":"CentOS7服务器安装MySQL 8.0.25","text":"安装依赖1yum -y install wget lrzsz xz vim* libaio-devel.x86_64 numactl MySQL地址https://dev.mysql.com/downloads/mysql/ 鼠标右键复制链接地址 下载安装包通过wget方式获取安装包 123mkdir /usr/local/mysqlcd /usr/local/mysqlwget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.25-linux-glibc2.12-x86_64.tar.xz 解压安装包123cd /usr/local/mysqlxz -d mysql-8.0.25-linux-glibc2.12-x86_64.tar.xztar -xf mysql-8.0.25-linux-glibc2.12-x86_64.tar 重命名1mv mysql-8.0.25-linux-glibc2.12-x86_64 mysql-8.0.25 创建data目录1mkdir /usr/local/mysql/mysql-8.0.25/data 创建用户组以及用户和密码以及授权123groupadd mysqluseradd -g mysql mysqlchown -R mysql.mysql /usr/local/mysql 初始化基础信息12cd /usr/local/mysql/mysql-8.0.25/bin/./mysqld --user=mysql --basedir=/usr/local/mysql/mysql-8.0.25 --datadir=/usr/local/mysql/mysql-8.0.25/data/ --initialize 得到临时密码 编辑my.cnf文件1vim /etc/my.cnf 内容： 123456789101112131415161718192021[client]default-character-set=utf8[mysqld]port=3306basedir=/usr/local/mysql/mysql-8.0.25datadir=/usr/local/mysql/mysql-8.0.25/datasocket=/tmp/mysql.sockcharacter-set-server=utf8symbolic-links=0#bind-address = 127.0.0.1bind-address = 0.0.0.0[mysqld_safe]#log-error=/var/log/mariadb/mariadb.log#pid-file=/var/run/mariadb/mariadb.pid## include all files from the config directory#!includedir /etc/my.cnf.d 添加mysql服务到系统1cp -a /usr/local/mysql/mysql-8.0.25/support-files/mysql.server /etc/init.d/mysql 授权以及添加服务12chmod +x /etc/init.d/mysqlchkconfig --add mysql 查看启动状态1service mysql status 显示： SUCCESS! MySQL running (16356) 启动mysql1service mysql start 显示： Starting MySQL…. SUCCESS! 停止mysql1service mysql stop 将mysql命令添加到服务1ln -s /usr/local/mysql/mysql-8.0.25/bin/mysql /usr/bin 重启mysql1service mysql restart 登录mysql1mysql -uroot -p 修改root密码123456是新的密码 12345ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';eg:ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';flush privileges; 修改远程连接并生效123use mysql;update user set host='%' where user='root';flush privileges; 开通3306端口12firewall-cmd --zone=public --add-port=3306/tcp --permanentfirewall-cmd --reload 客户端连接 防火墙 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://www.zhuqiaolun.com/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://www.zhuqiaolun.com/tags/MySQL/"}]},{"title":"CentOS7服务器指令","slug":"2021/06/1624439801367/1624439801367","date":"2021-06-23T09:16:41.000Z","updated":"2021-06-24T07:38:30.901Z","comments":false,"path":"2021/06/1624439801367/1624439801367/","link":"","permalink":"https://www.zhuqiaolun.com/2021/06/1624439801367/1624439801367/","excerpt":"CentOS7服务器指令","text":"查看当前Linux系统版本1lsb_release -a 更新yum源1curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 更新所有软件 列出所有可更新的软件清单命令yum check-update 更新所有软件命令yum update 清除缓存命令 清除缓存目录下的软件包yum clean packages 清除缓存目录下的 headersyum clean headers 清除缓存目录下旧的 headersyum clean oldheaders 清除缓存目录下的软件包及旧的headersyum cleanyum clean all 下载文件：wget1234yum -y install wgeteg:下载Tomcat：wget https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.27/bin/apache-tomcat-9.0.27.tar.gz 文件传输：lrzsz12345yum -y install lrzszeg:从服务端发送文件到客户端：sz filename从客户端上传文件到服务端：rz 解压文件：xz1234567yum -y install xz eg：将xz文件解压为tar文件：xz -d example.tar.xz将tar文件解压：tar xf example.tar如果无法安装xz命令，先安装epel源：yum -y install epel-release 编辑器：vim1yum -y install vim* 查看网络信息：netstat1yum -y install net-tools 防火墙 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Linux","slug":"Linux","permalink":"https://www.zhuqiaolun.com/categories/Linux/"}],"tags":[{"name":"command","slug":"command","permalink":"https://www.zhuqiaolun.com/tags/command/"}]},{"title":"Nginx部署Vue项目，添加前缀访问","slug":"2021/05/1620908327003/1620908327003","date":"2021-05-13T12:18:46.000Z","updated":"2021-05-13T12:32:59.899Z","comments":false,"path":"2021/05/1620908327003/1620908327003/","link":"","permalink":"https://www.zhuqiaolun.com/2021/05/1620908327003/1620908327003/","excerpt":"Nginx部署Vue项目，添加前缀访问","text":"首先准备1个vue项目 hello/dist/ - index.html 配置根据路径访问123456789101112location / { root html; try_files $uri $uri/ /index.html; index index.html index.htm;}location /hello { # vue项目的打包后的dist alias D:/demon/hello/dist/; try_files $uri $uri/ /hello/index.html; index index.html index.htm;} 访问 http://127.0.0.1/hello document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://www.zhuqiaolun.com/tags/Vue/"}]},{"title":"Go-FastDfs 安装配置","slug":"2021/05/1620815885110/1620815885110","date":"2021-05-12T10:38:05.000Z","updated":"2021-11-27T18:04:09.649Z","comments":false,"path":"2021/05/1620815885110/1620815885110/","link":"","permalink":"https://www.zhuqiaolun.com/2021/05/1620815885110/1620815885110/","excerpt":"Go-FastDfs","text":"简介项目地址：https://github.com/sjqzhang/go-fastdfs 编译版本下载地址：https://github.com/sjqzhang/go-fastdfs/releases 中文Wiki地址：https://github.com/sjqzhang/go-fastdfs/blob/master/README.md gitee：https://gitee.com/sjqzhang/go-fastdfs 文档：https://sjqzhang.github.io/go-fastdfs/install.html linuxmkdir fastdfs &amp;&amp; cd fastdfs wget --no-check-certificate https://github.com/sjqzhang/go-fastdfs/releases/download/v1.4.1/fileserver chmod +x fileserver ./fileserverwindow下载时要注意链接的版本号，windows下直接运行 fileserver.exe运行完成后生成以下目录文件 12345conf -- 配置data -- 数据files -- 文件log -- 日志static -- 静态页面 访问：localhost:8080 出现以下界面则运行成功 配置配置文件在运行时自动生成，IP自动获取，端口默认8080；后面可根据需要自行修改端口配置；配置文件去重算法为sha1，防止上传同一个文件导致为覆盖操作；配置默认下载为false时，则可在返回的参数path后添加?download=0时在浏览器预览，path?download=1时在浏览器下载； json12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576{ \"绑定端号\": \"端口\", \"addr\": \":18080\", \"是否开启https\": \"默认不开启，如需启开启，请在conf目录中增加证书文件 server.crt 私钥 文件 server.key\", \"enable_https\": false, \"PeerID\": \"集群内唯一,请使用0-9的单字符，默认自动生成\", \"peer_id\": \"5\", \"本主机地址\": \"本机http地址,默认自动生成(注意端口必须与addr中的端口一致），必段为内网，自动生成不为内网请自行修改，下同\", \"host\": \"http://127.0.0.1:18080\", \"集群\": \"集群列表,注意为了高可用，IP必须不能是同一个,同一不会自动备份，且不能为127.0.0.1,且必须为内网IP，默认自动生成\", \"peers\": [\"http://127.0.0.1:18080\"], \"组号\": \"用于区别不同的集群(上传或下载)与support_group_manage配合使用,带在下载路径中\", \"group\": \"group1\", \"是否支持按组（集群）管理,主要用途是Nginx支持多集群\": \"默认支持,不支持时路径为http://10.1.5.4:8080/action,支持时为http://10.1.5.4:8080/group(配置中的group参数)/action,action为动作名，如status,delete,sync等\", \"support_group_manage\": true, \"是否合并小文件\": \"默认不合并,合并可以解决inode不够用的情况（当前对于小于1M文件）进行合并\", \"enable_merge_small_file\": false, \"允许后缀名\": \"允许可以上传的文件后缀名，如jpg,jpeg,png等。留空允许所有。\", \"extensions\": [], \"重试同步失败文件的时间\": \"单位秒\", \"refresh_interval\": 1800, \"是否自动重命名\": \"默认不自动重命名,使用原文件名\", \"rename_file\": false, \"是否支持web上传,方便调试\": \"默认支持web上传\", \"enable_web_upload\": true, \"是否支持非日期路径\": \"默认支持非日期路径,也即支持自定义路径,需要上传文件时指定path\", \"enable_custom_path\": true, \"下载域名\": \"用于外网下载文件的域名,不包含http://\", \"download_domain\": \"\", \"场景列表\": \"当设定后，用户指的场景必项在列表中，默认不做限制(注意：如果想开启场景认功能，格式如下：'场景名:googleauth_secret' 如 default:N7IET373HB2C5M6D \", \"scenes\": [], \"默认场景\": \"默认default\", \"default_scene\": \"default\", \"是否显示目录\": \"默认显示,方便调试用,上线时请关闭\", \"show_dir\": true, \"邮件配置\": \"\", \"mail\": { \"user\": \"abc@163.com\", \"password\": \"abc\", \"host\": \"smtp.163.com:25\" }, \"告警接收邮件列表\": \"接收人数组\", \"alarm_receivers\": [], \"告警接收URL\": \"方法post,参数:subject,message\", \"alarm_url\": \"\", \"下载是否需带token\": \"真假\", \"download_use_token\": false, \"下载token过期时间\": \"单位秒\", \"download_token_expire\": 600, \"是否自动修复\": \"在超过1亿文件时出现性能问题，取消此选项，请手动按天同步，请查看FAQ\", \"auto_repair\": true, \"文件去重算法md5可能存在冲突，默认md5\": \"sha1|md5\", \"file_sum_arithmetic\": \"sha1\", \"管理ip列表\": \"用于管理集的ip白名单,\", \"admin_ips\": [\"127.0.0.1\"], \"是否启用迁移\": \"默认不启用\", \"enable_migrate\": false, \"文件是否去重\": \"默认去重\", \"enable_distinct_file\": true, \"是否开启跨站访问\": \"默认开启\", \"enable_cross_origin\": true, \"是否开启Google认证，实现安全的上传、下载\": \"默认不开启\", \"enable_google_auth\": false, \"认证url\": \"当url不为空时生效,注意:普通上传中使用http参数 auth_token 作为认证参数, 在断点续传中通过HTTP头Upload-Metadata中的auth_token作为认证参数,认证流程参考认证架构图\", \"auth_url\": \"\", \"下载是否认证\": \"默认不认证(注意此选项是在auth_url不为空的情况下生效)\", \"enable_download_auth\": false, \"默认是否下载\": \"默认下载\", \"default_download\": false, \"本机是否只读\": \"默认可读可写\", \"read_only\": false, \"是否开启断点续传\": \"默认开启\", \"enable_tus\": true, \"同步单一文件超时时间（单位秒）\": \"默认为0,程序自动计算，在特殊情况下，自已设定\", \"sync_timeout\": 0} 传送门 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Go-FastDfs","slug":"Go-FastDfs","permalink":"https://www.zhuqiaolun.com/categories/Go-FastDfs/"}],"tags":[{"name":"Go-FastDfs","slug":"Go-FastDfs","permalink":"https://www.zhuqiaolun.com/tags/Go-FastDfs/"}]},{"title":"使用NSSM把exe可执行文件注册为Windows服务,开机启动&后台运行","slug":"2021/05/1620813081711/1620813081711","date":"2021-05-12T09:51:21.000Z","updated":"2021-05-12T10:34:03.959Z","comments":false,"path":"2021/05/1620813081711/1620813081711/","link":"","permalink":"https://www.zhuqiaolun.com/2021/05/1620813081711/1620813081711/","excerpt":"使用NSSM把exe可执行文件注册为Windows服务,开机启动&amp;后台运行","text":"简介NSSM是一款可将exe注册为Windows系统服务的工具。当你的exe程序需要部署在Windows Server上时，NSSM是一个不错的选择。注册为服务后，启动、停止、重启皆由windows来管理，所以不必担心exe因意外的停止，而Windows的服务管理即可处理这些问题。 使用官网下载页面; 版本：2.24 根据自己的平台，将32/64位nssm.exe文件解压至任意文件夹 以管理员身份运行CMD定位至nssm.exe所在目录 输入 nssm install {服务名称}，即注册服务的名称。注册服务弹出如下NSSM界面 以安装Redis为例 查询服务状态 E:\\nssm-2.24-101\\win64&gt;nssm.exe status Redis SERVICE_STOPPEDnssm常用命令： 创建服务：nssm install servername 启动服务：nssm start servername 暂停服务：nssm stop servername 重启服务：nssm restart servername 删除服务：nssm remove servername 更多命令查看 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"工具","slug":"工具","permalink":"https://www.zhuqiaolun.com/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"exe","slug":"exe","permalink":"https://www.zhuqiaolun.com/tags/exe/"}]},{"title":"MyBatis-Plus的集成配置","slug":"2021/04/1617878968965/1617878968965","date":"2021-04-08T10:49:28.000Z","updated":"2021-07-02T02:46:09.020Z","comments":false,"path":"2021/04/1617878968965/1617878968965/","link":"","permalink":"https://www.zhuqiaolun.com/2021/04/1617878968965/1617878968965/","excerpt":"MyBatis-Plus的yml配置","text":"依赖添加依赖 1234567891011121314151617181920&lt;!-- 连接数据库 start --&gt;&lt;!-- 数据库 连接 、事务--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;version&gt;2.4.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- 数据库 mybatis--&gt;&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.3.2&lt;/version&gt;&lt;/dependency&gt;&lt;!-- 数据库 mysql--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.25&lt;/version&gt;&lt;/dependency&gt;&lt;!-- 连接数据库 end --&gt; 配置配置bean使用插件 123456789101112131415161718192021222324252627282930313233343536373839404142import com.baomidou.mybatisplus.annotation.DbType;import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.transaction.annotation.EnableTransactionManagement;/** * @className: MybatisPlusConfig.java * @description: MyBatis-Plus的插件配置 * @author: Demon * @date 2020/8/25 11:24 */@Configuration@EnableTransactionManagementpublic class MybatisPlusConfig { /** * 分页插件 * paginationInterceptor.setLimit(你的最大单页限制数量，默认 500 条，小于 0 如 -1 不受限制); */ @Bean public PaginationInterceptor paginationInterceptor() { PaginationInterceptor paginationInterceptor = new PaginationInterceptor(); // 设置请求的页面大于最大页后操作， true调回到首页，false 继续请求 默认false paginationInterceptor.setOverflow(false); // 设置最大单页限制数量，默认 500 条，-1 不受限制 paginationInterceptor.setLimit(-1); // 设置数据库需要根据mp版本使用set方法,以下为3.3.2 paginationInterceptor.setDbType(DbType.MYSQL); // 设置数据库需要根据mp版本使用set方法,以下为3.2.0 paginationInterceptor.setDialectType(DbType.MYSQL.getDb()); return paginationInterceptor; } } 添加事务在实现类的 增删改方法内添加 1@Transactional(propagation = Propagation.NESTED, rollbackFor = Exception.class) PROPAGATION_NESTED： 如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。 PROPAGATION_REQUIRED： 支持当前事务，如果当前没有事务，就新建一个事务。 yml配置123456789101112131415161718192021222324252627282930313233343536373839404142434445464748spring: # 数据库连接 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/demo?useUnicode=true&amp;characterEncoding=utf8&amp;characterSetResults=utf8&amp;allowMultiQueries=true&amp;autoReconnect=true&amp;useSSL=false&amp;serverTimezone=UTC&amp;zeroDateTimeBehavior=convertToNull username: root password: root # Spring Boot 2.0及以上版本 默认选择，不需要配置 type: com.zaxxer.hikari.HikariDataSource hikari: # 客户端等待连接池连接的最大毫秒数 connection-timeout: 20000 # 连接池中维护的最小空闲连接数 minimum-idle: 5 # 配置最大池大小 maximum-pool-size: 12 # 允许连接在连接池中空闲的最长时间（以毫秒为单位） idle-timeout: 300000 # 池中连接关闭后的最长生命周期（以毫秒为单位） max-lifetime: 1200000 # 从池返回的连接的默认自动提交行为。默认值为true。 auto-commit: true# mybatis-plus配置mybatis-plus: # MyBatis 配置文件 configuration: # 映射器启用缓存 cache-enabled: false # 查询时，关闭关联对象即时加载以提高性能 lazy-loading-enabled: false # 不允许使用自定义的主键值(比如由程序生成的UUID 32位编码作为键值), 数据表的PK生成策略将被覆盖 use-generated-keys: false # 对于批量更新操作缓存SQL以提高性能 SIMPLE, REUSE, BATCH default-executor-type: reuse # 对于未知的SQL查询，允许返回不同的结果集以达到通用的效果 multiple-result-sets-enabled: true # 允许使用列标签代替列名 use-column-label: true # 解决mybatis空字段null字段不返回 call-setters-on-nulls: true # 给予被嵌套的resultMap以字段-属性的映射支持 NONE, FULL,PARTIAL auto-mapping-behavior: partial log-impl: org.apache.ibatis.logging.stdout.StdOutImpl # 启动时是否检查 MyBatis XML 文件的存在，默认不检查。 check-config-location: false # mapper.xml所在位置 mapper-locations: classpath*:/mapper/*Mapper.xml document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"WebService服务端开发 - SpringBoot","slug":"2021/03/1617086122645/1617086122645","date":"2021-03-30T06:35:22.000Z","updated":"2021-05-13T05:43:49.863Z","comments":false,"path":"2021/03/1617086122645/1617086122645/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1617086122645/1617086122645/","excerpt":"WebService服务端开发 - SpringBoot","text":"依赖12345&lt;dependency&gt; &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt; &lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt; &lt;version&gt;3.2.4&lt;/version&gt;&lt;/dependency&gt; yml配置1234567891011server: port: 8069 servlet: context-path: /spring-boot-webservice-servicespring: application: name: spring-boot-webservice-service# 发布服务名称：http://localhost:8069/spring-boot-webservice-service/wscxf: path: /ws 创建接口在创建接口时请将实现类与之放在同一级目录下，这样在endpointInterface时容易找到 ExampleService： 123456789101112131415161718192021222324252627import javax.jws.WebMethod;import javax.jws.WebParam;import javax.jws.WebResult;import javax.jws.WebService;/** * @ClassName: exampleService * @Description: ExampleService接口 * @Author: Demon */@WebService(name = \"ExampleService\")public interface ExampleService { @WebMethod @WebResult String getTime(); /** * sayHello * @param userName 用户名 * @return 返回 */ @WebMethod @WebResult String sayHello(@WebParam(name = \"userName\") String userName);} ExampleServiceImpl： 1234567891011121314151617181920212223242526272829303132333435import org.dom4j.Document;import org.dom4j.DocumentHelper;import org.dom4j.Element;import org.springframework.stereotype.Component;import javax.jws.WebService;/** * @ClassName: ExampleController * @Description: * @Author: Demon * serviceName:【对外发布的服务名 】：需要见名知意 * targetNamespace:【名称空间】：【实现类包名的反缀】 * endpointInterface :【服务接口全路径】 【接口的包名】 */@Component@WebService( serviceName = \"ExampleService\", targetNamespace=\"http://example.webservice.springbootwebservice.demon.com/\", endpointInterface = \"com.demon.springbootwebservice.webservice.example.ExampleService\")public class ExampleServiceImpl implements ExampleService { @Override public String getTime() { return String.valueOf(System.currentTimeMillis()); } @Override public String sayHello(String userName) { System.out.println(\"=======================&gt;\"+userName); return userName; }} WebServiceConfig配置类12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import org.apache.cxf.Bus;import org.apache.cxf.bus.spring.SpringBus;import org.apache.cxf.jaxws.EndpointImpl;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import javax.xml.ws.Endpoint;/** * @ClassName: WebServiceConfig * @Description: 配置类 * @Author: Demon */@Configurationpublic class WebServiceConfig { @Bean(name = Bus.DEFAULT_BUS_ID) public SpringBus springBus() { return new SpringBus(); } /** * ExampleService --- sayHello * @return 返回 */ @Bean public Endpoint exampleServiceBean() { // 绑定要发布的服务实现类 EndpointImpl endpoint = new EndpointImpl(springBus(), new ExampleServiceImpl()); // 接口访问地址 endpoint.publish(\"/exampleService\"); return endpoint; } /** * TestService --- getTest * @return 返回 */ @Bean public Endpoint testServiceBean() { // 绑定要发布的服务实现类 EndpointImpl endpoint = new EndpointImpl(springBus(), new TestServiceImpl()); // 接口访问地址 endpoint.publish(\"/testService\"); return endpoint; }} 访问结果访问路径：http://localhost:8069/spring-boot-webservice-service/ws 客户端请求 axis客户端请求 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"WebService","slug":"WebService","permalink":"https://www.zhuqiaolun.com/categories/WebService/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/tags/SpringBoot/"}]},{"title":"WebService客户端请求","slug":"2021/03/1617084469964/1617084469964","date":"2021-03-30T06:07:49.000Z","updated":"2021-05-13T05:44:31.204Z","comments":false,"path":"2021/03/1617084469964/1617084469964/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1617084469964/1617084469964/","excerpt":"WebService客户端请求","text":"本文采用 axis的调用方式 官网 依赖12345678910111213141516171819202122232425262728293031323334353637&lt;!-- axis webService client start --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.axis&lt;/groupId&gt; &lt;artifactId&gt;axis&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.axis&lt;/groupId&gt; &lt;artifactId&gt;axis-jaxrpc&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.axis&lt;/groupId&gt; &lt;artifactId&gt;axis-saaj&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;wsdl4j&lt;/groupId&gt; &lt;artifactId&gt;wsdl4j&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;commons-discovery&lt;/groupId&gt; &lt;artifactId&gt;commons-discovery&lt;/artifactId&gt; &lt;version&gt;0.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.activation&lt;/groupId&gt; &lt;artifactId&gt;activation&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.mail&lt;/groupId&gt; &lt;artifactId&gt;mail&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;!-- axis webService client end --&gt; 客户端12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970import org.apache.axis.client.Call;import org.apache.axis.client.Service;import org.apache.axis.encoding.XMLType;import javax.xml.namespace.QName;import javax.xml.rpc.ParameterMode;import javax.xml.rpc.ServiceException;import java.net.MalformedURLException;import java.net.URL;import java.rmi.RemoteException;import java.util.ArrayList;import java.util.LinkedHashMap;import java.util.List;import java.util.Map;/** * @ClassName: WebServiceClient * @Description: 客户端封装 * @Author: Demon */public class WebServiceClient { /** * 无参数请求 * @param wsdlUrl wsdl * @param targetNamespace 命名空间 * @param methodName 方法名 * @return 返回值 * @throws ServiceException 异常 * @throws MalformedURLException 异常 * @throws RemoteException 异常 */ public static String execute(String wsdlUrl, String targetNamespace, String methodName) throws ServiceException, MalformedURLException, RemoteException { Map&lt;String, String&gt; params = new LinkedHashMap&lt;&gt;(0); return execute(wsdlUrl, targetNamespace, methodName, params); } /** * 有参数请求 * @param wsdlUrl wsdl * @param targetNamespace 命名空间 * @param methodName 方法名 * @param params 参数 key-参数名，value-参数值 * @return 返回 * @throws ServiceException 异常 * @throws MalformedURLException 异常 * @throws RemoteException 异常 */ public static String execute(String wsdlUrl, String targetNamespace, String methodName, Map&lt;String, String&gt; params) throws ServiceException, MalformedURLException, RemoteException { Service service = new Service(); Call call = (Call) service.createCall(); call.setUseSOAPAction(true); //设置返回值 call.setReturnType(XMLType.SOAP_STRING); // wsdl路径 call.setTargetEndpointAddress(new URL(wsdlUrl)); //第一个参数： targetNamespace，第二个参数 方法名 call.setOperationName(new QName(targetNamespace, methodName)); //参数，多个则多次add List&lt;String&gt; values = new ArrayList&lt;&gt;(params.size()); for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) { call.addParameter(entry.getKey(), XMLType.SOAP_STRING, ParameterMode.IN); values.add(entry.getValue()); } //传入参数并执行 return String.valueOf(call.invoke(values.toArray())); }} 使用12345678910111213141516171819202122232425262728293031323334353637import org.junit.jupiter.api.Test;import java.util.LinkedHashMap;import java.util.Map;class WebServiceClientTests { @Test void getTime() { try { String wsdlUrl = \"http://localhost:8090/spring-boot-webservice-service/cxf/exampleService?wsdl\"; String targetNamespace = \"http://example.webservice.springbootwebservice.demon.com/\"; String methodName = \"getTime\"; String result = WebServiceClient.execute(wsdlUrl, targetNamespace, methodName); System.out.println(result); } catch (Exception e) { e.printStackTrace(); } } @Test void sayHello() { try { String wsdlUrl = \"http://localhost:8090/spring-boot-webservice-service/cxf/exampleService?wsdl\"; String targetNamespace = \"http://example.webservice.sms.demon.com/\"; String methodName = \"sayHello\"; Map&lt;String, String&gt; paramNames = new LinkedHashMap&lt;&gt;(); paramNames.put(\"userName\", \"demon\"); String result = WebServiceClient.execute(wsdlUrl, targetNamespace, methodName, paramNames); System.out.println(result); } catch (Exception e) { e.printStackTrace(); } }} 服务端开发服务端开发 - SpringBoot document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"WebService","slug":"WebService","permalink":"https://www.zhuqiaolun.com/categories/WebService/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"集合操作 - List，Set，Map","slug":"2021/03/1617003286483/1617003286483","date":"2021-03-29T07:34:46.000Z","updated":"2022-02-14T07:32:28.601Z","comments":false,"path":"2021/03/1617003286483/1617003286483/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1617003286483/1617003286483/","excerpt":"集合之间的操作","text":"集合概述Java中的集合类：是一种工具类，就像是容器，储存任意数量的具有共同属性的对象。 集合框架被设计成要满足以下几个目标： 该框架必须是高性能的。基本集合（动态数组，链表，树，哈希表）的实现也必须是高效的。 该框架允许不同类型的集合，以类似的方式工作，具有高度的互操作性。 对一个集合的扩展和适应必须是简单的。 为此，整个集合框架就围绕一组标准接口而设计。可以直接使用这些接口的标准实现，诸如： LinkedList, HashSet, 和 TreeSet 等,除此之外你也可以通过这些接口实现自己的集合。 集合结构图 集合使用 List &amp; SetList接口继承了Collection接口，并对父接口进行了简单的扩充。常用的实现类有：ArrayList、LinkedList和Vector。Set接口一个不包括重复元素（包括可变对象）的Collection，是一种无序的集合。常用的实现类有：HashSet、TreeSet等。 12345678910111213List&lt;String&gt; list=new ArrayList&lt;String&gt;(); list.add(\"Hello\"); list.add(\"World\"); //推荐的通用方法for (String str : list) { System.out.println(str); } //多线程并行执行list.parallelStream().forEach(System.out::println);Set 同理 MapMap是一个键值对的集合。一个映射不能包含重复的键，每个键最多映射到一个值。常用的实现类有：HashMap、TreeMap、Properties。 1234567891011121314151617181920212223242526272829Map&lt;String, String&gt; map = new HashMap&lt;&gt;();map.put(\"hello\",\"Hello\");map.put(\"world\",\"World\");System.out.println(map.size());// 第一种：map.keySet()返回的是所有key的值System.out.println(\"第一种：通过Map.keySet遍历key和value：\");for (String in : map.keySet()) { String str = map.get(in);//得到每个key多对用value的值 System.out.println(in + \" \" + str);}// 第二种：System.out.println(\"第二种：通过Map.entrySet使用iterator遍历key和value：\");for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) { System.out.println(\"key= \" + entry.getKey() + \" and value= \" + entry.getValue());}// 第三种：推荐，尤其是容量大时System.out.println(\"第三种：通过Map.entrySet遍历key和value\");for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) { System.out.println(\"key= \" + entry.getKey() + \" and value= \"+ entry.getValue());}// 第四种：System.out.println(\"第四种：通过Map.values()遍历所有的value，但不能遍历key\");for (String v : map.values()) { System.out.println(\"value= \" + v);} 集合转化 数组转List需要注意的是， Arrays.asList() 返回一个受指定数组决定的固定大小的列表。所以不能做 add 、 remove 等操作，否则会报错。 123String[] strArr = new String[]{\"Hello\", \"World\", \"Java\"};List strList = Arrays.asList(strArr);System.out.println(strList); //[Hello, World, Java] 数组转Set 12Set&lt;String&gt; strSet = new HashSet&lt;&gt;(Arrays.asList(strArr));System.out.println(strSet); //[Hello, World, Java] List转数组 12Object[] strArr = strList.toArray();System.out.println(Arrays.toString(strArr)); //[Hello, World, Java] List转Set 1234Set&lt;String&gt; strSet = new HashSet&lt;String&gt;(strList);System.out.println(strSet);结果：[Java, Hello, World] 扩展java8的stream（流）：排序，统计，过滤，映射，分组，拼接，分区，总和，平均值，最小值 使用Arrays 中的 stream() 方法，将数组转成流 12Integer[] nums = new Integer[10];Stream&lt;Integer&gt; stream = Arrays.stream(nums); 使用 BufferedReader.lines() 方法，将每行内容转成流 123BufferedReader reader = new BufferedReader(new FileReader(\"d:\\\\test.txt\"));Stream&lt;String&gt; lineStream = reader.lines();lineStream.forEach(System.out::println); 使用 Pattern.splitAsStream() 方法，将字符串分隔成流 123Pattern pattern = Pattern.compile(\",\");Stream&lt;String&gt; stringStream = pattern.splitAsStream(\"a,b,c,d,e\");stringStream.forEach(System.out::println); 以下为第三方工具使用 12345&lt;dependency&gt; &lt;groupId&gt;com.google.guava&lt;/groupId&gt; &lt;artifactId&gt;guava&lt;/artifactId&gt; &lt;version&gt;30.0-jre&lt;/version&gt;&lt;/dependency&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"MyBatis返回多个结果集","slug":"2021/03/1615802317183/1615802317183","date":"2021-03-15T09:58:37.000Z","updated":"2021-03-15T10:58:55.582Z","comments":false,"path":"2021/03/1615802317183/1615802317183/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615802317183/1615802317183/","excerpt":"MyBatis返回多个结果集","text":"MyBatis在查询时可以将单一的结果集并列查询组成多结果集；如：多重List&lt;Map&lt;String,Object&gt;&gt;格式，Object可再次为 List&lt;Map&lt;String,Object&gt;&gt;结构 12345678910111213141516[ { \"userName\": \"张三\", \"userCode\": \"RBXLWCzGcqDncROd90Jd\", \"userRole\": [ { \"roleCode\": \"test1\", \"userCode\": \"RBXLWCzGcqDncROd90Jd\" }, { \"roleCode\": \"test2\", \"userCode\": \"RBXLWCzGcqDncROd90Jd\" } ] }] 使用xxMapper.xml：xml中以userCode为连接，collection的property属性值为二级key 1234567891011121314151617181920212223242526272829303132333435&lt;resultMap id=\"testResultMap\" type=\"java.util.Map\"&gt; &lt;id property=\"userCode\" column=\"user_Code\" /&gt; &lt;result property=\"userName\" column=\"user_Name\" /&gt; &lt;result property=\"userRemark\" column=\"user_Remark\" /&gt; &lt;collection property=\"userRole\" javaType=\"list\" ofType=\"map\"&gt; &lt;id property=\"roleCode\" column=\"role_Code\" /&gt; &lt;result property=\"userCode\" column=\"user_Code\" /&gt; &lt;result property=\"roleName\" column=\"role_Name\" /&gt; &lt;result property=\"roleRemark\" column=\"role_Remark\" /&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=\"selectTestListResultMap\" parameterType=\"map\" resultMap=\"testResultMap\"&gt; SELECT test_user.user_Code, test_user.user_Name, test_user.user_Remark, test_role.role_Code, test_role.role_Name, test_role.role_Remark, test_role.user_Code FROM test_user LEFT JOIN test_role ON test_role.user_Code = test_user.user_Code WHERE test_user.user_Code IN ( SELECT test_role.user_Code FROM test_role WHERE test_role.user_Code = test_user.user_Code GROUP BY test_role.user_Code )&lt;/select&gt; xxMapper.java： 123456/** * 查询列表信息 * @param params 参数 * @return 返回 */List&lt;Map&lt;String, Object&gt;&gt; selectTestListResultMap(@Param(\"params\") Map&lt;String, Object&gt; params); 结果集： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465[ { \"userRemark\": \"备注用户\", \"userName\": \"张三\", \"userRole\": [ { \"roleRemark\": \"备注权限\", \"roleCode\": \"test1\", \"roleName\": \"a\", \"userCode\": \"RBXLWCzGcqDncROd90Jd\" }, { \"roleRemark\": \"备注权限\", \"roleCode\": \"test2\", \"roleName\": \"b\", \"userCode\": \"RBXLWCzGcqDncROd90Jd\" } ], \"userCode\": \"RBXLWCzGcqDncROd90Jd\" }, { \"userRemark\": \"备注用户\", \"userName\": \"李四\", \"userRole\": [ { \"roleRemark\": \"备注权限\", \"roleCode\": \"test3\", \"roleName\": \"c\", \"userCode\": \"TALKA0I56vYUp2cVaczZ\" }, { \"roleRemark\": \"备注权限\", \"roleCode\": \"test4\", \"roleName\": \"d\", \"userCode\": \"TALKA0I56vYUp2cVaczZ\" }, { \"roleRemark\": \"备注权限\", \"roleCode\": \"test5\", \"roleName\": \"e\", \"userCode\": \"TALKA0I56vYUp2cVaczZ\" } ], \"userCode\": \"TALKA0I56vYUp2cVaczZ\" }, { \"userRemark\": \"备注用户\", \"userName\": \"王五\", \"userRole\": [ { \"roleRemark\": \"备注权限\", \"roleCode\": \"test6\", \"roleName\": \"f\", \"userCode\": \"EMbvTsuedRjItaD0aZzq\" }, { \"roleRemark\": \"备注权限\", \"roleCode\": \"test7\", \"roleName\": \"g\", \"userCode\": \"EMbvTsuedRjItaD0aZzq\" } ], \"userCode\": \"EMbvTsuedRjItaD0aZzq\" }] 表： 12345678910111213141516171819202122232425262728293031323334353637383940414243-- ------------------------------ Table structure for test_role-- ----------------------------DROP TABLE IF EXISTS `test_role`;CREATE TABLE `test_role` ( `tr_PKeyId` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键ID', `role_Code` varchar(32) DEFAULT NULL COMMENT '角色代码', `role_Name` varchar(32) DEFAULT NULL COMMENT '角色名称', `user_Code` varchar(32) DEFAULT NULL COMMENT '用户代码', `role_Remark` varchar(100) DEFAULT NULL COMMENT '备注', PRIMARY KEY (`tr_PKeyId`)) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8 COMMENT='角色表';-- ------------------------------ Records of test_role-- ----------------------------INSERT INTO `test_role` VALUES ('16', 'test1', 'a', 'RBXLWCzGcqDncROd90Jd', '备注权限');INSERT INTO `test_role` VALUES ('19', 'test2', 'b', 'RBXLWCzGcqDncROd90Jd', '备注权限');INSERT INTO `test_role` VALUES ('20', 'test3', 'c', 'TALKA0I56vYUp2cVaczZ', '备注权限');INSERT INTO `test_role` VALUES ('21', 'test4', 'd', 'TALKA0I56vYUp2cVaczZ', '备注权限');INSERT INTO `test_role` VALUES ('22', 'test5', 'e', 'TALKA0I56vYUp2cVaczZ', '备注权限');INSERT INTO `test_role` VALUES ('23', 'test6', 'f', 'EMbvTsuedRjItaD0aZzq', '备注权限');INSERT INTO `test_role` VALUES ('24', 'test7', 'g', 'EMbvTsuedRjItaD0aZzq', '备注权限');-- ------------------------------ Table structure for test_user-- ----------------------------DROP TABLE IF EXISTS `test_user`;CREATE TABLE `test_user` ( `tu_PKeyId` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键ID', `user_Name` varchar(32) DEFAULT NULL COMMENT '用户名称', `user_Code` varchar(32) DEFAULT NULL COMMENT '用户代码', `user_Remark` varchar(100) DEFAULT NULL COMMENT '备注', PRIMARY KEY (`tu_PKeyId`)) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COMMENT='用户表';-- ------------------------------ Records of test_user-- ----------------------------INSERT INTO `test_user` VALUES ('10', '张三', 'RBXLWCzGcqDncROd90Jd', '备注用户');INSERT INTO `test_user` VALUES ('11', '李四', 'TALKA0I56vYUp2cVaczZ', '备注用户');INSERT INTO `test_user` VALUES ('12', '王五', 'EMbvTsuedRjItaD0aZzq', '备注用户');INSERT INTO `test_user` VALUES ('13', '赵六', 'GosZVJuSCA70TmeRnBJO', '备注用户'); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"hexo博客的一些内置写法","slug":"2021/03/1615800535123/1615800535123","date":"2021-03-15T09:28:55.000Z","updated":"2021-07-21T03:04:58.150Z","comments":false,"path":"2021/03/1615800535123/1615800535123/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615800535123/1615800535123/","excerpt":"hello","text":"跳转到本文锚点一跳转到本文锚点二 在hexo中发表文章时需要相互引用，以下为一些内置写法，有些需要先安装modiles 1.引用内部图片 123456789在根目录下执行如下命令 npm install hexo-asset-image 此时再执行命令 hexo new article_name 创建新的文章，在 source/_posts 中会生成文章 post_name.md 和同名文件夹 post_name,我们将文章中所使用到的将图片资源均放在 post_name 中，这时就可以在文章中使用相对路径引用图片资源了![img_name](img_name.jpg) #文章中的图片资源路径格式如：![20210315171503](1615799438937/20210315171503.png) 2.引用内部链接 12[标题]({% post_path %}/访问路径)如：[标题]({% post_path %}/2021/03/1615800535123/1615800535123/) 3.描点 1234567891011121314151617hexo markdown 文章里面如果使用 ## 文章二级标题 生成标题，标题会自动生成 id=\"文章二级标题\"。如果标题中间有 半角空格 或者 全角空格 ，空格都会变成连字符。如：一个半角空格 ## hello world 或 多个半角 ## hello world 或 多个全角空格 ## hello world 。其生成的 id 会变成 id=\"hello-world\"，多个空格会合并成一个连字符。当前文章锚点跳转:使用 markdown 内置的链接方式即可，其中如果有空格，需要把空格换成连字符 - ，如下：[跳转到本文锚点](#hexo-标题与-id-关系)例如：[跳转到本文锚点一](#描点-一)[跳转到本文锚点二](#描点-二)## 描点 一### 描点 二 4.折叠与收起 123456789101112131415details：折叠语法标签summary：折叠语法展示的摘要pre：以原有格式显示元素内的文字是已经格式化的文本code：指定代码范例blockcode：表示程序的代码块&lt;details&gt; &lt;summary&gt;点击时的区域标题1&lt;/summary&gt; &lt;pre&gt;&lt;code&gt; System.out.println( \"Hello, World!\" );&lt;/code&gt;&lt;/pre&gt;&lt;/details&gt;&lt;details&gt; &lt;summary&gt;点击时的区域标题2&lt;/summary&gt; 写```html也可&lt;/details&gt; 点击时的区域标题1 System.out.println( \"Hello, World!\" ); 点击时的区域标题2 1System.out.println( \"Hello, World!\" ); 描点 一描点 二 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Blog","slug":"Blog","permalink":"https://www.zhuqiaolun.com/categories/Blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://www.zhuqiaolun.com/tags/hexo/"}]},{"title":"对MyBatis-Plus3.x的分页插件配置使用","slug":"2021/03/1615799438937/1615799438937","date":"2021-03-15T09:10:38.000Z","updated":"2021-05-11T02:33:56.058Z","comments":false,"path":"2021/03/1615799438937/1615799438937/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615799438937/1615799438937/","excerpt":"MyBatis-Plus的插件配置使用","text":"配置使用前的 配置 MyBatis-Plus 是自带分页插件的Page，可用查询SQL并列使用 使用xxMapper.xml： 123&lt;select id=\"getList\" parameterType=\"map\" resultType=\"map\" &gt; SELECT * FROM system_user&lt;/select&gt; xxMapper.java： 1234567891011121314/** * 查询列表信息(分页) * @param page 分页标志 * @param params 参数 * @return 返回 */Page&lt;Map&lt;String, Object&gt;&gt; getList(IPage&lt;Map&lt;String, Object&gt;&gt; page, @Param(\"params\") Map&lt;String, Object&gt; params);/** * 查询列表信息 * @param params 参数 * @return 返回 */List&lt;Map&lt;String,Object&gt;&gt; getList(@Param(\"params\") Map&lt;String,Object&gt; params); xxService.java: 123456789101112131415/** * 查询列表信息(分页) * @param current 每页数 * @param size 当前页 * @param map 参数 * @return 返回 */Page&lt;Map&lt;String, Object&gt;&gt; getListPage(long current, long size, Map&lt;String, Object&gt; map);/** * 查询列表信息 * @param map 参数 * @return 返回 */List&lt;Map&lt;String,Object&gt;&gt; getList(Map&lt;String, Object&gt; map); xxServiceImpl.java: 12345678910@Overridepublic Page&lt;Map&lt;String, Object&gt;&gt; getListPage(long current, long size, Map&lt;String, Object&gt; map) { IPage&lt;Map&lt;String, Object&gt;&gt; page = new Page&lt;&gt;(current, size); return this.baseMapper.getList(page, map);}@Overridepublic List&lt;Map&lt;String,Object&gt;&gt; getList(Map&lt;String,Object&gt; map) { return this.baseMapper.getList(map);} xxController.java: 已分页查询123456long current = Long.parseLong(jsonParam.getString(\"current\"));long size = Long.parseLong(jsonParam.getString(\"size\"));Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();Page&lt;Map&lt;String, Object&gt;&gt; serviceListPage = systemService.getListPage(current,size,map);JSONObject jsonObject = ListUtil.getData(serviceListPage);System.out.println(jsonObject); 不分页查询123Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();List&lt;Map&lt;String, Object&gt;&gt; serviceList = systemService.getJobList(map);System.out.println(serviceList); ListUtil： 12345678910111213141516171819202122232425262728import com.alibaba.fastjson.JSONObject;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import java.util.Map;/** * @author: Demon * @description: 分页列表数据 */public class ListUtil { public static JSONObject getData(Page&lt;Map&lt;String, Object&gt;&gt; listPage) { JSONObject responseBean = new JSONObject(true); //当前页码 responseBean.put(\"current\", listPage.getCurrent()); //当前页条数 responseBean.put(\"size\", listPage.getSize()); //总共条数 responseBean.put(\"total\", listPage.getTotal()); //总共页数 responseBean.put(\"page\", listPage.getPages()); //当前页数据 responseBean.put(\"data\", listPage.getRecords()); //是否有上一页 responseBean.put(\"hasPrevious\", listPage.hasPrevious()); //是否有下一页 responseBean.put(\"hasNext\", listPage.hasNext()); return responseBean; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Java自定义异常 - EmptyException","slug":"2021/03/1615440974493/1615440974493","date":"2021-03-11T05:36:14.000Z","updated":"2021-11-06T09:25:06.513Z","comments":false,"path":"2021/03/1615440974493/1615440974493/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615440974493/1615440974493/","excerpt":"Java自定义异常","text":"作用：定义异常来生声明异常，保证程序可以准确捕获异常。 自定义异常继承类有3中：RuntimeException、Exception、Throwable一般会选择继承Exception和RuntimeException，如果调用者一定要处理抛出的异常且没有要求，就继承RuntimeException。 定义异常 12345678910111213141516171819202122/** * @author: Demon * @date 2021/3/5 14:44 * @description: 空异常 */public class EmptyException extends RuntimeException { private String code; public EmptyException(String code, String message) { super(message); this.code = code; } public String getCode() { return code; } public void setCode(String code) { this.code = code; }} 使用异常 1throw new EmptyException(\"40004\", \"参数不能为空\"); 捕获异常 12345678910try { System.out.println(\"业务处理···\");}catch (EmptyException e){ System.out.println(\"捕获自定义异常···\"); e.getCode(); e.getMessage();}catch (Exception e){ e.printStackTrace(); System.out.println(\"捕获抛出的异常···\");} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"删除没用的本地Jar - maven的错误引入","slug":"2021/03/1615374410736/1615374410736","date":"2021-03-10T11:06:50.000Z","updated":"2021-11-06T09:44:33.766Z","comments":false,"path":"2021/03/1615374410736/1615374410736/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615374410736/1615374410736/","excerpt":"删除没用的本地Jar","text":"有时候maven下载的jar不完整或者是错误，则此时需要删除多余的jar 引入依赖 12345&lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.6&lt;/version&gt;&lt;/dependency&gt; 完整代码 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import java.io.File;import java.io.IOException;import java.util.Collection;import org.apache.commons.io.FileUtils;import org.apache.commons.io.filefilter.DirectoryFileFilter;import org.apache.commons.io.filefilter.RegexFileFilter;import org.apache.commons.io.filefilter.TrueFileFilter;public class 删除没用的Jar { public static void main(String[] args) { System.out.println(\"执行开始···\"); String filePath = \"D:\\\\apache\\\\Repositories\\\\Maven\"; deleteFile(filePath,true); System.out.println(); deleteDir(filePath,true); System.out.println(\"执行完成！！！\"); } private static void deleteFile(String filePath,boolean flag){ RegexFileFilter regexFileFilter = new RegexFileFilter(\".*(lastUpdated).*\"); Collection&lt;File&gt; listFiles1 = FileUtils.listFiles(new File(filePath),regexFileFilter, DirectoryFileFilter.INSTANCE); for (File file : listFiles1) { try { System.out.println(file.getCanonicalPath()); if(flag){ FileUtils.forceDelete(file); } } catch (IOException e) { e.printStackTrace(); } } } private static void deleteDir(String filePath,boolean flag){ Collection&lt;File&gt; listFiles1 = FileUtils.listFilesAndDirs(new File(filePath), TrueFileFilter.INSTANCE,DirectoryFileFilter.DIRECTORY); for (File file : listFiles1) { try { if(file.isDirectory()){ if(file.getName().startsWith(\"$\") || file.getName().startsWith(\"unknown\") || file.getName().startsWith(\"error\")){ System.out.println(file.getCanonicalPath()); if(flag){ FileUtils.forceDelete(file); } } } } catch (IOException e) { e.printStackTrace(); } } }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/tags/Maven/"}]},{"title":"谷歌浏览器：下载，插件安装","slug":"2021/03/1615363585427/1615363585427","date":"2021-03-10T08:06:25.000Z","updated":"2021-05-14T05:14:23.654Z","comments":false,"path":"2021/03/1615363585427/1615363585427/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615363585427/1615363585427/","excerpt":"谷歌浏览器，下载，插件安装","text":"下载谷歌浏览器在线安装谷歌离线浏览器离线安装 离线版插件极简插件 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"世界","slug":"世界","permalink":"https://www.zhuqiaolun.com/categories/%E4%B8%96%E7%95%8C/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://www.zhuqiaolun.com/tags/chrome/"}]},{"title":"查看Jar包的JDK版本","slug":"2021/03/1615358998628/1615358998628","date":"2021-03-10T06:49:58.000Z","updated":"2021-11-30T13:35:47.110Z","comments":false,"path":"2021/03/1615358998628/1615358998628/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1615358998628/1615358998628/","excerpt":"查看jar包的JDK版本","text":"通过版本通常在使用Java程序时，需要对JDK版本进行核对，JDK构建版本不等于执行的运行版本，需要通过执行类来辨别 通过反编译工具jd-gui查看清单文件(此处版本为maven打包的版本) 通过编译的class文件来查看文件信息(此处版本为class文件的版本) 通过十六进制 Notepad++在 Notepad++ 中添加插件：HEX-Editor，点击安装后自动重启需要以十六进制显示时，点击菜单的：【插件】－【Hex-Editor】－【View in Hex】即可只看第一行数据，前面8个字节 CA FE BA BE 是固定的，后4个字节 00 00 是次版本号，次版本号后面的4个字节 00 33 是jdk的版本号，如这里 00 34 则表示jdk的版本是1.8 版本查看以下为各个JDK版本对应的数值 12345678J2SE 8.0 = 52(0x34 hex)J2SE 7.0 = 51(0x33 hex)J2SE 6.0 = 50 (0x32 hex)J2SE 5.0 = 49 (0x31 hex)JDK 1.4 = 48 (0x30 hex)JDK 1.3 = 47 (0x2F hex)JDK 1.2 = 46 (0x2E hex)JDK 1.1 = 45 (0x2D hex) document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"解决SpringBoot2.x的跨域请求问题,开启跨域","slug":"2021/03/1614825070134/1614825070134","date":"2021-03-04T02:31:10.000Z","updated":"2021-03-08T08:07:39.751Z","comments":false,"path":"2021/03/1614825070134/1614825070134/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614825070134/1614825070134/","excerpt":"解决SpringBoot的跨域请求问题","text":"请求错误描述： 123When allowCredentials is true, allowedOrigins cannot contain the special value \"*“since that cannot be set on the “Access-Control-Allow-Origin” response header. To allow credentials to a set of origins, list them explicitly or consider using\"allowedOriginPatterns” instead. SpringBoot2.3.x 123456789101112131415161718@Configurationpublic class WebMvcConfig implements WebMvcConfigurer { @Override public void addCorsMappings(CorsRegistry registry) { registry // 设置允许跨域的路由 .addMapping(\"/**\") // 设置允许跨域请求的域名 .allowedOrigins(\"*\") // 是否允许证书（cookies） .allowCredentials(true) // 设置允许的方法 .allowedMethods(\"GET\", \"POST\", \"DELETE\", \"PUT\") // 跨域允许时间 .maxAge(3600); }} SpringBoot2.4.x 123456789101112131415161718@Configurationpublic class WebMvcConfig implements WebMvcConfigurer { @Override public void addCorsMappings(CorsRegistry registry) { registry // 设置允许跨域的路由 .addMapping(\"/**\") // 设置允许跨域请求的域名 .allowedOriginPatterns(\"*\") // 是否允许证书（cookies） .allowCredentials(true) // 设置允许的方法 .allowedMethods(\"GET\", \"POST\", \"DELETE\", \"PUT\") // 跨域允许时间 .maxAge(3600); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"使用 MultipartFile[] 做多文件上传的功能","slug":"2021/03/1614764345833/1614764345833","date":"2021-03-03T09:39:05.000Z","updated":"2021-07-23T02:54:21.681Z","comments":false,"path":"2021/03/1614764345833/1614764345833/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614764345833/1614764345833/","excerpt":"使用 MultipartFile[] 做多文件上传的功能","text":"配置yml配置上传文件的限制 123456789spring: servlet: # 上传文件设置 multipart: enabled: true # 默认为 1MB max-file-size: 100MB # 默认为 10MB max-request-size: 500MB 控制器文件属性名： name = file参数非必传：required = false 12345678910111213141516171819202122@PostMapping(value = \"/upload\",consumes=\"multipart/form-data\")public String fileUpload(@RequestParam(value = \"file\",required = false) MultipartFile[] multipartFiles, @RequestParam(value = \"username\",required = false)String username, @RequestParam(value = \"password\",required = false)String password) throws IOException{ List&lt;Map&lt;String,Object&gt;&gt; fileList = new ArrayList&lt;&gt;(); for (MultipartFile multipartFile : multipartFiles) { String fileName = multipartFile.getOriginalFilename(); assert fileName != null; byte[] bytes = multipartFile.getBytes(); String fileExt = FilenameUtils.getExtension(fileName); Map&lt;String,Object&gt; map = new LinkedHashMap&lt;&gt;(); map.put(\"fileName\",fileName); map.put(\"fileExt\",fileExt); map.put(\"fileSize\",bytes.length); map.put(\"username\",username); map.put(\"password\",password); //转存，不需要进行IO流关闭处理 multipartFile.transferTo(new File(\"D:/dest.txt\")); fileList.add(map); } return JSON.toJSONString(fileList);} 请求示例 Java模拟请求 1234567891011121314151617@Testpublic void 多文件上传() { File file1 = new File(\"D:\\\\test\\\\1234.xlsx\"); File file2 = new File(\"D:\\\\test\\\\5678.xlsx\"); String url = \"https://www.zhuqiaolun.com/weixinz/api/test/upload\"; HttpHeaders headers = new HttpHeaders(); headers.set(\"Content-Type\", \"multipart/form-data\"); MultiValueMap&lt;String, Object&gt; params = new LinkedMultiValueMap&lt;&gt;(); params.add(\"file\", new FileSystemResource(file1)); params.add(\"file\", new FileSystemResource(file2)); params.add(\"username\",\"admin\"); params.add(\"password\",\"123456\"); HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; httpEntity = new HttpEntity&lt;&gt;(params, headers); ResponseEntity&lt;String&gt; responseEntity = restTemplate.postForEntity(url, httpEntity, String.class); System.out.println(responseEntity.getStatusCodeValue()); System.out.println(responseEntity.getBody());} Form表单提交 12345678910111213141516171819&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;多文件上传&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;form action=\"https://www.zhuqiaolun.com/weixinz/api/test/upload\" method=\"post\" enctype=\"multipart/form-data\"&gt; &lt;div id=\"moreFile\"&gt; &lt;input type=\"file\" name=\"file\"&gt; &lt;input type=\"file\" name=\"file\"&gt; &lt;input placeholder=\"用户名\" type=\"text\" name=\"username\" value=\"admin\"&gt; &lt;input placeholder=\"密码\" type=\"text\" name=\"password\" value=\"123456\"&gt; &lt;/div&gt; &lt;button type=\"submit\"&gt;上传&lt;/button&gt; &lt;/form&gt;&lt;/body&gt;&lt;/html&gt; Ajax表单提交 1234567891011121314151617181920212223242526272829303132333435363738&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;多文件上传&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;form id=\"moreFileForm\" &gt; &lt;input type=\"file\" name=\"file\"&gt; &lt;input type=\"file\" name=\"file\"&gt; &lt;input placeholder=\"用户名\" type=\"text\" name=\"username\" value=\"admin\"&gt; &lt;input placeholder=\"密码\" type=\"text\" name=\"password\" value=\"123456\"&gt; &lt;/form&gt; &lt;button type=\"button\" class=\"btn btn-primary\" onclick=\"moreFileSub()\"&gt;ajax上传&lt;/button&gt; &lt;p id=\"result\"&gt;&lt;/p&gt;&lt;script src=\"https://libs.baidu.com/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\"&gt;function moreFileSub(){ const formData = new FormData($(\"#moreFileForm\")[0]); $.ajax({ url : \"https://www.zhuqiaolun.com/weixinz/api/test/upload\", type : 'POST', data : formData, // 告诉jQuery不要去处理发送的数据 processData : false, // 告诉jQuery不要去设置Content-Type请求头 contentType : false, async : false, dataType : \"json\", success : function(result) { console.log(result); $(\"#result\").text(JSON.stringify(result)) } });}&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"SpringBoot的RestTemplate的使用","slug":"2021/03/1614741214844/1614741214844","date":"2021-03-03T03:13:34.000Z","updated":"2021-07-02T03:24:12.885Z","comments":false,"path":"2021/03/1614741214844/1614741214844/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614741214844/1614741214844/","excerpt":"SpringBoot的RestTemplate的使用","text":"RestTemplate配置 Headers 设置1234567HttpHeaders headers = new HttpHeaders();// Textheaders.set(\"Content-Type\", \"application/json;charset=UTF-8\");// Fileheaders.set(\"Content-Type\", \"multipart/form-data\");// Formheaders.set(\"Content-Type\", \"application/x-www-form-urlencoded\"); Get queryeg：https://www.zhuqiaolun.com/weixinz/api/test/get?username=demon&amp;password=1234561234567//将请求头部和参数合成一个请求UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);builder.queryParam(\"username\",username);builder.queryParam(\"password\",password);//将请求头部和参数合成一个请求HttpEntity&lt;?&gt; httpEntity = new HttpEntity&lt;&gt;(headers);restTemplate.exchange(builder.build().encode().toUri(), HttpMethod.GET, httpEntity, String.class); Posteg：https://www.zhuqiaolun.com/weixinz/api/test/post?username=demon&amp;password=123456body：{“username”:”demon”} application/json 12345678910JsonNodeFactory jsonNodeFactory = JsonNodeFactory.instance;ObjectNode params = jsonNodeFactory.objectNode();{ params.put(\"username\", username); params.put(\"password\", password);}//将请求头部和参数合成一个请求System.out.println(params.toString());HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(params.toString(), headers);restTemplate.postForEntity(url, httpEntity, String.class); application/x-www-form-urlencoded 12345MultiValueMap&lt;String, Object&gt; params = new LinkedMultiValueMap&lt;&gt;();params.add(\"username\", username);params.add(\"password\", password);HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; httpEntity = new HttpEntity&lt;&gt;(params, headers);return restTemplate.postForEntity(url, httpEntity, String.class); multipart/form-data 1234MultiValueMap&lt;String, Object&gt; params = new LinkedMultiValueMap&lt;&gt;();params.add(\"file\", new org.springframework.core.io.FileSystemResource(new java.io.File(\"AAA\")));HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; httpEntity = new HttpEntity&lt;&gt;(params, headers);restTemplate.postForEntity(url, httpEntity, String.class); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"RestTemplate","slug":"RestTemplate","permalink":"https://www.zhuqiaolun.com/tags/RestTemplate/"}]},{"title":"JavaFx之CheckBox变成单选模式","slug":"2021/03/1614740320445/1614740320445","date":"2021-03-03T02:58:40.000Z","updated":"2021-03-03T03:12:06.700Z","comments":false,"path":"2021/03/1614740320445/1614740320445/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614740320445/1614740320445/","excerpt":"JavaFx之CheckBox变成单选模式","text":"CheckBox：复选框模式 123456789CheckBox checkBox = new CheckBox();checkBox.setId(\"checkBox\");checkBox.setUserData(\"1234\");checkBox.setMaxWidth(30);checkBox.setOnAction(event -&gt; { if (checkBox.isSelected()) { checkBox.setSelected(true); }}); CheckBox：单选框模式，将其他选中的情况变成false 12345678910111213141516CheckBox checkBox = new CheckBox();checkBox.setId(\"checkBox\");checkBox.setUserData(\"1234\");checkBox.setMaxWidth(30);checkBox.setOnAction(event -&gt; { if (checkBox.isSelected()) { ObservableList&lt;Node&gt; contentChildren = content.getChildren(); if (contentChildren != null &amp;&amp; contentChildren.size() &gt; 0) { for (Node node : contentChildren) { CheckBox checkBox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); checkBox.setSelected(false); } } checkBox.setSelected(true); }}); 示例应用 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"JavaFx","slug":"JavaFx","permalink":"https://www.zhuqiaolun.com/categories/JavaFx/"}],"tags":[{"name":"CheckBox","slug":"CheckBox","permalink":"https://www.zhuqiaolun.com/tags/CheckBox/"}]},{"title":"JavaFx之动态添加组件","slug":"2021/03/1614738290477/1614738290477","date":"2021-03-03T02:24:50.000Z","updated":"2021-03-03T03:10:12.719Z","comments":false,"path":"2021/03/1614738290477/1614738290477/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614738290477/1614738290477/","excerpt":"JavaFx之动态添加组件","text":"本例主要是构建动态模板，采用VBox模式，效果如下：按钮操作 - 添加栏位按钮操作 - 上移按钮操作 - 下移 按钮添加鼠标事件setOnMouseClicked 123456Button addBtn = new Button(\"添加栏位\");addBtn.setOnMouseClicked(addBtnMouseClicked());Button upBtn = new Button(\"上移\");upBtn.setOnMouseClicked(upBtnMouseClicked());Button downBtn = new Button(\"下移\");downBtn.setOnMouseClicked(downBtnMouseClicked()); 将内容面板content添加到滚动面板 1234ScrollPane scrollPane = new ScrollPane(content);scrollPane.setPannable(true);scrollPane.setStyle(\"-fx-background-color: #FFF;\");BorderPane.setAlignment(scrollPane,Pos.CENTER); 寻找面板上的组件，只有类型对应，强转也无报错 1234567ObservableList&lt;Node&gt; templateAttrChildren = content.getChildren();if (templateAttrChildren != null &amp;&amp; templateAttrChildren.size() &gt; 0) { for (Node node : templateAttrChildren) { CheckBox attrFieldCheckbox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); System.out.println(attrFieldCheckbox.getUserData()); }} 移动操作：先获取当前组件对象，通过原始位置index进行remove，在进行位置add 1234567891011121314上移：当移到最上层时index=1HBox hBox = (HBox) content.lookup(\"#\" + checkBox.getParent().getId());int index = content.getChildren().indexOf(hBox);if (index &gt; 0) { content.getChildren().remove(index); content.getChildren().add(index - 1, hBox);}下移：当移到最下层时index=最大值HBox hBox = (HBox) content.lookup(\"#\" + checkBox.getParent().getId());int index = content.getChildren().indexOf(hBox);if (index &lt; content.getChildren().size() - 1) { content.getChildren().remove(index); content.getChildren().add(index + 1, hBox);} 事件EventHandler 12345private EventHandler&lt;MouseEvent&gt; btnMouseClicked(){ return event -&gt; { System.out.println(\"事件执行\"); };} 完整代码 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312package sample;import javafx.application.Application;import javafx.collections.FXCollections;import javafx.collections.ObservableList;import javafx.event.EventHandler;import javafx.geometry.Insets;import javafx.geometry.Pos;import javafx.scene.Node;import javafx.scene.Scene;import javafx.scene.control.*;import javafx.scene.input.MouseEvent;import javafx.scene.layout.BorderPane;import javafx.scene.layout.HBox;import javafx.scene.layout.StackPane;import javafx.scene.layout.VBox;import javafx.stage.Stage;import java.util.ArrayList;import java.util.List;import java.util.UUID;/** * @ClassName: VBox动态添加组件 * @Description: * @Author: Demon * @Date: 2021/3/2 16:16 */public class 动态添加组件 extends Application { private static VBox content = new VBox(); private static String[] attrType = new String[]{\"常量\", \"变量\"}; public static void main(String[] args) { launch(args); } @Override public void start(Stage primaryStage) { // Center - 动态内容 content.setAlignment(Pos.TOP_CENTER); content.setSpacing(3); // 加载初始数据 getContentHbox(new AttributeVo().setAttrId(\"123456\").setAttrName(\"测试1\").setAttrType(0).setAttrValue(\"123\")); getContentHbox(new AttributeVo().setAttrId(\"345678\").setAttrName(\"测试2\").setAttrType(1).setAttrValue(\"321\")); // 初始化 BorderPane borderPane = new BorderPane(); borderPane.setPadding(new Insets(15,8,15,8)); // Top VBox topVbox = new VBox(); Label title = new Label(\"栏位列表\"); topVbox.getChildren().add(title); borderPane.setTop(topVbox); // Center borderPane.setCenter(getCenterPane()); // Bottom HBox bottomHbox = new HBox(); bottomHbox.setAlignment(Pos.CENTER); Button saveBtn = new Button(\"保存\"); saveBtn.setOnMouseClicked(saveBtnMouseClicked()); bottomHbox.getChildren().add(saveBtn); borderPane.setBottom(bottomHbox); // 将内容添加到主面板 StackPane root = new StackPane(); root.getChildren().add(borderPane); primaryStage.setScene(new Scene(root, 800, 600)); primaryStage.setResizable(false); primaryStage.show(); } private BorderPane getCenterPane(){ BorderPane borderPane = new BorderPane(); // Top - 按钮 HBox topBox = new HBox(); topBox.setAlignment(Pos.CENTER_RIGHT); topBox.setPadding(new Insets(0,5,5,0)); topBox.setSpacing(10); Button addBtn = new Button(\"添加栏位\"); addBtn.setOnMouseClicked(addBtnMouseClicked()); Button upBtn = new Button(\"上移\"); upBtn.setOnMouseClicked(upBtnMouseClicked()); Button downBtn = new Button(\"下移\"); downBtn.setOnMouseClicked(downBtnMouseClicked()); topBox.getChildren().addAll(addBtn,upBtn,downBtn); borderPane.setTop(topBox); // Center - 表格内容 borderPane.setCenter(getContent()); return borderPane; } private BorderPane getContent(){ System.out.println(\"添加初始化内容\"); BorderPane borderPane = new BorderPane(); // Top - 栏位列表 HBox hBox = new HBox(); hBox.setAlignment(Pos.CENTER_LEFT); hBox.setPrefHeight(30.0); hBox.setSpacing(5); Label label1 = new Label(\"栏位名称\"); label1.setPrefWidth(220); label1.setAlignment(Pos.CENTER); Label label2 = new Label(\"栏位类型\"); label2.setPrefWidth(100); label2.setAlignment(Pos.CENTER); Label label3 = new Label(\"栏位数值\"); label3.setPrefWidth(350); label3.setAlignment(Pos.CENTER); hBox.getChildren().addAll(label1,label2,label3); borderPane.setTop(hBox); // 将内容添加到滚动面板 ScrollPane scrollPane = new ScrollPane(content); scrollPane.setPannable(true); scrollPane.setStyle(\"-fx-background-color: #FFF;\"); BorderPane.setAlignment(scrollPane,Pos.CENTER); borderPane.setCenter(scrollPane); return borderPane; } /** * 按钮事件 - 添加栏位 */ private EventHandler&lt;MouseEvent&gt; addBtnMouseClicked(){ return event -&gt; { //添加栏位 getContentHbox(new AttributeVo().setAttrId(UUID.randomUUID().toString()).setAttrType(0)); }; } /** * 动态区域操作 * @param attributeVo 参数 */ private void getContentHbox(AttributeVo attributeVo){ System.out.println(\"添加ID:\"+attributeVo.getAttrId()); HBox hBox = new HBox(5); hBox.setId(UUID.randomUUID().toString()); hBox.setAlignment(Pos.CENTER_LEFT); //栏位选取 CheckBox attrFieldCheckbox = new CheckBox(); attrFieldCheckbox.setId(\"attrFieldCheckbox\"); attrFieldCheckbox.setUserData(attributeVo.getAttrId()); attrFieldCheckbox.setMaxWidth(30); attrFieldCheckbox.setOnAction(event -&gt; { if (attrFieldCheckbox.isSelected()) { ObservableList&lt;Node&gt; contentChildren = content.getChildren(); if (contentChildren != null &amp;&amp; contentChildren.size() &gt; 0) { for (Node node : contentChildren) { CheckBox checkBox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); checkBox.setSelected(false); } } attrFieldCheckbox.setSelected(true); } }); //栏位名称 TextField attrName = new TextField(attributeVo.getAttrName()); attrName.setId(\"attrName\"); attrName.setPrefWidth(200); //栏位类型 ComboBox attrTypeComboBox = new ComboBox(); attrTypeComboBox.setId(\"attrTypeComboBox\"); attrTypeComboBox.setPrefWidth(100); attrTypeComboBox.setItems(FXCollections.observableArrayList(attrType)); attrTypeComboBox.getSelectionModel().select(attributeVo.getAttrType()); //栏位数组 TextField attrValue = new TextField(attributeVo.getAttrValue()); attrValue.setId(\"attrValue\"); attrValue.setPrefWidth(350); //操作按钮 Button delBtn = new Button(\"删除\"); delBtn.setMaxWidth(50); delBtn.setOnMouseClicked(event1 -&gt; content.getChildren().removeAll(hBox)); // 添加组件到hBox hBox.getChildren().addAll(attrFieldCheckbox,attrName,attrTypeComboBox,attrValue,delBtn); // 将hBox添加到内容面板 content.getChildren().add(content.getChildren().size(), hBox); } /** * 按钮事件 - 上移栏位 */ private EventHandler&lt;MouseEvent&gt; upBtnMouseClicked(){ return event -&gt; { ObservableList&lt;Node&gt; contentChildren = content.getChildren(); if (contentChildren != null &amp;&amp; contentChildren.size() &gt; 0) { for (Node node : contentChildren) { CheckBox checkBox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); if (checkBox.isSelected()) { HBox hBox = (HBox) content.lookup(\"#\" + checkBox.getParent().getId()); int index = content.getChildren().indexOf(hBox); if (index &gt; 0) { content.getChildren().remove(index); content.getChildren().add(index - 1, hBox); } break; } } } }; } /** * 按钮事件 - 下移栏位 */ private EventHandler&lt;MouseEvent&gt; downBtnMouseClicked(){ return event -&gt; { ObservableList&lt;Node&gt; contentChildren = content.getChildren(); if (contentChildren != null &amp;&amp; contentChildren.size() &gt; 0) { for (Node node : contentChildren) { CheckBox checkBox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); if (checkBox.isSelected()) { HBox hBox = (HBox) content.lookup(\"#\" + checkBox.getParent().getId()); int index = content.getChildren().indexOf(hBox); if (index &lt; content.getChildren().size() - 1) { content.getChildren().remove(index); content.getChildren().add(index + 1, hBox); } break; } } } }; } /** * 按钮事件 - 保存栏位 */ private EventHandler&lt;MouseEvent&gt; saveBtnMouseClicked(){ return event -&gt; { List&lt;AttributeVo&gt; attributeVoList = new ArrayList&lt;&gt;(); //模板栏位 ObservableList&lt;Node&gt; contentChildren = content.getChildren(); if (contentChildren != null &amp;&amp; contentChildren.size() &gt; 0) { for (Node node : contentChildren) { // 获取值 CheckBox attrFieldCheckbox = (CheckBox) node.lookup(\"#attrFieldCheckbox\"); TextField attrName = (TextField) node.lookup(\"#attrName\"); ComboBox attrTypeComboBox = (ComboBox) node.lookup(\"#attrTypeComboBox\"); TextField attrValue = (TextField) node.lookup(\"#attrValue\"); // 赋值 AttributeVo attributeVo = new AttributeVo(); attributeVo.setAttrId(String.valueOf(attrFieldCheckbox.getUserData())); attributeVo.setAttrName(attrName.getText()); attributeVo.setAttrType(attrTypeComboBox.getSelectionModel().getSelectedIndex()); attributeVo.setAttrValue(attrValue.getText()); attributeVoList.add(attributeVo); } } System.out.println(attributeVoList); }; }}/** * 虚拟实体类 */class AttributeVo { private String attrId; private String attrName; private int attrType; private String attrValue; public String getAttrId() { return attrId; } public AttributeVo setAttrId(String attrId) { this.attrId = attrId; return this; } public String getAttrName() { return attrName; } public AttributeVo setAttrName(String attrName) { this.attrName = attrName; return this; } public int getAttrType() { return attrType; } public AttributeVo setAttrType(int attrType) { this.attrType = attrType; return this; } public String getAttrValue() { return attrValue; } public AttributeVo setAttrValue(String attrValue) { this.attrValue = attrValue; return this; } @Override public String toString() { return \"AttributeVo{\" + \"attrId='\" + attrId + '\\'' + \", attrName='\" + attrName + '\\'' + \", attrType=\" + attrType + \", attrValue='\" + attrValue + '\\'' + '}'; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"JavaFx","slug":"JavaFx","permalink":"https://www.zhuqiaolun.com/categories/JavaFx/"}],"tags":[{"name":"VBox","slug":"VBox","permalink":"https://www.zhuqiaolun.com/tags/VBox/"}]},{"title":"JavaFx之TreeView的事件","slug":"2021/03/1614672011404/1614672011404","date":"2021-03-02T08:00:11.000Z","updated":"2021-03-15T09:20:46.106Z","comments":false,"path":"2021/03/1614672011404/1614672011404/","link":"","permalink":"https://www.zhuqiaolun.com/2021/03/1614672011404/1614672011404/","excerpt":"JavaFx之TreeView鼠标事件","text":"判断TreeView是否点击到节点上 123456Node node = event.getPickResult().getIntersectedNode();boolean flag = node instanceof TreeCell &amp;&amp; ((TreeCell) node).getText() != null;if (node instanceof Text || flag) { String name = (String) ((TreeItem)tree.getSelectionModel().getSelectedItem()).getValue(); System.out.println(\"Node click: \" + name);} 给TreeView 添加 鼠标点击事件MouseButton.NONE 无判断左键：event.getButton().compareTo(MouseButton.PRIMARY) == 1滚轮：event.getButton().compareTo(MouseButton.MIDDLE) == 1右键：event.getButton().compareTo(MouseButton.SECONDARY) == 1 123456789101112131415tree.addEventFilter(MouseEvent.MOUSE_CLICKED, event -&gt; { switch (event.getButton().compareTo(MouseButton.NONE)){ case 1: System.out.println(\"【左键】Node click: \" + name); break; case 2: System.out.println(\"【滚轮】Node click: \" + name); break; case 3: System.out.println(\"【右键】Node click: \" + name); break; default: break; }}); 完成代码如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package sample;import javafx.application.Application;import javafx.scene.Node;import javafx.scene.Scene;import javafx.scene.control.TreeCell;import javafx.scene.control.TreeItem;import javafx.scene.control.TreeView;import javafx.scene.input.MouseButton;import javafx.scene.input.MouseEvent;import javafx.scene.layout.StackPane;import javafx.scene.text.Text;import javafx.stage.Stage;/** * @ClassName: TreeViewMouseEvent * @Description: * @Author: Demon * @Date: 2021/3/1 11:16 */public class TreeViewMouseEvent extends Application { public static void main(String[] args) { launch(args); } @Override public void start(Stage primaryStage) { TreeItem&lt;String&gt; rootItem = new TreeItem&lt;&gt;(\"Root\"); rootItem.setExpanded(true); TreeItem&lt;String&gt; itemA = new TreeItem&lt;&gt;(\"A\"); TreeItem&lt;String&gt; itemB = new TreeItem&lt;&gt;(\"B\"); rootItem.getChildren().add(itemA); rootItem.getChildren().add(itemB); TreeView&lt;String&gt; tree = new TreeView&lt;&gt;(rootItem); // 给TreeView 添加 鼠标点击事件 tree.addEventFilter(MouseEvent.MOUSE_CLICKED, event -&gt; { Node node = event.getPickResult().getIntersectedNode(); boolean flag = node instanceof TreeCell &amp;&amp; ((TreeCell) node).getText() != null; if (node instanceof Text || flag) { String name = (String) ((TreeItem)tree.getSelectionModel().getSelectedItem()).getValue(); switch (event.getButton().compareTo(MouseButton.NONE)){ case 1: System.out.println(\"【左键】Node click: \" + name); break; case 2: System.out.println(\"【滚轮】Node click: \" + name); break; case 3: System.out.println(\"【右键】Node click: \" + name); break; default: break; } } }); StackPane root = new StackPane(); root.getChildren().add(tree); primaryStage.setScene(new Scene(root, 600, 400)); primaryStage.show(); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"JavaFx","slug":"JavaFx","permalink":"https://www.zhuqiaolun.com/categories/JavaFx/"}],"tags":[{"name":"TreeView","slug":"TreeView","permalink":"https://www.zhuqiaolun.com/tags/TreeView/"}]},{"title":"一款现代化的博客 - Halo","slug":"2021/02/1614323515573/1614323515573","date":"2021-02-26T07:11:55.000Z","updated":"2021-03-10T02:41:31.509Z","comments":false,"path":"2021/02/1614323515573/1614323515573/","link":"","permalink":"https://www.zhuqiaolun.com/2021/02/1614323515573/1614323515573/","excerpt":"一款","text":"基本信息Halo：https://halo.run/下载资源：https://dl.halo.run/说明：从 1.4.3 起，版本要求为 11 以上的版本。1.4.3 以下需要 1.8 以上的版本。所以下载 1.4.2 版本即可：Windows 点击下载 , Linux wget下载 运行Windows： 1java -jar halo-1.4.2.jar Linux： 123456789java -jar halo-1.4.2.jar或nohup java -jar halo-1.4.2.jar &amp;或nohup java -jar halo-1.4.2.jar --server.port=8083 &amp;关闭：lsof -i:8090 或 lsof -i:8083kill -9 PID 访问访问路径：/默认端口：8090 1234Halo： http://127.0.0.1:8090Halo admin： http://127.0.0.1:8090/admin 开始第一次访问会进行初始化信息信息存在在系统当前用户目录下产生一个 .halo 的文件夹，绝对路径为 ~/.halo、/root/.halo/填写内容，一路下一步即可，直至到登录页面。 我的Halo博客 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Blog","slug":"Blog","permalink":"https://www.zhuqiaolun.com/categories/Blog/"}],"tags":[{"name":"halo","slug":"halo","permalink":"https://www.zhuqiaolun.com/tags/halo/"}]},{"title":"Java原生URL模拟工具","slug":"2021/02/1612419197069/1612419197069","date":"2021-02-04T06:13:17.000Z","updated":"2021-11-06T09:27:07.220Z","comments":false,"path":"2021/02/1612419197069/1612419197069/","link":"","permalink":"https://www.zhuqiaolun.com/2021/02/1612419197069/1612419197069/","excerpt":"Java原生URL模拟请求","text":"采用原始URL进行模拟请求 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119import java.io.*;import java.net.HttpURLConnection;import java.net.URL;import java.nio.charset.StandardCharsets;/** * @ClassName: HttpClientUtil * @Description: Java原生URL模拟请求 * @Author: Demon * @Date: 2021/2/4 10:45 */public class HttpClientUtil { public static String doGet(String httpUrl) { HttpURLConnection connection; try { // 创建远程url连接对象 URL url = new URL(httpUrl); // 通过远程url连接对象打开一个连接，强转成httpURLConnection类 connection = (HttpURLConnection) url.openConnection(); // 设置连接方式：get connection.setRequestMethod(\"GET\"); // 设置连接主机服务器的超时时间：15000毫秒 connection.setConnectTimeout(15000); // 设置读取远程返回的数据时间：60000毫秒 connection.setReadTimeout(60000); // 发送请求 connection.connect(); return getResult(null,connection); } catch (IOException e) { e.printStackTrace(); return null; } } public static String doPost(String httpUrl, String param) { HttpURLConnection connection; OutputStream os; try { URL url = new URL(httpUrl); // 通过远程url连接对象打开连接 connection = (HttpURLConnection) url.openConnection(); // 设置连接请求方式 connection.setRequestMethod(\"POST\"); // 设置连接主机服务器超时时间：15000毫秒 connection.setConnectTimeout(15000); // 设置读取主机服务器返回数据超时时间：60000毫秒 connection.setReadTimeout(60000); // 默认值为：false，当向远程服务器传送数据/写数据时，需要设置为true connection.setDoOutput(true); // 默认值为：true，当前向远程服务读取数据时，设置为true，该参数可有可无 connection.setDoInput(true); // 设置传入参数的格式:请求参数应该是 name1=value1&amp;name2=value2 的形式。 connection.setRequestProperty(\"Content-Type\", \"application/x-www-form-urlencoded\"); // 通过连接对象获取一个输出流 os = connection.getOutputStream(); // 通过输出流对象将参数写出去/传输出去,它是通过字节数组写出的 os.write(param.getBytes()); return getResult(os,connection); } catch (IOException e) { e.printStackTrace(); return null; } } private static String getResult(OutputStream os,HttpURLConnection connection){ int responseCode = 200; InputStream is = null; BufferedReader br = null; try { String result = null; if (connection.getResponseCode() == responseCode) { is = connection.getInputStream(); br = new BufferedReader(new InputStreamReader(is, StandardCharsets.UTF_8)); StringBuilder stringBuilder = new StringBuilder(); String temp; while ((temp = br.readLine()) != null) { stringBuilder.append(temp); } result = stringBuilder.toString(); } return result; } catch (Exception e){ e.printStackTrace(); return null; } finally { getClose(br,os,is,connection); } } private static void getClose(BufferedReader br,OutputStream os, InputStream is,HttpURLConnection connection ){ // 关闭资源 if (null != br) { try { br.close(); } catch (IOException e) { e.printStackTrace(); } } if (null != os) { try { os.close(); } catch (IOException e) { e.printStackTrace(); } } if (null != is) { try { is.close(); } catch (IOException e) { e.printStackTrace(); } } if(connection != null){ connection.disconnect(); } }} 示例12String doGet = HttpClientUtil.doGet(\"https://www.baidu.com/\");System.out.println(doGet); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Java查询上海公交实时到站","slug":"2021/02/1612343895210/1612343895210","date":"2021-02-03T09:18:15.000Z","updated":"2021-03-01T06:46:25.400Z","comments":false,"path":"2021/02/1612343895210/1612343895210/","link":"","permalink":"https://www.zhuqiaolun.com/2021/02/1612343895210/1612343895210/","excerpt":"上海发布 之 公交实时到站","text":"数据由查询《上海发布》获取：上海发布地址：https://shanghaicity.openservice.kankanews.com/上海发布-实时公交：https://shanghaicity.openservice.kankanews.com/public/bus 获取公交页面返回的是一个HTML页面 12String doGet = HttpClientUtil.doGet(\"https://shanghaicity.openservice.kankanews.com/public/bus/mes/sid/edf7aec0b3543b5abd876f5c545cb1e8\");System.out.println(doGet); 获取公交路线sid12345参数字段描述：idnum：公交路线；如：浦东2路，636路 等，结果字段描述：sid：公交节站ID //查询 浦东2路 的sid 123456String param = \"\";String httpUrl = \"https://shanghaicity.openservice.kankanews.com/public/bus/get?idnum=浦东2路\";String result = HttpClientUtil.doPost(httpUrl, param);System.out.println(result);//返回结果（公交路线是否存在都会返回）{\"mes\": \"\",\"sid\": \"edf7aec0b3543b5abd876f5c545cb1e8\"} RestClient模拟请求： 获取公交实时信息123456789参数字段描述：stoptype：公交节站方向(0-正向；1-反向)stopid：公交节站节点sid：公交节站ID结果字段描述：terminal：车牌stopdis：距离当前站还有多少站time：距离当前站还有多少时间(秒) //查询 浦东2路(胜利路川沙路 -&gt; 南曹路唐陆公路) 的车辆到达唐镇地址站 12345678910String httpUrl = \"https://shanghaicity.openservice.kankanews.com/public/bus/Getstop\";String param = \"stoptype=0&amp;stopid=23&amp;sid=edf7aec0b3543b5abd876f5c545cb1e8\";String result = HttpClientUtil.doPost(httpUrl, param);System.out.println(result);//返回结果(当有车辆时)[{\"@attributes\":{\"cod\":\"浦东2路\"},\"terminal\":\"沪D-61543无障碍\",\"stopdis\":\"2\",\"distance\":\"1007\",\"time\":\"158\"}]//返回结果(当无车辆时){\"error\":\"-2\"}//返回结果(当sid不存在时){\"error\":\"0\"} RestClient模拟请求： 链接工具类：HttpClientUtil document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Java发送邮件","slug":"2021/01/1611916009068/1611916009068","date":"2021-01-29T10:26:49.000Z","updated":"2021-11-06T09:44:37.591Z","comments":false,"path":"2021/01/1611916009068/1611916009068/","link":"","permalink":"https://www.zhuqiaolun.com/2021/01/1611916009068/1611916009068/","excerpt":"Java 发送邮件 - 新浪，网易，QQ","text":"本文以 Java 发送邮件功能，采用commons-email模式执行 依赖123456&lt;!-- 发送邮件 --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-email&lt;/artifactId&gt; &lt;version&gt;1.5&lt;/version&gt;&lt;/dependency&gt; 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105import org.apache.commons.mail.EmailException;import org.apache.commons.mail.HtmlEmail;import java.util.List;/** * @className: MailUtil.java * @description: 邮件工具类 * @author: Demon * @date 2020/10/27 17:09 */public class MailUtil { /** * 构建器 */ public static class EmailInfo { /** * SMTP 服务器 端口 */ private String mailServer; private Integer mailPort; /** * 发件人 账号 */ private String mailNick; /** * 发件人 账号 */ private String mailUsername; /** * 发件人 密码 */ private String mailPassword; /** * 邮件标题 */ private String title; /** * 邮件内容 */ private String content; /** * 收件人 */ private List&lt;String&gt; receivers; boolean ssl; public EmailInfo(String mailServer,Integer mailPort,String mailNick,String mailUsername, String mailPassword,String title,String content,List&lt;String&gt; receivers,boolean ssl) { this.mailServer = mailServer; this.mailPort = mailPort; this.mailNick = mailNick; this.mailUsername = mailUsername; this.mailPassword = mailPassword; this.title = title; this.content = content; this.receivers = receivers; this.ssl = ssl; } public MailUtil send() throws Exception { return new MailUtil(this); } } private MailUtil(EmailInfo emailInfo) throws Exception { HtmlEmail email = new HtmlEmail(); // 通过Server 发送邮件 email.setHostName(emailInfo.mailServer); email.setSmtpPort(emailInfo.mailPort); //设定smtp服务器的认证资料信息 email.setAuthentication(emailInfo.mailUsername, emailInfo.mailPassword); email.setStartTLSEnabled(false); email.setSSLOnConnect(emailInfo.ssl); try { // 设定发件人 email.setFrom(emailInfo.mailUsername,emailInfo.mailNick); // 设定收件人 （多人） int size = emailInfo.receivers.size(); email.addTo(emailInfo.receivers.toArray(new String[size])); // 设定内容的语言集 email.setCharset(\"UTF-8\"); email.setDebug(false); // 设定主题 email.setSubject(emailInfo.title); // 设定邮件内容 email.setHtmlMsg(emailInfo.content); // 发送邮件 email.send(); System.out.println(\"邮件发送成功！\"); } catch (EmailException e) { System.out.println(\"邮件发送失败！\"); throw new Exception(e); } }} 设置新浪String mailServer = smtp.sinanet.comInteger mailPort = 25boolean ssl = false 网易如若开启了授权密码，请以授权密码当做用户密码使用String mailServer = smtp.163.comInteger mailPort = 25boolean ssl = false QQ如若开启了授权密码，请以授权密码当做用户密码使用String mailServer = smtp.qq.comInteger mailPort = 465boolean ssl = true 测试123456789101112131415161718192021@Testpublic void 测试邮件() { try { String content = \"&lt;!doctypehtml&gt;&lt;html lang=en&gt;&lt;meta charset=UTF-8&gt;&lt;title&gt;Title&lt;/title&gt;&lt;h1&gt;测试&lt;/h1&gt;\"; // 发送邮件信息 String mailServer = \"smtp.sinanet.com\"; Integer mailPort = 25; String mailNick = \"demon\"; String mailUsername = \"demon@xxxxxxxxx\"; String mailPassword = \"123456789\"; String title = \"本地测试\"; List&lt;String&gt; receivers = new ArrayList&lt;&gt;(); receivers.add(\"1097305826@qq.com\"); MailUtil.EmailInfo emailInfo = new MailUtil.EmailInfo(mailServer,mailPort, mailNick,mailUsername,mailPassword,title, content,receivers,false); // 发送邮件 emailInfo.send(); } catch (Exception e) { e.printStackTrace(); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Email","slug":"Email","permalink":"https://www.zhuqiaolun.com/tags/Email/"}]},{"title":"Zip4j - 压缩/解压（可设置密码）","slug":"2020/11/1605683417659/1605683417659","date":"2020-11-18T07:10:17.000Z","updated":"2021-11-06T09:45:22.524Z","comments":false,"path":"2020/11/1605683417659/1605683417659/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605683417659/1605683417659/","excerpt":"Java工具类 - Zip4j - 压缩/解压（可设置密码）","text":"依赖12345&lt;dependency&gt; &lt;groupId&gt;net.lingala.zip4j&lt;/groupId&gt; &lt;artifactId&gt;zip4j&lt;/artifactId&gt; &lt;version&gt;2.6.0&lt;/version&gt;&lt;/dependency&gt; 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176import net.lingala.zip4j.ZipFile;import net.lingala.zip4j.exception.ZipException;import net.lingala.zip4j.model.FileHeader;import net.lingala.zip4j.model.ZipParameters;import net.lingala.zip4j.model.enums.CompressionLevel;import net.lingala.zip4j.model.enums.CompressionMethod;import net.lingala.zip4j.model.enums.EncryptionMethod;import java.io.File;import java.nio.charset.Charset;import java.util.ArrayList;import java.util.List;/** * @ClassName: Zip4jUtil * @Description: zip 工具 * @Author: Demon */public class Zip4jUtil { /** * 根据给定密码压缩文件(s)到指定目录 * * @param destFileName 压缩文件存放绝对路径 e.g.:D:/upload/zip/demo.zip * @param password 密码(可为null) * @param files 单个文件或文件数组 * @return 最终的压缩文件存放的绝对路径,如果为false则说明压缩失败. */ public static boolean compress(String destFileName, String password, File... files) throws ZipException { try { ZipParameters parameters = new ZipParameters(); // 压缩方式 8 parameters.setCompressionMethod(CompressionMethod.DEFLATE); // 压缩级别 5 parameters.setCompressionLevel(CompressionLevel.NORMAL); if (!(password == null || \"\".equals(password))) { parameters.setEncryptFiles(true); // 加密方式 0 parameters.setEncryptionMethod(EncryptionMethod.ZIP_STANDARD); } ZipFile zipFile = new ZipFile(destFileName); if (!(password == null || \"\".equals(password))) { zipFile.setPassword(password.toCharArray()); } for (File file : files) { zipFile.addFile(file, parameters); } return true; } catch (ZipException e) { e.printStackTrace(); throw new ZipException(e); } } /** * 根据给定密码压缩文件(s)到指定位置 * * @param destFileName 压缩文件存放绝对路径 e.g.:D:/upload/zip/demo.zip * @param password 密码(可为null) * @param filePaths 单个文件路径或文件路径数组 * @return 最终的压缩文件存放的绝对路径,如果为false则说明压缩失败. */ public static boolean compress(String destFileName, String password, String... filePaths) throws ZipException { int size = filePaths.length; File[] files = new File[size]; for (int i = 0; i &lt; size; i++) { files[i] = new File(filePaths[i]); } return compress(destFileName, password, files); } /** * 根据给定密码压缩文件(s)到指定位置 * * @param destFileName 压缩文件存放绝对路径 e.g.:D:/upload/zip/demo.zip * @param password 密码(可为null) * @param folder 文件夹路径 * @return 最终的压缩文件存放的绝对路径,如果为false则说明压缩失败. */ public static boolean compressFolder(String destFileName, String password, String folder) throws ZipException { File folderParam = new File(folder); if (folderParam.isDirectory()) { File[] files = folderParam.listFiles(); return compress(destFileName, password, files); } return false; } /** * 根据所给密码解压zip压缩包到指定目录 * &lt;p&gt; * 如果指定目录不存在,可以自动创建,不合法的路径将导致异常被抛出 * * @param zipFile zip压缩包绝对路径 * @param dest 指定解压文件夹位置 * @param password 密码(可为null) * @return 解压后的文件数组 * @throws ZipException 异常 */ public static File[] deCompress(File zipFile, String dest, String password) throws ZipException { //1.判断指定目录是否存在 File destDir = new File(dest); if (destDir.isDirectory() &amp;&amp; !destDir.exists()) { boolean mkdir = destDir.mkdir(); System.out.println(mkdir); } //2.初始化zip工具 ZipFile zFile = new ZipFile(zipFile); zFile.setCharset(Charset.forName(\"UTF-8\")); if (!zFile.isValidZipFile()) { throw new ZipException(\"压缩文件不合法,可能被损坏.\"); } //3.判断是否已加密 if (zFile.isEncrypted()) { zFile.setPassword(password.toCharArray()); } //4.解压所有文件 zFile.extractAll(dest); List headerList = zFile.getFileHeaders(); List&lt;File&gt; extractedFileList = new ArrayList&lt;&gt;(); for(Object object : headerList) { FileHeader fileHeader = (FileHeader)object; if (!fileHeader.isDirectory()) { extractedFileList.add(new File(destDir,fileHeader.getFileName())); } } File [] extractedFiles = new File[extractedFileList.size()]; extractedFileList.toArray(extractedFiles); return extractedFiles; } /** * 解压无密码的zip压缩包到指定目录 * @param zipFile zip压缩包 * @param dest 指定解压文件夹位置 * @return 解压后的文件数组 */ public static File[] deCompress(File zipFile, String dest) throws ZipException { try { return deCompress(zipFile, dest, null); } catch (ZipException e) { e.printStackTrace(); throw new ZipException(e); } } /** * 根据所给密码解压zip压缩包到指定目录 * @param zipFilePath zip压缩包绝对路径 * @param dest 指定解压文件夹位置 * @param password 压缩包密码 * @return 解压后的所有文件数组 */ public static File[] deCompress(String zipFilePath, String dest, String password) throws ZipException { try { return deCompress(new File(zipFilePath), dest, password); } catch (ZipException e) { e.printStackTrace(); throw new ZipException(e); } } /** * 无密码解压压缩包到指定目录 * @param zipFilePath zip压缩包绝对路径 * @param dest 指定解压文件夹位置 * @return 解压后的所有文件数组 */ public static File[] deCompress(String zipFilePath, String dest) throws ZipException { try { return deCompress(new File(zipFilePath), dest, null); } catch (ZipException e) { e.printStackTrace(); throw new ZipException(e); } }} 使用压缩无密码： 1234567891011121314@Testvoid 压缩无密码() { String file1 = \"D:\\\\test\\\\unzip\\\\333\\\\123.txt\"; String file2 = \"D:\\\\test\\\\unzip\\\\333\\\\456.txt\"; String file3 = \"D:\\\\test\\\\unzip\\\\333\\\\789.txt\"; String file4 = \"D:\\\\test\\\\unzip\\\\333\\\\789 - 副本.txt\"; //压缩后的zip文件路径 String zipFilePath1 = \"D:\\\\test\\\\unzip\\\\5555.zip\"; try { System.out.println(Zip4jUtil.compress(zipFilePath1,null,file1,file2,file3,file4)); } catch (ZipException e) { e.printStackTrace(); }} 压缩有密码： 12345678910111213@Testvoid 压缩有密码() { String file1 = \"D:\\\\test\\\\unzip\\\\333\\\\123.txt\"; String file2 = \"D:\\\\test\\\\unzip\\\\333\\\\456.txt\"; String file3 = \"D:\\\\test\\\\unzip\\\\333\\\\789.txt\"; //压缩后的zip文件路径 String zipFilePath2 = \"D:\\\\test\\\\unzip\\\\6666.zip\"; try { System.out.println(Zip4jUtil.compress(zipFilePath2,\"123\",file1,file2,file3)); } catch (ZipException e) { e.printStackTrace(); }} 解压无密码： 12345678910111213@Testvoid 解压无密码() { String zipFilePath1 = \"D:\\\\test\\\\unzip\\\\5555.zip\"; File[] files = new File[0]; try { files = Zip4jUtil.deCompress(zipFilePath1, \"D:\\\\test\\\\unzip\\\\5555\"); } catch (ZipException e) { e.printStackTrace(); } if(files != null){ System.out.println(files.length); }} 解压有密码： 12345678910111213@Testvoid 解压有密码() { String zipFilePath1 = \"D:\\\\test\\\\unzip\\\\6666.zip\"; File[] files = new File[0]; try { files = Zip4jUtil.deCompress(zipFilePath1, \"D:\\\\test\\\\unzip\\\\6666\", \"123\"); } catch (ZipException e) { e.printStackTrace(); } if(files != null){ System.out.println(files.length); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Zip","slug":"Zip","permalink":"https://www.zhuqiaolun.com/tags/Zip/"}]},{"title":"SpringBoot之自定义Redis配置","slug":"2020/11/1605606341401/1605606341401","date":"2020-11-17T09:45:41.000Z","updated":"2021-05-13T05:46:51.251Z","comments":false,"path":"2020/11/1605606341401/1605606341401/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605606341401/1605606341401/","excerpt":"自定义Redis配置,修改原生的yml配置，采取自定义模式","text":"修改原生的yml配置，采取自定义模式，配置文件仅为动态值，如不需要则可删除，代码设有默认值， 依赖1234567891011121314&lt;!-- redis start --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- redis end --&gt; 配置配置文件：redis-config.properties 1234# redis setspring.redis.database=1spring.redis.host=127.0.0.1spring.redis.password= 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130import com.fasterxml.jackson.annotation.JsonAutoDetect;import com.fasterxml.jackson.annotation.PropertyAccessor;import com.fasterxml.jackson.databind.ObjectMapper;import org.apache.commons.pool2.impl.GenericObjectPoolConfig;import org.springframework.beans.factory.annotation.Value;import org.springframework.cache.CacheManager;import org.springframework.cache.annotation.EnableCaching;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.PropertySource;import org.springframework.data.redis.cache.RedisCacheConfiguration;import org.springframework.data.redis.cache.RedisCacheManager;import org.springframework.data.redis.cache.RedisCacheWriter;import org.springframework.data.redis.connection.RedisConnectionFactory;import org.springframework.data.redis.connection.RedisPassword;import org.springframework.data.redis.connection.RedisStandaloneConfiguration;import org.springframework.data.redis.connection.lettuce.LettuceClientConfiguration;import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;import org.springframework.data.redis.connection.lettuce.LettucePoolingClientConfiguration;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;import org.springframework.data.redis.serializer.StringRedisSerializer;import org.springframework.stereotype.Component;import java.time.Duration;/** * @className: RedisConfig.java * @description: Redis配置 * @author: Demon */@Component@EnableCaching@PropertySource(value = {\"classpath:redis-config.properties\"},encoding = \"UTF-8\")public class RedisConfig{ @Value(\"${spring.redis.database:0}\") private int database; @Value(\"${spring.redis.host:localhost}\") private String host; @Value(\"${spring.redis.port:6379}\") private int port; @Value(\"${spring.redis.password:}\") private String password; @Value(\"${spring.redis.timeout:10000}\") private long timeout; @Value(\"${spring.redis.pool.maxTotal:30}\") private int maxTotal; @Value(\"${spring.redis.pool.maxIdle:30}\") private int maxIdle; @Value(\"${spring.redis.pool.minIdle:10}\") private int minIdle; @Value(\"${spring.redis.pool.maxWaitMillis:10000}\") private int maxWaitMillis; @Value(\"${spring.redis.testOnBorrow:true}\") private boolean testOnBorrow; @Value(\"${spring.redis.testOnReturn:false}\") private boolean testOnReturn; @Value(\"${spring.redis.testWhileIdle:true}\") private boolean testWhileIdle; @Bean public RedisConnectionFactory lettuceConnectionFactory() { GenericObjectPoolConfig genericObjectPoolConfig = new GenericObjectPoolConfig(); genericObjectPoolConfig.setMaxTotal(maxTotal); genericObjectPoolConfig.setMaxWaitMillis(maxWaitMillis); genericObjectPoolConfig.setMaxIdle(maxIdle); genericObjectPoolConfig.setMinIdle(minIdle); genericObjectPoolConfig.setTestOnBorrow(testOnBorrow); genericObjectPoolConfig.setTestOnReturn(testOnReturn); genericObjectPoolConfig.setTestWhileIdle(testWhileIdle); // 单点redis RedisStandaloneConfiguration redisConfig = new RedisStandaloneConfiguration(); redisConfig.setDatabase(database); redisConfig.setHostName(host); redisConfig.setPort(port); if (password != null &amp;&amp; !\"\".equals(password)) { redisConfig.setPassword(RedisPassword.of(password)); } LettuceClientConfiguration clientConfig = LettucePoolingClientConfiguration.builder() .poolConfig(genericObjectPoolConfig) .commandTimeout(Duration.ofMillis(timeout)) .shutdownTimeout(Duration.ZERO) .build(); return new LettuceConnectionFactory(redisConfig,clientConfig); } /** * 配置自定义redisTemplate */ @Bean public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) { System.out.println(\"★★★★★加载 bean - RedisTemplate&lt;String, Object&gt; ★★★★★\"); RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;(); redisTemplate.setConnectionFactory(redisConnectionFactory); //使用Jackson2JsonRedisSerializer来序列化和反序列化redis的value值 替换默认序列化 Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class); ObjectMapper objectMapper = new ObjectMapper(); objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(objectMapper); //使用StringRedisSerializer来序列化和反序列化redis的key值 redisTemplate.setKeySerializer(new StringRedisSerializer()); redisTemplate.setHashKeySerializer(jackson2JsonRedisSerializer); redisTemplate.setValueSerializer(jackson2JsonRedisSerializer); redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer); redisTemplate.afterPropertiesSet(); //事务支持 redisTemplate.setEnableTransactionSupport(true); return redisTemplate; } /** * 缓存配置管理器 */ @Bean public CacheManager cacheManager(RedisConnectionFactory redisConnectionFactory) { System.out.println(\"★★★★★加载 bean - cacheManager ★★★★★\"); //以锁写入的方式创建RedisCacheWriter对象 RedisCacheWriter writer = RedisCacheWriter.lockingRedisCacheWriter(redisConnectionFactory); //创建默认缓存配置对象 RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig(); return new RedisCacheManager(writer, config); }} 使用123456@Resourceprivate RedisTemplate&lt;String,Object&gt; redisTemplate;ValueOperations&lt;String,Object&gt; valueOperations = redisTemplate.opsForValue();valueOperations.set(\"admin\",\"\"); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/categories/Redis/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/tags/SpringBoot/"}]},{"title":"MyBatis遍历map","slug":"2020/11/1605605257925/1605605257925","date":"2020-11-17T09:27:37.000Z","updated":"2021-03-01T06:46:25.959Z","comments":false,"path":"2020/11/1605605257925/1605605257925/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605605257925/1605605257925/","excerpt":"MyBatis遍历map","text":"MyBatis是可以遍历map的， Dao注意：要加@Param注解，否则不行 Map&lt;String,Object&gt; map = new LinkedHashMap&lt;&gt;();map.put(“USER_NAME”,”张三”);map.put(“USER_STATUS”,”0”);map.put(“UPDATE_TIME”,new Date()); 1int insertData(@Param(\"params\") Map&lt;String, Object&gt; map); Map&lt;String,Object&gt; map = new LinkedHashMap&lt;&gt;();map.put(“1”,”张三”);map.put(“2”,”李四”); 1int deleteBatch(@Param(\"params\") Map&lt;String, Object&gt; map); Mapper注意：collection=”params.entrySet()” 或者 collection=”params” 都行 12345678910&lt;insert id=\"insertData\" parameterType=\"java.util.Map\"&gt; insert into user_table &lt;foreach collection=\"params.entrySet()\" index=\"key\" separator=\",\" item=\"value\" open=\"(\" close=\")\"&gt; #{key} &lt;/foreach&gt; values &lt;foreach collection=\"params.entrySet()\" index=\"key\" separator=\",\" item=\"value\" open=\"(\" close=\")\"&gt; #{value} &lt;/foreach&gt;&lt;/insert&gt; 123456&lt;update id=\"deleteBatch\" parameterType=\"java.util.Map\"&gt; delete from user_table where USER_ID in &lt;foreach collection=\"params.entrySet()\" index=\"key\" separator=\",\" item=\"value\" open=\"(\" close=\")\"&gt; #{key} &lt;/foreach&gt;&lt;/update&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"MyBatis的几种批量操作 - MySql","slug":"2020/11/1605601494695/1605601494695","date":"2020-11-17T08:24:54.000Z","updated":"2021-07-02T02:40:20.725Z","comments":false,"path":"2020/11/1605601494695/1605601494695/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605601494695/1605601494695/","excerpt":"MyBatis的几种批量操作 - 新增/删除/更新","text":"说明此处针对MySql的数据库操作,datasource.url：jdbc:mysql://127.0.0.1:3306/data?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;allowMultiQueries=true 批量新增dao12345678List&lt;Map&lt;String, Object&gt;&gt; listData = new ArrayList&lt;&gt;();/** * 批量新增 * @param params 参数1 * @param list 参数2 */void saveBatchData(@Param(\"params\")Map&lt;String, Object&gt; map, @Param(\"list\")List&lt;Map&lt;String, Object&gt;&gt; list); Mapper此处的 “list” 为 dao里面的 @Param(“list”) 的 list 1234567&lt;insert id=\"saveBatchData\" parameterType=\"java.util.List\" &gt; insert into user_table ( USER_NAME,USER_STATUS,CREATE_TIME,UPDATE_TIME ) values &lt;foreach collection=\"list\" item=\"item\" separator=\",\"&gt; ( #{item.userName},#{item.userStatus},#{item.createDate},#{item.updateDate} ) &lt;/foreach&gt;&lt;/insert&gt; 批量删除dao数组: 123456789List&lt;String&gt; list = new ArrayList&lt;&gt;();list.add(\"1\");String[] stringArray = new String[list.size()];/** * 批量删除 * @param stringArray 参数 */void deleteBatchDataByArray(String[] stringArray); 集合: 1234567List&lt;Map&lt;String, Object&gt;&gt; listData = new ArrayList&lt;&gt;();/** * 批量删除 * @param list 参数 */void deleteBatchDataByList(@Param(\"list\")List&lt;Map&lt;String, Object&gt;&gt; list); Mapper数组: 123456&lt;delete id=\"deleteBatchDataByArray\"&gt; delete from user_table where USER_ID in &lt;foreach item=\"item\" index=\"index\" collection=\"array\" open=\"(\" separator=\",\" close=\")\"&gt; #{item} &lt;/foreach&gt;&lt;/delete&gt; 集合: 123456&lt;delete id=\"deleteBatchDataByList\" parameterType=\"java.util.List\"&gt; delete from user_table where &lt;foreach collection=\"list\" item=\"item\" index=\"index\" separator=\"or\"&gt; ( USER_ID = #{item.userId} ) &lt;/foreach&gt;&lt;/delete&gt; 批量更新dao12345678List&lt;Map&lt;String, Object&gt;&gt; listData = new ArrayList&lt;&gt;();/** * 批量更新 - mat未进件 * @param params 参数1 * @param list 参数2 */void updateBatchData(@Param(\"params\")Map&lt;String, Object&gt; params, @Param(\"list\")List&lt;Map&lt;String, Object&gt;&gt; list); Mapper123456789101112&lt;update id=\"updateBatchData\" parameterType=\"java.util.List\" &gt; &lt;foreach collection=\"list\" item=\"item\" separator=\";\"&gt; update user_table &lt;set&gt; USER_NAME = #{item.userName}, USER_STATUS = #{item.userStatus}, UPDATE_TIME = #{item.updateDate} &lt;/set&gt; where USER_ID = #{item.userId} &lt;/foreach&gt;&lt;/update&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"POI(3.17)生成Excel2007 - 可计算公式数据","slug":"2020/11/1605601181571/1605601181571","date":"2020-11-17T08:19:41.000Z","updated":"2022-02-14T08:32:10.844Z","comments":false,"path":"2020/11/1605601181571/1605601181571/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605601181571/1605601181571/","excerpt":"POI生成Excel文件","text":"依赖123456789101112131415&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml-schemas&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt; 生成 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345import org.apache.poi.ss.usermodel.*;import org.apache.poi.xssf.streaming.SXSSFWorkbook;import org.apache.poi.xssf.usermodel.XSSFWorkbook;import java.io.*;import java.util.LinkedHashMap;import java.util.List;import java.util.Map;/** * author ：demon * date ：2021 2021/10/1 12:18 * desc ：Excel 导出工具 * &lt;p&gt; * InputStream inputStream = xxx.class.getResourceAsStream(\"/example.xlsx\"); */public class ExcelUtil2 { private boolean isNew = false; private int sheetIndex = 0; private String sheetName = \"Sheet1\"; private String[] removeSheet = {}; private XSSFWorkbook workbook; private OutputStream outputStream; public ExcelUtil2() { this.isNew = true; this.workbook = new XSSFWorkbook(); } public ExcelUtil2(InputStream inputFile) throws IOException { this.workbook = new XSSFWorkbook(inputFile); } public ExcelUtil2(int sheetIndex, InputStream inputFile) throws IOException { this.workbook = new XSSFWorkbook(inputFile); this.sheetIndex = sheetIndex; this.sheetName = this.workbook.getSheetName(sheetIndex); } public ExcelUtil2(String sheetName, InputStream inputFile) throws IOException { this.workbook = new XSSFWorkbook(inputFile); this.sheetIndex = this.workbook.getSheetIndex(sheetName); this.sheetName = sheetName; } public XSSFWorkbook getWorkbook() { return workbook; } public int getSheetIndex() { return this.sheetIndex; } public String getSheetName() { return this.sheetName; } /* 修改指定Sheet的名称 */ public void setSheetName(int sheetIndex, String sheetName) { if (sheetName != null) { this.workbook.setSheetName(sheetIndex, sheetName); } else { this.workbook.setSheetName(sheetIndex, \"Sheet1\"); } } /* 删除Sheet */ public void removeSheet(String[] sheetName) { this.removeSheet = sheetName; } /** * 添加行信息 * * @param cellRow 行计数 * @param columnList 列数据 * @return 返回 */ public Map&lt;String, Object&gt; addRowData(int cellRow, List&lt;Map&lt;String, Object&gt;&gt; columnList) { Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(); map.put(\"cellRow\", cellRow); map.put(\"cellData\", columnList); return map; } /** * 添加列 * * @param cellColumn 列计数 * @param cellTitle 列标题 * @param cellValue 列值 * @param cellType 列类型 * @return 返回 */ public Map&lt;String, Object&gt; addColumnData(int cellColumn, String cellTitle, Object cellValue, String cellType) { Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(); map.put(\"cellColumn\", cellColumn); map.put(\"cellTitle\", cellTitle); map.put(\"cellValue\", cellValue); map.put(\"cellType\", cellType); return map; } /** * 添加列 * * @param cellColumn 列计数 * @param cellTitle 列标题 * @param cellValue 列值 * @param cellType 列类型 * @param cellStyle 列格式 * @return 返回 */ public Map&lt;String, Object&gt; addColumnData(int cellColumn, String cellTitle, Object cellValue, String cellType, String cellStyle) { Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(this.addColumnData(cellColumn, cellTitle, cellValue, cellType)); map.put(\"cellStyle\", cellStyle); return map; } /** * 添加列 指定宽度 * * @param cellColumn 列计数 * @param cellTitle 列标题 * @param cellValue 列值 * @param cellType 列类型 * @param cellColumnWidth 列长度 * @return 返回 */ public Map&lt;String, Object&gt; addColumnData(int cellColumn, String cellTitle, Object cellValue, String cellType, int cellColumnWidth) { Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(this.addColumnData(cellColumn, cellTitle, cellValue, cellType)); map.put(\"cellColumnWidth\", cellColumnWidth); return map; } public Map&lt;String, Object&gt; addColumnData(int cellColumn, String cellTitle, Object cellValue, String cellType, String cellStyle, int cellColumnWidth) { Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(this.addColumnData(cellColumn, cellTitle, cellValue, cellType)); map.put(\"cellStyle\", cellStyle); map.put(\"cellColumnWidth\", cellColumnWidth); return map; } /** * 生成文件 - 写入绝对路径 * * @param dataList 数据 * @param outFilePath 保存文件 * @throws Exception 异常 */ public void createWorkbook(List&lt;Map&lt;String, Object&gt;&gt; dataList, File outFilePath) throws Exception { try (SXSSFWorkbook sxssfWorkbook = new SXSSFWorkbook(workbook, dataList.size())) { if (this.isNew) { try { Sheet sheet = sxssfWorkbook.createSheet(this.sheetName != null ? this.sheetName : \"Sheet1\"); this.setRowData(sheet, 0, dataList); outputStream = new FileOutputStream(outFilePath.getAbsolutePath()); //强制让改Sheet执行公式 sheet.setForceFormulaRecalculation(true); sxssfWorkbook.write(outputStream); } catch (Exception e) { e.printStackTrace(); throw new Exception(\"导出新创建的Excel文件异常\", e); } } else { try { Sheet sheet = sxssfWorkbook.getSheetAt(this.sheetIndex); this.setRowData(sheet, sheetIndex, dataList); outputStream = new FileOutputStream(outFilePath.getAbsolutePath()); //强制让改Sheet执行公式 sheet.setForceFormulaRecalculation(true); sxssfWorkbook.write(outputStream); } catch (Exception e) { e.printStackTrace(); throw new Exception(\"导出带模板的Excel文件异常\", e); } } } catch (Exception e) { throw new Exception(e); } finally { if (workbook != null) { workbook.close(); } if (outputStream != null) { outputStream.flush(); outputStream.close(); } } } /** * 生成文件 - 返回流 * * @param dataList 数据 * @throws Exception 异常 */ public byte[] createWorkbook(List&lt;Map&lt;String, Object&gt;&gt; dataList) throws Exception { ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); try (SXSSFWorkbook sxssfWorkbook = new SXSSFWorkbook(this.workbook, dataList.size())) { if (this.isNew) { try { Sheet sheet = sxssfWorkbook.createSheet(this.sheetName != null ? this.sheetName : \"Sheet1\"); this.setRowData(sheet, 0, dataList); //强制让改Sheet执行公式 sheet.setForceFormulaRecalculation(true); sxssfWorkbook.write(byteArrayOutputStream); } catch (Exception e) { e.printStackTrace(); throw new Exception(\"导出新创建的Excel文件异常\", e); } } else { try { Sheet sheet = sxssfWorkbook.getSheetAt(this.sheetIndex); this.setRowData(sheet, sheetIndex, dataList); //强制让改Sheet执行公式 sheet.setForceFormulaRecalculation(true); sxssfWorkbook.write(byteArrayOutputStream); } catch (Exception e) { e.printStackTrace(); throw new Exception(\"导出带模板的Excel文件异常\", e); } } return byteArrayOutputStream.toByteArray(); } catch (Exception e) { throw new Exception(e); } finally { byteArrayOutputStream.flush(); byteArrayOutputStream.close(); } } private void setRowData(Sheet sheet, int sheetIndex, List&lt;Map&lt;String, Object&gt;&gt; dataList) throws Exception { try { if (dataList != null) { // 赋值内容 for (Map&lt;String, Object&gt; rowMap : dataList) { Row row = sheet.createRow(Integer.parseInt(String.valueOf(rowMap.get(\"cellRow\")))); List&lt;Map&lt;String, Object&gt;&gt; cellDataList = (List&lt;Map&lt;String, Object&gt;&gt;) rowMap.get(\"cellData\"); this.executeCellValue(sheetIndex, row, cellDataList); } } if (this.removeSheet.length &gt; 0) { // 删除页 for (String s : this.removeSheet) { this.workbook.removeSheetAt(this.workbook.getSheetIndex(s)); } } } catch (Exception e) { throw new Exception(e); } } private void executeCellValue(int sheetIndex, Row row, List&lt;Map&lt;String, Object&gt;&gt; cellDataList) { for (Map&lt;String, Object&gt; rowCellData : cellDataList) { Cell cell = row.createCell(Integer.parseInt(String.valueOf(rowCellData.get(\"cellColumn\")))); Object cellValue = rowCellData.get(\"cellValue\"); switch (String.valueOf(rowCellData.get(\"cellType\"))) { case \"-1\": //未知类型，不填值 cell.setCellType(CellType._NONE); break; case \"0\": // 数字- 整数：如：0 cell.setCellType(CellType.NUMERIC); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellValue(String.valueOf(cellValue)); } break; case \"1\": // 数字- 小数：如：0.01 cell.setCellType(CellType.NUMERIC); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellValue(Double.parseDouble(String.valueOf(cellValue))); } break; case \"2\": // 数字- 日期：如：2021-09-03 cell.setCellType(CellType.NUMERIC); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellValue(String.valueOf(cellValue)); } break; case \"3\": // 字符串类型 cell.setCellType(CellType.STRING); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellValue(String.valueOf(cellValue)); } break; case \"4\": // 计算公式 cell.setCellType(CellType.FORMULA); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellFormula(String.valueOf(cellValue)); } break; case \"5\": // 布尔类型 cell.setCellType(CellType.BOOLEAN); if (cellValue != null &amp;&amp; String.valueOf(cellValue).length() &gt; 0) { cell.setCellValue(Boolean.parseBoolean(String.valueOf(cellValue))); } break; case \"6\": // 空 cell.setCellType(CellType.BLANK); break; case \"7\": // 错误 cell.setCellType(CellType.ERROR); cell.setCellErrorValue(new Byte(String.valueOf(cellValue))); break; default: //其他一律string类型，在赋值 cell.setCellType(CellType.STRING); cell.setCellValue(String.valueOf(cellValue)); break; } // 设置列格式 if (rowCellData.containsKey(\"cellStyle\")) { switch (String.valueOf(rowCellData.get(\"cellStyle\"))) { case \"1\": // 常规 break; case \"8\": // 百分比 CellStyle style = this.workbook.createCellStyle(); style.setDataFormat(this.workbook.createDataFormat().getFormat(\"0.000%\")); cell.setCellStyle(style); break; default: break; } } // 设置自定义的宽度 if (rowCellData.containsKey(\"cellColumnWidth\")) { int cellColumn = Integer.parseInt(String.valueOf(rowCellData.get(\"cellColumn\"))); int cellColumnWidth = Integer.parseInt(String.valueOf(rowCellData.get(\"cellColumnWidth\"))); this.workbook.getSheetAt(sheetIndex).setColumnWidth(cellColumn, cellColumnWidth); } } }} 使用1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283@Testpublic void 测试Excel导出_创建新文件() { try { ExcelUtil2 excelUtil2 = new ExcelUtil2(); List&lt;Map&lt;String, Object&gt;&gt; dataList = new ArrayList&lt;&gt;(); List&lt;Map&lt;String, Object&gt;&gt; columnList = new LinkedList&lt;&gt;(); columnList.add(excelUtil2.addColumnData(0,\"编号\",\"编号\", \"3\",1000)); columnList.add(excelUtil2.addColumnData(1,\"代码\",\"代码\", \"3\")); columnList.add(excelUtil2.addColumnData(2,\"名称\",\"代码\", \"3\")); dataList.add(excelUtil2.addRowData(0, columnList)); excelUtil2.createWorkbook(dataList, new File(\"D:\\\\test\\\\334.xlsx\")); } catch (Exception e) { e.printStackTrace(); }}@Testpublic void 测试Excel导出_模板文件续写() { try { FileInputStream fileInputStream = FileUtils.openInputStream(new File(\"D:\\\\test\\\\334.xlsx\")); ExcelUtil2 excelUtil2 = new ExcelUtil2(0, fileInputStream); List&lt;Map&lt;String, Object&gt;&gt; dataList = new ArrayList&lt;&gt;(); List&lt;Map&lt;String, Object&gt;&gt; columnList = new LinkedList&lt;&gt;(); columnList.add(excelUtil2.addColumnData(0,\"编号\",\"0\", \"1\")); columnList.add(excelUtil2.addColumnData(1,\"代码\",\"CC\", \"3\")); columnList.add(excelUtil2.addColumnData(2,\"名称\",\"123\", \"0\")); dataList.add(excelUtil2.addRowData(1, columnList)); excelUtil2.createWorkbook(dataList, new File(\"D:\\\\test\\\\334.xlsx\")); } catch (Exception e) { e.printStackTrace(); }}@Testpublic void 获取Excel模板文件的公式() { try { FileInputStream fileInputStream = FileUtils.openInputStream(new File(\"D:\\\\test\\\\334.xlsx\")); Workbook workbook = new XSSFWorkbook(fileInputStream); Sheet sheetAt = workbook.getSheetAt(0); Cell cell1 = sheetAt.getRow(0).getCell(12); System.out.println(cell1.getStringCellValue()); } catch (IOException e) { e.printStackTrace(); }}@Testpublic void 测试Excel模板导出2_指定页导出() { try { List&lt;Map&lt;String, Object&gt;&gt; sourceDataList = new ArrayList&lt;&gt;(); Map&lt;String, Object&gt; map1 = new LinkedHashMap&lt;&gt;(); map1.put(\"key0\", \"0\"); map1.put(\"key1\", \"CC\"); map1.put(\"key2\", \"123\"); map1.put(\"key3\", \"456\"); map1.put(\"key4\", \"789.88\"); sourceDataList.add(map1); // 获取指定页 ExcelUtil2 excelUtil2 = new ExcelUtil2(\"Sheet2\", new FileInputStream(new File(\"D:\\\\test\\\\334.xlsx\"))); // 删除多余页 excelUtil2.removeSheet(new String[]{\"Sheet1\"}); List&lt;Map&lt;String, Object&gt;&gt; dataList = new ArrayList&lt;&gt;(); // 开始行 int startNum = 1; for (int i = 0; i &lt; sourceDataList.size(); i++) { List&lt;Map&lt;String, Object&gt;&gt; columnList = new LinkedList&lt;&gt;(); int cellRow = startNum + i; Map&lt;String, Object&gt; objectMap = sourceDataList.get(i); columnList.add(excelUtil2.addColumnData(0, \"编号1\", objectMap.get(\"key0\"), \"1\")); columnList.add(excelUtil2.addColumnData(1, \"代码2\", objectMap.get(\"key1\"), \"3\")); columnList.add(excelUtil2.addColumnData(2, \"名称3\", objectMap.get(\"key2\"), \"1\")); columnList.add(excelUtil2.addColumnData(3, \"名称4\", objectMap.get(\"key3\"), \"1\")); columnList.add(excelUtil2.addColumnData(4, \"名称5\", objectMap.get(\"key4\"), \"1\")); columnList.add(excelUtil2.addColumnData(5, \"公式列\", \"=C\" + (cellRow + 1) + \"/D\" + (cellRow + 1), \"4\", \"8\")); // 写入 dataList.add(excelUtil2.addRowData(cellRow, columnList)); } excelUtil2.setSheetName(excelUtil2.getSheetIndex(), \"自定义\" + excelUtil2.getSheetName()); excelUtil2.createWorkbook(dataList, new File(\"D:\\\\test\\\\3344.xlsx\")); } catch (Exception e) { e.printStackTrace(); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Excel","slug":"Excel","permalink":"https://www.zhuqiaolun.com/tags/Excel/"}]},{"title":"POI(3.17)解析Excel2007 - 可解析公式数据","slug":"2020/11/1605159781717/1605159781717","date":"2020-11-12T05:43:01.000Z","updated":"2021-11-06T10:11:23.728Z","comments":false,"path":"2020/11/1605159781717/1605159781717/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605159781717/1605159781717/","excerpt":"POI解析Excel文件","text":"依赖123456789101112131415&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml-schemas&lt;/artifactId&gt; &lt;version&gt;3.17&lt;/version&gt;&lt;/dependency&gt; 解析123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177import com.alibaba.fastjson.JSONArray;import com.alibaba.fastjson.JSONObject;import org.apache.commons.lang3.StringUtils;import org.apache.poi.hssf.usermodel.HSSFWorkbook;import org.apache.poi.ss.usermodel.*;import org.apache.poi.xssf.usermodel.XSSFWorkbook;import java.io.FileInputStream;import java.io.FileOutputStream;import java.io.IOException;import java.io.OutputStream;import java.util.ArrayList;import java.util.LinkedHashMap;import java.util.List;import java.util.Map;/** * className ExcelUtil * author demon * createTime 2021/6/25 11:32 */public class ExcelUtil { private static NumberFormat numberFormat = NumberFormat.getNumberInstance(); static { numberFormat.setGroupingUsed(false); // 最大小数保留位数 numberFormat.setMaximumFractionDigits(9); } /** * 根据读取，文件流解析Excel文件 * * @param fileName 文件名 * @param sheetIndex sheet页码 * @param input 文件流 * @return 返回 * @throws IOException 异常 */ public static List&lt;Map&lt;String, String&gt;&gt; getDataToInput(String fileName, int sheetIndex, FileInputStream input) throws IOException { return getData(fileName, sheetIndex, input); } /** * 根据文件绝对路径，解析Excel文件 * * @param fileName 文件名 * @param sheetIndex sheet页码 * @param filePath 文件路径 * @return 返回 * @throws IOException 异常 */ public static List&lt;Map&lt;String, String&gt;&gt; getDataToFilePath(String fileName, int sheetIndex, String filePath) throws IOException { return getData(fileName, sheetIndex, new FileInputStream(filePath)); } /** * 解析数据 */ private static List&lt;Map&lt;String, String&gt;&gt; getData(String fileName, int sheetIndex, FileInputStream input) throws IOException { List&lt;Map&lt;String, String&gt;&gt; mapList = new ArrayList&lt;&gt;(); if (ExcelUtil.isExcel2003(fileName)) { Workbook workbook = new HSSFWorkbook(input); // 拿到计算公式 getDataToExcel(workbook, sheetIndex, input, mapList); } else if (ExcelUtil.isExcel2007(fileName)) { Workbook workbook = new XSSFWorkbook(input); getDataToExcel(workbook, sheetIndex, input, mapList); } System.out.println(JSON.toJSONString(mapList)); return mapList; } private static void getDataToExcel(Workbook workbook, int sheetIndex, FileInputStream input, List&lt;Map&lt;String, String&gt;&gt; mapList) throws IOException { try { FormulaEvaluator formulaEvaluator = workbook.getCreationHelper().createFormulaEvaluator(); // 获得第一个表单 Sheet sheet = workbook.getSheetAt(sheetIndex); // 获得第一行表头，计算列数 int columnNum = sheet.getRow(0).getPhysicalNumberOfCells(); // 遍历数据 行 sheet.rowIterator().forEachRemaining(row -&gt; { Map&lt;String, String&gt; jsonMap = new LinkedHashMap&lt;&gt;(); // 遍历列 for (int i = 0; i &lt; columnNum; i++) { Cell cell = row.getCell(i); if (cell != null) { // 读取值 jsonMap.put(String.valueOf(i), getCellFormatValue(formulaEvaluator, cell)); } else { jsonMap.put(String.valueOf(i), \"\"); } } mapList.add(jsonMap); }); } catch (Exception e) { System.out.println(\"解析xlsx文件错误\"); throw new IOException(e); } finally { if (input != null) { try { input.close(); } catch (Exception e) { e.printStackTrace(); } } if (workbook != null) { try { workbook.close(); } catch (Exception e) { e.printStackTrace(); } } } } /** * 判断是否为老版本的excel * * @param filePath *.xls * @return 返回 */ private static boolean isExcel2003(String filePath) { return StringUtils.isNotEmpty(filePath) &amp;&amp; filePath.matches(\"^.+\\\\.(?i)(xls)$\"); } /** * 判断是否为新版本的excel * * @param filePath *.xlsx * @return 返回 */ private static boolean isExcel2007(String filePath) { return StringUtils.isNotEmpty(filePath) &amp;&amp; filePath.matches(\"^.+\\\\.(?i)(xlsx)$\"); } private static String getCellFormatValue(FormulaEvaluator formulaEvaluator, Cell cell) { String val; // 根据cell中的类型来输出数据 switch (cell.getCellTypeEnum()) { case NUMERIC: // 数字 if (org.apache.poi.ss.usermodel.DateUtil.isCellDateFormatted(cell)) { // 时间类型 val = Long.toString(cell.getDateCellValue().getTime()); } else { // 数字类型 - 普通数字33 val = numberFormat.format(cell.getNumericCellValue()); } break; case STRING: // 字符串类型 val = cell.getStringCellValue(); break; case BOOLEAN: // 布尔类型 val = Boolean.toString(cell.getBooleanCellValue()); break; case FORMULA: // 计算公式 val = formulaEvaluator.evaluate(cell).formatAsString(); break; case BLANK: // 空 val = cell.getStringCellValue(); break; default: //如果是不知道的类型， 首先强制设置成string类型，再取值 val = cell.getStringCellValue(); break; } return val; }} 使用第一种： 12345678try { String filePath = \"D:\\\\test\\\\test.xlsx\"; FileInputStream fileInputStream = new FileInputStream(new File(filePath)); List&lt;Map&lt;String,String&gt;&gt; mapList = ExcelUtil.getDataToInput(fileInputStream); System.out.println(mapList.size());} catch (IOException e) { e.printStackTrace();} 第二种： 1234567try { String filePath = \"D:\\\\test\\\\test.xlsx\"; List&lt;Map&lt;String,String&gt;&gt; mapList = ExcelUtil.getDataToFilePath(filePath); System.out.println(mapList.size());} catch (IOException e) { e.printStackTrace();} 12345678910111213141516171819202122232425262728293031String fileName = \"test.xlsx\";String filePath = \"D:\\\\test\\\\test.xlsx\";try { List&lt;Map&lt;String, String&gt;&gt; dataToInput = ExcelUtil.getDataToFilePath(fileName, 0, filePath); List&lt;Map&lt;String, String&gt;&gt; dataList = dataToInput.subList(1, dataToInput.size()); Set&lt;String&gt; 编号Set = new LinkedHashSet&lt;&gt;(); for (Map&lt;String, String&gt; stringMap : dataList) { String documentNo = stringMap.get(\"0\"); if (StringUtils.isNotBlank(documentNo)) { // 转化公式值 String[] replaceStr = {\"3\",\"4\",\"6\",\"7\",\"11\",\"13\",\"19\",\"22\"}; for (String s : replaceStr) { String replaceStrVal = stringMap.get(s).replace(\"\\\"\", \"\"); stringMap.put(s, replaceStrVal); } // 转化数字值 String[] doubleStr = {\"0\",\"9\"}; for (String s : doubleStr) { String doubleStrVal = new DecimalFormat(\"0\").format(new Double(stringMap.get(s))); stringMap.put(s, doubleStrVal); } } else { continue; } 编号Set.add(stringMap.get(\"0\")); } System.out.println(JSON.toJSONString(编号Set)); System.out.println(JSON.toJSONString(dataList));} catch (IOException e) { e.printStackTrace();} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Excel","slug":"Excel","permalink":"https://www.zhuqiaolun.com/tags/Excel/"}]},{"title":"对响应值Response的封装使用(可格式化Json格式数据)","slug":"2020/11/1605079334142/1605079334142","date":"2020-11-11T07:22:14.000Z","updated":"2021-03-10T02:54:54.067Z","comments":false,"path":"2020/11/1605079334142/1605079334142/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605079334142/1605079334142/","excerpt":"对响应值Response的封装使用","text":"配置返回的json中忽略null属性值，不传递pom引入: 1234567891011&lt;!-- lombok --&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;!-- jackson --&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&lt;/dependency&gt; 第一种，在yml中写入（全局）： 123spring: jackson: default-property-inclusion: non_null 第二种，在应用类上写入（局部）： 1@JsonInclude(JsonInclude.Include.NON_NULL) 类ResponseBean： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import com.fasterxml.jackson.annotation.JsonIgnore;import com.fasterxml.jackson.annotation.JsonInclude;import com.fasterxml.jackson.databind.ObjectMapper;import lombok.Data;import lombok.SneakyThrows;import lombok.experimental.Accessors;import java.io.Serializable;/** * @author: Demon * @date 2021/3/8 13:27 * @description: 返回的JSON数据结构标准 */@Data@Accessors(chain = true)public class ResponseBean implements Serializable { private boolean success = false; private Object data; private String msg; private String errCode; private String errMsg; @JsonIgnore private boolean dataFormat = false; @SneakyThrows @Override public String toString() { ObjectMapper objectMapper = new ObjectMapper(); objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); ResponseBeanVo responseBeanVo = new ResponseBeanVo() .setSuccess(this.isSuccess()).setData(this.getData()).setMsg(this.getMsg()) .setErrCode(this.getErrCode()).setErrMsg(this.getErrMsg()); if (this.isDataFormat()) { return objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(responseBeanVo); } else { return objectMapper.writer().writeValueAsString(responseBeanVo); } }}@Data@Accessors(chain = true)class ResponseBeanVo implements Serializable { private boolean success; private Object data; private String msg; private String errCode; private String errMsg;} BaseController12345678910111213141516171819202122232425262728/** * @className: BaseController.java * @description: 基本 * @author: Demon */public abstract class BaseController { /** * 使用response输出JSON * @param response response * @param str 响应对应 */ protected void out(HttpServletResponse response, Object str) { PrintWriter out = null; try { response.setCharacterEncoding(\"UTF-8\"); response.setContentType(\"application/json\"); out = response.getWriter(); out.print(str); } catch (Exception e) { log.error(\"输出JSON出错\",e.getMessage()); } finally { if (out != null) { out.flush(); out.close(); } } }} 使用123456789101112131415161718192021import org.springframework.web.bind.annotation.*;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;/** * @ClassName: IndexController * @Description: 控制层测试 * @Author: Demon */@RestControllerpublic class TestController extends BaseController { @RequestMapping(method = {RequestMethod.GET,RequestMethod.POST}) public @ResponseBody void getIndex(HttpServletResponse response) { ResponseBean responseBean = new ResponseBean(); responseBean.setSuccess(true); responseBean.setDataFormat(true); this.out(response,responseBean); }} 结果： 123{ \"success\" : true} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Java的普通类获取注册的bean","slug":"2020/11/1605079105126/1605079105126","date":"2020-11-11T07:18:25.000Z","updated":"2021-03-01T06:46:25.859Z","comments":false,"path":"2020/11/1605079105126/1605079105126/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605079105126/1605079105126/","excerpt":"SpringBoot的ApplicationContext","text":"配置12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import org.springframework.beans.BeansException;import org.springframework.context.ApplicationContext;import org.springframework.context.ApplicationContextAware;import org.springframework.stereotype.Component;/** * @className: ApplicationContextHelper.java * @description: 获取 ApplicationContext * @author: Demon */@Componentpublic class ApplicationContextHelper implements ApplicationContextAware { private static ApplicationContext appCtx; @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException { System.out.println(\"初始化applicationContext：\"+applicationContext.getBeanDefinitionNames().length); appCtx = applicationContext; } /** * 通过name获取 Bean. * @param name bean名 * @return 返回 */ public static Object getBean(String name) { return appCtx.getBean(name); } /** * 通过class获取Bean. * @param clazz bean类 * @return 返回 */ public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz) { return appCtx.getBean(clazz); } /** * 通过name,以及Clazz返回指定的Bean * @param name bean名 * @param clazz bean类 * @return 返回 */ public static &lt;T&gt; T getBean(String name, Class&lt;T&gt; clazz) { return appCtx.getBean(name, clazz); }} 使用获取 RestTemplate 的 bean 1RestTemplate restTemplate = ApplicationContextHelper.getBean(RestTemplate.class); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"MD5加密工具","slug":"2020/11/1605078934677/1605078934677","date":"2020-11-11T07:15:34.000Z","updated":"2021-03-01T06:46:25.211Z","comments":false,"path":"2020/11/1605078934677/1605078934677/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605078934677/1605078934677/","excerpt":"Java工具类 - MD5加密工具","text":"1234567891011121314151617181920212223242526272829303132333435import java.security.MessageDigest;/** * @ClassName: MD5Util * @Description: MD5加密工具 * @Author: Demon */public class MD5Util { private static final String SALT = \"demon\"; public static String encode(String password) { password = password + SALT; MessageDigest md5; try { md5 = MessageDigest.getInstance(\"MD5\"); } catch (Exception e) { throw new RuntimeException(e); } char[] charArray = password.toCharArray(); byte[] byteArray = new byte[charArray.length]; for (int i = 0; i &lt; charArray.length; i++) { byteArray[i] = (byte) charArray[i]; } byte[] md5Bytes = md5.digest(byteArray); StringBuilder hexValue = new StringBuilder(); for (byte md5Byte : md5Bytes) { int val = ((int) md5Byte) &amp; 0xff; if (val &lt; 16) { hexValue.append(\"0\"); } hexValue.append(Integer.toHexString(val)); } return hexValue.toString(); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"获取当前登录用户IP(web)","slug":"2020/11/1605078705487/1605078705487","date":"2020-11-11T07:11:45.000Z","updated":"2021-05-13T05:50:30.758Z","comments":false,"path":"2020/11/1605078705487/1605078705487/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605078705487/1605078705487/","excerpt":"Java工具类 - 获取当前登录用户IP","text":"此方法采用的 HttpServletRequest 获取，故使用web项目，说明，当存在使用 虚拟机 的情况，会导致获取的IP为 以太网适配器 的IP 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475import javax.servlet.http.HttpServletRequest;import java.net.InetAddress;import java.net.UnknownHostException;import java.util.Arrays;/** * @ClassName: IpUtil * @Description: 获取当前登录用户IP * @Author: Demon */public class IpUtil { private static final String[] LOCAL_IP = {\"127.0.0.1\",\"localhost\",\"0:0:0:0:0:0:0:1\"}; private static final String UNKNOWN = \"unknown\"; public static String getIpAddr(HttpServletRequest request) { String ipAddress; try { ipAddress = request.getHeader(\"x-forwarded-for\"); if (ipAddress == null || ipAddress.length() == 0 || UNKNOWN.equalsIgnoreCase(ipAddress)) { ipAddress = request.getHeader(\"Proxy-Client-IP\"); } if (ipAddress == null || ipAddress.length() == 0 || UNKNOWN.equalsIgnoreCase(ipAddress)) { ipAddress = request.getHeader(\"WL-Proxy-Client-IP\"); } if (ipAddress == null || ipAddress.length() == 0 || UNKNOWN.equalsIgnoreCase(ipAddress)) { ipAddress = request.getRemoteAddr(); if (Arrays.asList(LOCAL_IP).contains(ipAddress)) { // 根据网卡取本机配置的IP InetAddress inet = null; try { inet = InetAddress.getLocalHost(); } catch (UnknownHostException e) { e.printStackTrace(); } assert inet != null; ipAddress = inet.getHostAddress(); } } // 对于通过多个代理的情况，第一个IP为客户端真实IP,多个IP按照','分割 // \"***.***.***.***\".length() if (ipAddress != null &amp;&amp; ipAddress.length() &gt; 15) { // = 15 if (ipAddress.indexOf(\",\") &gt; 0) { ipAddress = ipAddress.substring(0, ipAddress.indexOf(\",\")); } } } catch (Exception e) { ipAddress = \"\"; } return ipAddress; } /** * 判断IP地址的合法性，这里采用了正则表达式的方法来判断 * return true，合法 * */ public static boolean ipCheck(String text) { if (text != null &amp;&amp; !text.isEmpty()) { // 定义正则表达式 String regex = \"^(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|[1-9])\\\\.\"+ \"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\.\"+ \"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\.\"+ \"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)$\"; // 判断ip地址是否与正则表达式匹配 // 返回判断信息 // 返回判断信息 return text.matches(regex); } return false; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"实体对象与Map之间的转换工具类","slug":"2020/11/1605077732135/1605077732135","date":"2020-11-11T06:55:32.000Z","updated":"2021-03-01T06:46:25.989Z","comments":false,"path":"2020/11/1605077732135/1605077732135/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605077732135/1605077732135/","excerpt":"Java工具类 - 实体对象与Map之间的转换工具类","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import java.lang.reflect.Field;import java.util.LinkedHashMap;import java.util.Map;/** * @ClassName: EntityUtil * @Description: 实体对象与Map之间的转换工具类 * @Author: Demon */public class EntityUtil { /** * 实体类转Map * @param object 对象 * @return 返回 */ public static Map&lt;String, Object&gt; entityToMap(Object object) { if (object == null) { return null; } Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(); for (Field field : object.getClass().getDeclaredFields()){ try { boolean flag = field.isAccessible(); field.setAccessible(true); Object o = field.get(object); map.put(field.getName(), o); field.setAccessible(flag); } catch (Exception e) { e.printStackTrace(); } } return map; } /** * Map转实体类 * @param map 需要初始化的数据，key字段必须与实体类的成员名字一样，否则赋值为空 * @param entity 需要转化成的实体类 * @return 返回 */ public static &lt;T&gt; T mapToEntity(Map&lt;String, Object&gt; map, Class&lt;T&gt; entity) { T t = null; try { t = entity.newInstance(); for(Field field : entity.getDeclaredFields()) { if (map.containsKey(field.getName())) { boolean flag = field.isAccessible(); field.setAccessible(true); Object object = map.get(field.getName()); if (object!= null &amp;&amp; field.getType().isAssignableFrom(object.getClass())) { field.set(t, object); } field.setAccessible(flag); } } return t; } catch (InstantiationException | IllegalAccessException e) { e.printStackTrace(); } return t; }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"SpringBoot 静态资源处理","slug":"2020/11/1605076979058/1605076979058","date":"2020-11-11T06:42:59.000Z","updated":"2021-03-01T06:46:25.882Z","comments":false,"path":"2020/11/1605076979058/1605076979058/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605076979058/1605076979058/","excerpt":"配置SpringBoot的资源路径","text":"配置123456789101112131415161718192021import org.springframework.context.annotation.Configuration;import org.springframework.util.ResourceUtils;import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;/** * @className: WebMvcConfig.java * @description: WebMvc配置 * @author: Demon */@Configurationpublic class WebMvcConfig implements WebMvcConfigurer { @Override public void addResourceHandlers(ResourceHandlerRegistry registry) { // 配置模板资源路径 registry.addResourceHandler(\"/templates/**\").addResourceLocations(ResourceUtils.CLASSPATH_URL_PREFIX+\"/templates/\"); registry.addResourceHandler(\"/static/**\").addResourceLocations(ResourceUtils.CLASSPATH_URL_PREFIX+\"/static/\"); registry.addResourceHandler(\"/public/**\").addResourceLocations(ResourceUtils.CLASSPATH_URL_PREFIX+\"/public/\"); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"解决IE浏览器  @ResponseBody 返回json的时候提示下载问题","slug":"2020/11/1605076219103/1605076219103","date":"2020-11-11T06:30:19.000Z","updated":"2021-03-01T06:46:25.600Z","comments":false,"path":"2020/11/1605076219103/1605076219103/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1605076219103/1605076219103/","excerpt":"解决IE浏览器 @ResponseBody 返回json的时候提示下载问题","text":"配置12345678910111213141516171819202122232425262728import org.springframework.context.annotation.Configuration;import org.springframework.http.MediaType;import org.springframework.http.converter.HttpMessageConverter;import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;import java.nio.charset.Charset;import java.util.ArrayList;import java.util.List;/** * @className: WebMvcConfig.java * @description: WebMvc配置 * @author: Demon */@Configurationpublic class WebMvcConfig implements WebMvcConfigurer { @Override public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) { MappingJackson2HttpMessageConverter jsonConverter = new MappingJackson2HttpMessageConverter(); List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;(); MediaType media = new MediaType(MediaType.TEXT_HTML, Charset.forName(\"UTF-8\")); supportedMediaTypes.add(media); jsonConverter.setSupportedMediaTypes(supportedMediaTypes); converters.add(jsonConverter); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"发布Java程序为Windows服务 - Windows Service Wrapper 四","slug":"2020/11/1604299054941/1604299054941","date":"2020-11-02T06:37:34.000Z","updated":"2021-05-13T02:58:33.219Z","comments":false,"path":"2020/11/1604299054941/1604299054941/","link":"","permalink":"https://www.zhuqiaolun.com/2020/11/1604299054941/1604299054941/","excerpt":"Windows Service Wrapper","text":"Windows Service WrapperWindows Service Wrapper 可以将 Java 的 jar 包注册为 windows 服务。项目：https://github.com/winsw/winsw地址：https://github.com/winsw/winsw/releases 下载官方 GitHub下载 WinSW.NET4.exe 和 sample-minimal.xml选择 WinSW v2.10.3 版本下载WinSW.NET4.exe ：https://github.com/winsw/winsw/releases/download/v2.10.3/WinSW.NET4.exesample-minimal.xml ：https://github.com/winsw/winsw/releases/download/v2.10.3/sample-minimal.xml 配置新建目录，例如： MyApp 文件内容： 1234567891011bin: 属于服务的命名以及配置 - MyApp.exe - MyApp.xmlconf：一些需要的文件配置 jre：属于Java的运行环境lib：属于程序的执行包log：输出日志文件夹 MyApp.xml配置过程中注意目录情况，%BASE% 是以exe所在的目录为根目录 1234567891011121314151617181920212223&lt;service&gt; &lt;!-- 服务名称 --&gt; &lt;id&gt;MyApp&lt;/id&gt; &lt;!-- 服务显示名称 --&gt; &lt;name&gt;My App Service&lt;/name&gt; &lt;!-- 服务描述 --&gt; &lt;description&gt;通过wapper注册成Windows服务&lt;/description&gt; &lt;!-- java环境变量 --&gt; &lt;!--当前电脑配置了java环境变量，直接写成“java”就行；你也可以写成类似这样：C:\\jdk1.8\\jre\\bin\\java--&gt; &lt;executable&gt;%BASE%\\..\\jre\\bin\\java&lt;/executable&gt; &lt;!--启动参数--&gt; &lt;arguments&gt;-jar %BASE%\\..\\lib\\MyApp.jar\"&lt;/arguments&gt; &lt;!-- 开机启动 --&gt; &lt;startmode&gt;Automatic&lt;/startmode&gt; &lt;!-- 日志配置 &lt;logmode&gt;rotate&lt;/logmode&gt; --&gt; &lt;logpath&gt;%BASE%\\..\\log&lt;/logpath&gt; &lt;log mode=\"roll-by-time\"&gt; &lt;pattern&gt;yyyyMMdd&lt;/pattern&gt; &lt;/log&gt;&lt;/service&gt; 运行以管理员身份运行 bat文件，进行 windows 服务操作 bat注册服务 service install.bat 12@echo offstart bin\\MyApp.exe install 卸载服务 service uninstall.bat 12@echo offstart bin\\MyApp.exe uninstall 启动服务 service start.bat 12@echo offstart bin\\MyApp.exe start 停止服务 service stop.bat 12@echo offstart bin\\MyApp.exe stop 重启服务 service restart.bat 12@echo offstart bin\\MyApp.exe restart 服务状态 service status.bat 12@echo offstart bin\\MyApp.exe status 链接发布Java程序为Windows服务 （含有Java环境）一发布Java程序为Windows服务 （不含有Java环境）二发布Java程序为Windows服务 （修改配置参数，新增对 jvm 的配置）三 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Nginx一个server配置多个location","slug":"2020/10/1602671313615/1602671313615","date":"2020-10-14T10:28:33.000Z","updated":"2021-03-10T06:05:11.573Z","comments":false,"path":"2020/10/1602671313615/1602671313615/","link":"","permalink":"https://www.zhuqiaolun.com/2020/10/1602671313615/1602671313615/","excerpt":"Nginx一个server配置多个location（alias与root的区别）","text":"nginx作为代理服务器，可以配置多个location，通过访问不同路径来访问不同目录。 配置123456789101112131415161718192021222324252627server { listen 80; #端口号 server_name localhost; location /video { #alias末尾必须要用/结束 alias html/video/; index index.html index.htm; } location /music { #alias末尾必须要用/结束 alias html/music/; index index.html index.htm; } location / { #root末尾可以不用/结束 root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; }} 内容在music内放置文件 111.mp3在video内放置文件 222.mp4 访问http://localhost/http://localhost/music/111.mp3http://localhost/video/222.mp4 区别alias与root的区别：alias与root指定的url意义不同 root和alias都可以定义在location模块中，都是用来指定请求资源的真实路径，比如： location /music/ { root /data/file; } 请求 http://localhost/music/111.mp3 时，那么在服务器里面对应的真正的资源是：/opt/data/file/music/111.mp3，注意：root真实路径是root指定的值加上location指定的值。 而 alias 正如其名，alias指定的路径是location的别名，不管location的值怎么写，资源的真实路径都是 alias 指定的路径，比如： location /music/ { alias /data/file/; } 请求 http://localhost/music/111.mp3 时，那么在服务器里面对应的真正的资源是：/opt/data/file/111.mp3，注意：alias真实路径是alias指定的值，不包含location指定的值了。 扩展在一个location中，alias可以存在多个，但是root只能有一个，alias只能存在与location中，但是root可以用在server、http和location中，alias后面必须要“/”结束，否则会找不到文件，而root的“/”可有可无， document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://www.zhuqiaolun.com/tags/nginx/"}]},{"title":"Redis配置 之  设置密码","slug":"2020/09/1601271269577/1601271269577","date":"2020-09-28T05:34:29.000Z","updated":"2021-03-01T06:46:25.377Z","comments":false,"path":"2020/09/1601271269577/1601271269577/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1601271269577/1601271269577/","excerpt":"Redis配置 之 修改密码","text":"默认安装后的redis是没有密码的，这明显有很大的安全隐患，所以需要设置密码。这里提供2中方式 修改密码注：使用第二种，不知道怎么回滚为空密码 1.第一种方式（推荐）：修改配置文件“redis.windows-service.conf”，大约在 443 行：添加一下内容： requirepass 123456然后重启Redis服务，即可生效。如若去掉此行代码即属于设置密码为空。 2.第二种方式：使用命令方式进入链接后，输入 config set requirepass “你的密码”，本例为 123456，进行回车； 当显示为OK后，需要进行auth认证，当输入 auth后会出现 auth password，不用管password的出现，敲一下空格再输入密码(123456)回车即可； 更换密码输入命令：config set requirepass “” ；当密码为空时不用auth认证；且密码任意输入都可连接； 查看密码输入命令：config get requirepass document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/categories/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/tags/Redis/"}]},{"title":"Window10安装 Redis - 绿色版","slug":"2020/09/1601194986992/1601194986992","date":"2020-09-27T08:23:06.000Z","updated":"2021-05-13T02:53:39.490Z","comments":false,"path":"2020/09/1601194986992/1601194986992/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1601194986992/1601194986992/","excerpt":"Window10安装 Redis","text":"下载Redis下载地址：https://github.com/microsoftarchive/redis/releases传送门：https://github.com/microsoftarchive/redis/releases/download/win-3.2.100/Redis-x64-3.2.100.zip 对文件进行一个说明：Redis-x64-3.2.100.msi ：图形化安装文件Redis-x64-3.2.100.zip ：压缩文件安装包，需要解压安装Redis-x64-3.2.100.zip ：.zip压缩格式源码Redis-x64-3.2.100.tar.gz ：.gz压缩格式源码 安装点击下载后，需要先进行解压，解压文件如下： 运行双击运行目录下的 redis-server.exe，会加载自身存在的 conf 文件配置，采取默认的配置运行；出现以下画面即成功： 配置修改为加载目录下的 redis.windows.conf 文件配置，由于我修改了配置文件端口为 6377，故执行：Win+R –&gt; 运行cmd –&gt; 进入Redis的根目录下： D:\\Redis-x64-3.2.100&gt;redis-server.exe redis.windows.conf bat启动创建快捷启动，在根目录下，新建txt文件，填写以下内容，保存后修改txt的文件后缀为bat，双击即可启动； @echo off redis-server.exe redis.windows.conf @pause服务启动创建服务启动，可保存跟随系统启动自运行；执行：Win+R –&gt; 运行cmd –&gt; 进入Redis的根目录下： redis-server.exe --service-install redis.windows.conf出现 #Redis successfully installed as a service.即完成；可在服务列表中查看名称为【Rides】的服务； 扩展常用的redis服务命令，需在进入Redis的根目录下执行；安装服务：redis-server.exe –service-install redis.windows.conf开启服务：redis-server –service-start停止服务：redis-server –service-stop卸载服务：redis-server –service-uninstall document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/categories/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/tags/Redis/"}]},{"title":"Window10安装 Redis - 安装版","slug":"2020/09/1601194890597/1601194890597","date":"2020-09-27T08:21:30.000Z","updated":"2021-05-13T02:53:55.065Z","comments":false,"path":"2020/09/1601194890597/1601194890597/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1601194890597/1601194890597/","excerpt":"Window10安装 Redis","text":"Redis中文官方网站：http://www.redis.cn/ 下载Redis下载地址：https://github.com/microsoftarchive/redis/releases传送门：https://github.com/microsoftarchive/redis/releases/download/win-3.2.100/Redis-x64-3.2.100.msi 对文件进行一个说明：Redis-x64-3.2.100.msi ：图形化安装文件Redis-x64-3.2.100.zip ：压缩文件安装包，需要解压安装Redis-x64-3.2.100.zip ：.zip压缩格式源码Redis-x64-3.2.100.tar.gz ：.gz压缩格式源码 安装运行下载的msi文件，点击next; 1.勾选 I accept the terms in the License Agreement，点击next; 2.更换安装目录，以及添加到环境变量path,以便开机启动，命名执行 3.redis默认是 6379 端口，如果你不想用 6379 或者 6379 已经被其他程序占用，可以修改成其他端口。添加到windows防火墙的选项保持默认就好。 4.设置redis最大内存限制。默认100MB内存，但是可能是不够用的，所以改大一点，我这里修改成了1024MB。可以根据自己的实际情况来更改设置。 5.点击install即可 至此安装结束。 验证打开任务管理器，点击服务，查看服务列表中是否有一个名字叫做Redis的服务正在运行，如果有，说明安装并启动成功， 进入安装目录下，执行 redis-cli命令： 如果没有或者未成功启动，请删除服务之后对照如上步骤重新安装。删除redis服务命令为 sc delete 服务名 ，需要注意删除服务需要使用管理员身份打开命令行窗口执行命令。 sc delete Redis扩展使用的时候提示连不上，可以关闭保护模式：在redis安装目录找到“redis.windows-service.conf”：查找protected-mode yes 改为 protected-mode no document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/categories/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/tags/Redis/"}]},{"title":"Jackson 的 使用","slug":"2020/09/1601024145664/1601024145664","date":"2020-09-25T08:55:45.000Z","updated":"2021-07-02T02:50:57.449Z","comments":false,"path":"2020/09/1601024145664/1601024145664/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1601024145664/1601024145664/","excerpt":"Jackson 是当前用的比较广泛的，用来序列化和反序列化 json 的 Java 的开源框架","text":"依赖123456&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.11.0&lt;/version&gt;&lt;/dependency&gt; jackson-databind 依赖 jackson-core 和 jackson-annotations，当添加 jackson-databind 之后， jackson-core 和 jackson-annotations 也随之添加到 Java 项目工程中。在添加相关依赖包之后，就可以使用 Jackson。 配置信息//在反序列化时忽略在 json 中存在但 Java 对象不存在的属性 mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false); //在序列化时日期格式默认为 yyyy-MM-dd'T'HH:mm:ss.SSSZ mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,false) //在序列化时忽略值为 null 的属性 mapper.setSerializationInclusion(Include.NON_NULL); //忽略值为默认值的属性 mapper.setDefaultPropertyInclusion(Include.NON_DEFAULT);更多配置信息可以查看 Jackson 的 DeserializationFeature，SerializationFeature 和 Include。 注解Jackson 根据它的默认方式序列化和反序列化 java 对象，若根据实际需要，灵活的调整它的默认方式，可以使用 Jackson 的注解。常用的注解及用法如下： @JsonProperty：用于属性，把属性的名称序列化时转换为另外一个名称。 @JsonProperty(\"birth_date\") private Date birthDate;@JsonFormat：用于属性或者方法，把属性的格式序列化时转换成指定的格式。 @JsonFormat(timezone = \"GMT+8\", pattern = \"yyyy-MM-dd HH:mm:ss\") public Date birthDate;@JsonPropertyOrder：用于类，指定属性在序列化时 json 中的顺序。 @JsonPropertyOrder({ \"birth_date\", \"name\" }) public class Person{}使用Jackson 最常用的 API 就是基于”对象绑定” 的 ObjectMapper。writeValue：将 java 对 象序列化 为 json，并 将 json 存 储成不同的格式，String（writeValueAsString），Byte Array（writeValueAsString），Writer， File，OutStream 和 DataOutput。readValue：将不同的数据源像 String ， Byte Array， Reader，File，URL， InputStream 将 json 反序列化为 java 对象。 实体对象转化字符串 字符串转化键值对象 创建对象map： list： 示例1代码 12345678910111213141516171819202122232425try { ObjectMapper mapper = new ObjectMapper(); // 在反序列化时忽略在 json 中存在但 Java 对象不存在的属性 mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); //在序列化时忽略值为 null 的属性 mapper.setSerializationInclusion(Include.NON_NULL); Person person = new Person(); person.setName(\"demo\"); person.setAge(30); // 将实体对象转化Json字符串 String jsonString = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(person); System.out.println(jsonString); // 将Json字符串转化成实体对象 String jsonStringTemp = \"{\\\"name\\\" : \\\"demo\\\",\\\"age\\\" : 30 ,\\\"sex\\\":\\\"男\\\"}\"; System.out.println(jsonStringTemp); Person deserializedPerson = mapper.readValue(jsonStringTemp, Person.class); System.out.println(deserializedPerson); // 将Json字符串转化成键值对象 ObjectMapper objectMapper = new ObjectMapper(); Map&lt;String, Object&gt; jsonMap = objectMapper.readValue(jsonStringTemp, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {}); System.out.println(jsonMap); System.out.println(jsonMap.get(\"sex\"));} catch (JsonProcessingException e) { e.printStackTrace();} 结果： 12345678{ \"name\" : \"demo\", \"age\" : 30}{\"name\" : \"demo\",\"age\" : 30 ,\"sex\":\"男\"}Person [name=demo, sex=男, age=30]{name=demo, age=30, sex=男}男 示例2代码 123456789ObjectMapper objectMapper = new ObjectMapper();ObjectNode objectNode = objectMapper.createObjectNode();objectNode.put(\"name\", \"张三\");objectNode.put(\"age\", 30);ArrayNode arrayNode = objectMapper.createArrayNode();arrayNode.add(\"Java\");arrayNode.add(\"Python\");objectNode.set(\"job\", arrayNode);System.out.println(objectNode.toString()); 结果： 1{\"name\":\"张三\",\"age\":30,\"job\":[\"Java\",\"Python\"]} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"Maven在项目下的pom配置","slug":"2020/09/1600933059831/1600933059831","date":"2020-09-24T07:37:39.000Z","updated":"2021-03-01T06:46:25.623Z","comments":false,"path":"2020/09/1600933059831/1600933059831/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1600933059831/1600933059831/","excerpt":"Maven在项目下的pom配置","text":"properties版本信息 &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;skipTests&gt;true&lt;/skipTests&gt; &lt;/properties&gt;dependencies引入依赖 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.68&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;finalName 打包项目名称 &lt;finalName&gt;demon&lt;/finalName&gt;plugins使用插件 打包JDK版本: 12345678910&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;!-- 可能需要版本号 --&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt;&lt;/plugin&gt; 打出jar包源码sources： 12345678910111213&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; &lt;version&gt;2.1.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;attach-sources&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;jar&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; 打出无/有依赖的jar,jar-with-dependencies结尾的表示含有jar的文件:打包命令：clean assembly:assembly 12345678910111213141516171819202122232425&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt; &lt;descriptorRefs&gt; &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt; &lt;/descriptorRefs&gt; &lt;!-- 这部分可有可无,加上的话则直接生成可运行jar包 --&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;com.demon.App&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;make-assembly&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;assembly&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; 安装第三方的jar，即无法远程仓库下载的jar，安装在本地，然后就正常引入即可： 1234567891011121314151617181920212223 &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;install-external&lt;/id&gt; &lt;phase&gt;clean&lt;/phase&gt; &lt;configuration&gt; &lt;file&gt;${basedir}/src/lib/demon-0.0.1.jar&lt;/file&gt; &lt;repositoryLayout&gt;default&lt;/repositoryLayout&gt; &lt;groupId&gt;com.demon&lt;/groupId&gt; &lt;artifactId&gt;demon&lt;/artifactId&gt; &lt;version&gt;0.0.1&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;generatePom&gt;true&lt;/generatePom&gt; &lt;/configuration&gt; &lt;goals&gt; &lt;goal&gt;install-file&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; 代理仓库配置开启项目本身的代理仓库配置 &lt;repository&gt; &lt;id&gt;spring&lt;/id&gt; &lt;url&gt;https://maven.aliyun.com/repository/spring&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt;但有时，跟着上面的设置方法并不奏效，仍然还是从之前的镜像站中去下载。此时，我们需要去检查下 Maven 安装目录下的settings.xml： &lt;mirror&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; &lt;/mirror&gt;可以看到，在设置镜像时，mirrorOf设置为了“*”，意味所有的依赖都是从这个镜像上下载。完全不给Spring Snapshots机会了。 解决方法也简单，改为下面的方式： &lt;mirror&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;*,!spring-snapshots&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; &lt;/mirror&gt;mirrorOf设置为了“*,!spring-snapshots”，表示除了Spring Snapshots外，所有的依赖都将从这个镜像上下载。 mirrorOf的配置支持如下场景： *：所有依赖； external:*：所有不再本地和不是基于文件的依赖； repo,repo1：所有来自repo或者repo1仓库的依赖； *,!repo1：除了repo1外的所有依赖。即上面示例中的场景。 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/categories/Maven/"}],"tags":[{"name":"pom","slug":"pom","permalink":"https://www.zhuqiaolun.com/tags/pom/"}]},{"title":"Maven的pom","slug":"2020/09/1600931110662/1600931110662","date":"2020-09-24T07:05:10.000Z","updated":"2021-03-01T06:46:25.917Z","comments":false,"path":"2020/09/1600931110662/1600931110662/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1600931110662/1600931110662/","excerpt":"Maven的pom","text":"描述pom文件定于了一个maven项目的maven配置，一般pom文件的放在项目或者模块的根目录下。 maven的遵循约定大于配置，约定了如下的目录结构： ${basedir}：存放pom.xml和所有的子目录 ${basedir}/src/main/java：项目的java源代码 ${basedir}/src/main/resources：项目的资源文件，比如说properties文件、xml文件、application.yml等 ${basedir}/src/test/java：项目的测试类，比如说Junit代码 ${basedir}/src/test/resources：测试用的资源 ${basedir}/src/main/webapp/WEB-INF：web应用文件目录，web项目的信息，比如存放web.xml、本地图片、jsp视图页面，在springboot中无此目录 ${basedir}/target：打包输出目录，在IDEA中需要设置 ${basedir}/target/classes：编译输出目录 ${basedir}/target/test-classes：测试编译输出目录以下的内容属于根元素和必要配置 &lt;!-- 模型版本 --&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;!-- 公司或者组织的唯一标志，也是打包成jar包路径的依据 --&gt; &lt;!-- 例如com.demon.project，maven打包jar包的路径：/com/demon/project --&gt; &lt;groupId&gt;com.demon.project&lt;/groupId&gt; &lt;!-- 项目的唯一ID，一个groupId下面可能多个项目，就是靠artifactId来区分的 --&gt; &lt;artifactId&gt;demo&lt;/artifactId&gt; &lt;!-- 项目当前版本，格式为:主版本.次版本.增量版本-限定版本号 --&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;!--项目产生的构件类型，包括jar、war、pom等 --&gt; &lt;packaging&gt;jar&lt;/packaging&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/categories/Maven/"}],"tags":[{"name":"pom","slug":"pom","permalink":"https://www.zhuqiaolun.com/tags/pom/"}]},{"title":"在Windows下安装Maven环境","slug":"2020/09/1600927625377/1600927625377","date":"2020-09-24T06:07:05.000Z","updated":"2021-05-13T02:54:07.912Z","comments":false,"path":"2020/09/1600927625377/1600927625377/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1600927625377/1600927625377/","excerpt":"在Windows下安装Maven环境","text":"下载Mavenmaven 官网下载地址：https://maven.apache.org/download.cgimaven 文件下载地址：https://archive.apache.org/dist/maven/maven-3/下载 Binary 版本，点击箭头所指的链接进行下载传送门：https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.zip 解压文件 配置Maven环境变量打开环境变量界面： 新建系统变量：MAVEN_HOME，值为maven的根目录 修改系统变量：path,点击新建添加 %MAVEN_HOME%\\bin 验证Maven环境变量然后win+R 运行cmd 输入 mvn -version，如图所示则配置成功 修改本地仓库地址在maven根目录下打开conf目录可以找到settings文件，找到第53行，这里是maven默认的仓库，默认的仓库地址为当前用户的 .m文件夹下的repository目录内，在settings文件中有一个 localRepository 标签复制第53行，将它拿到注释外并将中间的内容改成你需要的路径，如图 &lt;localRepository&gt;D:\\apache\\Repositories\\Maven&lt;/localRepository&gt;表示本地仓库地址为D盘的xxxx目录下 配置Maven镜像在maven根目录下打开conf目录可以找到settings文件，找到第147行，Maven自身默认镜像 &lt;mirror&gt; &lt;id&gt;mirrorId&lt;/id&gt; &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt; &lt;/mirror&gt;由于默认镜像属于国外，下载jar很慢；所以需要配置国内的镜像 阿里云仓库（推荐）： &lt;mirror&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;阿里云公共仓库&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/mirror&gt;spring.io仓库: &lt;mirror&gt; &lt;id&gt;sprintio&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;https://repo.spring.io/libs-snapshot/&lt;/url&gt; &lt;/mirror&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/categories/Maven/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/tags/Maven/"}]},{"title":"Nginx 根据 不同项目 配置访问路径","slug":"2020/09/1600763525872/1600763525872","date":"2020-09-22T08:32:05.000Z","updated":"2022-02-10T05:56:55.238Z","comments":false,"path":"2020/09/1600763525872/1600763525872/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1600763525872/1600763525872/","excerpt":"Nginx 根据 不同项目 配置访问路径","text":"说明在Nginx 中 配置 upstream 代理服务器，由于 $scheme = http （return 301 ）会导致http的请求链接跳转https请求，故在http中不用配置。 在配置路径中使用根据URL请求不通的访问，需要保持顺序问题 第一访问tomcat里面的项目名《a》 location ~* .*tomcat-a.* { proxy_pass http://tomcat; proxy_set_header Host $http_host; }第二访问tomcat里面的项目名《b》 location ~* .*tomcat-b.* { proxy_pass http://tomcat; proxy_set_header Host $http_host; }第三访问nginx里面html文件夹的内容 location / { root html; index index.html index.htm; }在https中进行代理访问需要添加 proxy_set_header Host $http_host; 配置user root; worker_processes 1; events { worker_connections 1024; } http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; # 开启gzip压缩 gzip on; gzip_comp_level 5; gzip_min_length 1024; gzip_types text/plain application/x-javascript text/css application/xml text/javascript image/jpeg image/gif image/png; # 隐藏nginx版本信息 server_tokens off; upstream tomcat{ server www.zhuqiaolun.com:8080; } server { listen 80; server_name www.zhuqiaolun.com; if ($scheme = http ) { return 301 https://www.zhuqiaolun.com$request_uri; } #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } # HTTPS server # server { listen 443 ssl; server_name www.zhuqiaolun.com; #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。 root html; index index.html index.htm; ssl_certificate 1_www.zhuqiaolun.com_bundle.crt; ssl_certificate_key 2_www.zhuqiaolun.com.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location ~* .*tomcat-a.* { proxy_pass http://tomcat; expires 24h; add_header Cache-Control no-store; #Proxy Settings proxy_redirect off; proxy_set_header Host $http_host; proxy_set_header Cookie $http_cookie; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_max_temp_file_size 0; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; # 上传文件限制大小 client_max_body_size 100M; client_body_buffer_size 128k; } location ~* .*tomcat-b.* { proxy_pass http://tomcat; expires 24h; add_header Cache-Control no-store; #Proxy Settings proxy_redirect off; proxy_set_header Host $http_host; proxy_set_header Cookie $http_cookie; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_max_temp_file_size 0; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; # 上传文件限制大小 client_max_body_size 100M; client_body_buffer_size 128k; } location / { root html; index index.html index.htm; expires 24h; add_header Cache-Control no-store; #Proxy Settings proxy_redirect off; proxy_set_header Host $http_host; proxy_set_header Cookie $http_cookie; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_max_temp_file_size 0; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; # 上传文件限制大小 client_max_body_size 100M; client_body_buffer_size 128k; } } } document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://www.zhuqiaolun.com/tags/nginx/"}]},{"title":"tomcat配置https访问","slug":"2020/09/1599632929241/1599632929241","date":"2020-09-09T06:28:49.000Z","updated":"2021-03-10T06:06:38.150Z","comments":false,"path":"2020/09/1599632929241/1599632929241/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599632929241/1599632929241/","excerpt":"tomcat配置https访问","text":"生成安全证书因为SUN公司提供了制作证书的工具keytool。在JDK 1.4以后的版本中都包含了这一工具，它的位置为\\bin\\keytool.exe。 创建证书的命令keytool -genkeypair -alias \"tomcat\" -keyalg \"RSA\" -keystore \"e:\\tomcat.keystore\" 这里密码我输的是123456，名字与姓氏为域名，其它的根据具体情况输入以上命令将生产一对非对称密钥和自我签名的证书 e:\\tomcat.keystore.将证书保存到\\conf 的目录下，注意：“名字与姓氏”应该是域名，输成了姓名，和真正运行的时候域名不符，会出问题 配置tomcat找到conf下的server.xml文件，添加以下内容， &lt;Connector port=\"8451\" protocol=\"HTTP/1.1\" SSLEnabled=\"true\" maxThreads=\"150\" scheme=\"https\" secure=\"true\" clientAuth=\"false\" sslProtocol=\"TLS\" keystoreFile=\"conf/tomcat.keystore\" keystorePass=\"123456\" /&gt; 端口port可自定义，keystorePass为密匙库密码 启动tomcat如换成apr模式 将protocol=”HTTP/1.1”替换为protocol=”org.apache.coyote.http11.Http11Protocol”即可 访问结果http访问 - 8080 ：http://localhost:8088/ https访问 - 8451 ：https://localhost:8451/ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"https://www.zhuqiaolun.com/tags/tomcat/"}]},{"title":"tomcat开启APR运行模式，优化并发性能 - Windows","slug":"2020/09/1599628352134/1599628352134","date":"2020-09-09T05:12:32.000Z","updated":"2021-03-10T06:07:11.503Z","comments":false,"path":"2020/09/1599628352134/1599628352134/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599628352134/1599628352134/","excerpt":"Windows环境中的tomcat开启APR运行模式","text":"下载软件下载tcnative-1.dll文件官网地址：https://tomcat.apache.org/download-native.cgi软件下载地址：点击下载 文件解压后，将 x64/tcnative-1.dll 文件复制到C:\\Windows\\System32目录下 配置找到下面代码 &lt;Connector connectionTimeout=\"20000\" port=\"8086\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/&gt;修改为 &lt;Connector connectionTimeout=\"20000\" port=\"8086\" protocol=\"org.apache.coyote.http11.Http11AprProtocol\" redirectPort=\"8443\"/&gt;结果 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"https://www.zhuqiaolun.com/tags/tomcat/"}]},{"title":"tomcat开启APR运行模式，优化并发性能 - Linux","slug":"2020/09/1599545396773/1599545396773","date":"2020-09-08T06:09:56.000Z","updated":"2021-03-10T06:07:26.422Z","comments":false,"path":"2020/09/1599545396773/1599545396773/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599545396773/1599545396773/","excerpt":"Linux环境中的tomcat开启APR运行模式","text":"描述Tomcat支持三种接收请求的处理方式：BIO、NIO、APR BIO模式：阻塞式I/O操作，表示Tomcat使用的是传统Java I/O操作(即java.io包及其子包)。Tomcat7以下版本默认情况下是以bio模式运行的，由于每个请求都要创建一个线程来处理，线程开销较大，不能处理高并发的场景，在三种模式中性能也最低。 NIO模式：是Java SE 1.4及后续版本提供的一种新的I/O操作方式(即java.nio包及其子包)。是一个基于缓冲区、并能提供非阻塞I/O操作的Java API，它拥有比传统I/O操作(bio)更好的并发运行性能。Tomcat8以上版本，默认使用的就是NIO模式，不需要额外修改。 APR模式：简单理解，就是从操作系统级别解决异步IO问题，大幅度的提高服务器的处理和响应性能， 也是Tomcat运行高并发应用的首选模式。 安装依赖yum install -y apr-devel openssl-devel gcc make expat-devel libtool下载软件所需软件的下载地址：https://mirrors.cnnic.cn/apache/apr/https://tomcat.apache.org/download-native.cgi 点击下载：https://mirrors.cnnic.cn/apache/apr/apr-1.7.0.tar.gzhttps://mirrors.cnnic.cn/apache/apr/apr-iconv-1.2.2.tar.gzhttps://mirrors.cnnic.cn/apache/apr/apr-util-1.6.1.tar.gzhttps://mirrors.bfsu.edu.cn/apache/tomcat/tomcat-connectors/native/1.2.25/source/tomcat-native-1.2.25-src.tar.gz 安装软件 apr cd /usr/local/tomcat/src/apr-1.7.0 ./configure --prefix=/usr/local/tomcat/src/apr make &amp;&amp; make installapr-iconv cd /usr/local/tomcat/src/apr-iconv-1.2.2 ./configure --with-apr=/usr/local/tomcat/src/apr --prefix=/usr/local/tomcat/src/apr-iconv make &amp;&amp; make installapr-util cd apr-util-1.6.1/ ./configure --with-apr=/usr/local/tomcat/src/apr --with-apr-iconv=/usr/local/tomcat/src/apr-iconv/bin/apriconv --prefix=/usr/local/tomcat/src/apr-util make &amp;&amp; make installtomcat-native cd /usr/local/tomcat/src/tomcat-native-1.2.25-src/native ./configure --with-apr=/usr/local/tomcat/src/apr --with-java-home=/usr/local/java/jdk1.8.0_231 make &amp;&amp; make installprofile echo -e 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/tomcat/src/apr/lib\\nexport LD_RUN_PATH=$LD_RUN_PATH:/usr/local/tomcat/src/apr/lib' &gt;&gt; /etc/profile source /etc/profile配置APR打开 server.xml vim /usr/local/tomcat/apache-tomcat-9.0.27/conf/server.xml修改内容如下： &lt;Executor name=\"tomcatThreadPool\" namePrefix=\"catalina-exec-\" maxThreads=\"300\" minSpareThreads=\"30\"/&gt; ​ &lt;Connector executor=\"tomcatThreadPool\" port=\"8080\" protocol=\"org.apache.coyote.http11.Http11AprProtocol\" connectionTimeout=\"20000\" redirectPort=\"8443\" acceptCount=\"900\" disableUploadTimeout=\"true\" URIEncoding=\"UTF-8\" enableLookups=\"false\" compression=\"on\" compressionMinSize=\"1024\" /&gt; ​ &lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt; ##注释掉下面那行，如果不用apache &lt;!-- &lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt; --&gt;结果：注：如果非root用户启动失败，把apr环境变量在当前用户的.bash_profile中写一份 配置说明Executor参数说明 name：共享线程池的名字。这是Connector为了共享线程池要引用的名字，该名字必须唯一。默认值：None； namePrefix:在JVM上，每个运行线程都可以有一个name 字符串。这一属性为线程池中每个线程的name字符串设置了一个前缀， Tomcat将把线程号追加到这一前缀的后面。默认值：catalina-exec-； maxThreads：该线程池可以容纳的最大线程数。默认值：150； maxIdleTime：在Tomcat关闭一个空闲线程之前，允许空闲线程持续的时间(以毫秒为单位)。 只有当前活跃的线程数大于minSpareThread的值，才会关闭空闲线程。默认值：60000(一分钟)。 minSpareThreads：Tomcat应该始终打开的最小不活跃线程数。默认值：4。 threadPriority：线程的等级。默认是Thread.NORM_PRIORITYConnector参数说明 maxThreads :Tomcat 使用线程来处理接收的每个请求，这个值表示 Tomcat 可创建的最大的线程数，默认值是 200 minSpareThreads：最小空闲线程数，Tomcat 启动时的初始化的线程数，表示即使没有人使用也开这么多空线程等待，默认值是 10。 maxSpareThreads：最大备用线程数，一旦创建的线程超过这个值，Tomcat 就会关闭不再需要的 socket 线程。 ​ 上边配置的参数，最大线程 500（一般服务器足以），要根据自己的实际情况合理设置，设置越大会耗费内存和 CPU， 因为 CPU 疲于线程上下文切换，没有精力提供请求服务了，最小空闲线程数 20，线程最大空闲时间 60 秒， 当然允许的最大线程连接数还受制于操作系统的内核参数设置，设置多大要根据自己的需求与环境。 当然线程可以配置在“tomcatThreadPool”中，也可以直接配置在“Connector”中，但不可以重复配置。 ​ URIEncoding：指定 Tomcat 容器的 URL 编码格式，语言编码格式这块倒不如其它 WEB 服务器软件配置方便，需要分别指定。 connnectionTimeout： 网络连接超时，单位：毫秒，设置为 0 表示永不超时，这样设置有隐患的。通常可设置为 30000 毫秒，可根据检测实际情况，适当修改。 enableLookups： 是否反查域名，以返回远程主机的主机名，取值为：true 或 false，如果设置为false，则直接返回IP地址，为了提高处理能力，应设置为 false。 disableUploadTimeout：上传时是否使用超时机制。 connectionUploadTimeout：上传超时时间，毕竟文件上传可能需要消耗更多的时间，这个根据你自己的业务需要自己调， 以使Servlet有较长的时间来完成它的执行，需要与上一个参数一起配合使用才会生效。 acceptCount：指定当所有可以使用的处理请求的线程数都被使用时，可传入连接请求的最大队列长度，超过这个数的请求将不予处理，默认为100个。 keepAliveTimeout：长连接最大保持时间（毫秒），表示在下次请求过来之前，Tomcat 保持该连接多久，默认是使用 connectionTimeout 时间，-1 为不限制超时。 maxKeepAliveRequests：表示在服务器关闭之前，该连接最大支持的请求数。 超过该请求数的连接也将被关闭，1表示禁用，-1表示不限制个数，默认100个，一般设置在100~200之间。 compression：是否对响应的数据进行 GZIP 压缩，off：表示禁止压缩；on：表示允许压缩（文本将被压缩）、force：表示所有情况下都进行压缩，默认值为off， 压缩数据后可以有效的减少页面的大小，一般可以减小1/3左右，节省带宽。 compressionMinSize：表示压缩响应的最小值，只有当响应报文大小大于这个值的时候才会对报文进行压缩，如果开启了压缩功能，默认值就是2048。 compressableMimeType：压缩类型，指定对哪些类型的文件进行数据压缩。 noCompressionUserAgents=\"gozilla, traviata\"： 对于以下的浏览器，不启用压缩。 如果已经对代码进行了动静分离，静态页面和图片等数据就不需要 Tomcat 处理了，那么也就不需要配置在 Tomcat 中配置压缩了。 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"https://www.zhuqiaolun.com/tags/tomcat/"}]},{"title":"配置tomcat下的conf目录下的文件","slug":"2020/09/1599535661189/1599535661189","date":"2020-09-08T03:27:41.000Z","updated":"2021-03-10T06:07:42.766Z","comments":false,"path":"2020/09/1599535661189/1599535661189/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599535661189/1599535661189/","excerpt":"配置tomcat的文件","text":"启用manager1.打开conf目录下的文件 tomcat-users.xml，在尾部添加一下内容: &lt;role rolename=\"tomcat\"/&gt; &lt;role rolename=\"role1\"/&gt; &lt;role rolename=\"manager-script\"/&gt; &lt;role rolename=\"manager-gui\"/&gt; &lt;role rolename=\"manager-status\"/&gt; &lt;role rolename=\"admin-gui\"/&gt; &lt;role rolename=\"admin-script\"/&gt; &lt;user username=\"tomcat\" password=\"tomcat\" roles=\"manager-gui,manager-script,tomcat,admin-gui,admin-script\"/&gt;2.修改webapps文件夹manager和host-mananger两个项目下META-INF中的context.xml文件： vim /usr/local/tomcat/apache-tomcat-9.0.27/webapps/host-manager/META-INF vim /usr/local/tomcat/apache-tomcat-9.0.27/webapps/manager/META-INF/context.xml修改为（或者注释掉）： &lt;Valve className=\"org.apache.catalina.valves.RemoteAddrValve\" allow=\"^.*$\" /&gt;无须重启tomcat即可生效 配置日志打印打开conf目录下的文件 logging.properties；修改以下内容 1catalina.org.apache.juli.AsyncFileHandler.level = FINE 1catalina.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs 1catalina.org.apache.juli.AsyncFileHandler.prefix = catalina. 1catalina.org.apache.juli.AsyncFileHandler.maxDays = 7 1catalina.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter 2localhost.org.apache.juli.AsyncFileHandler.level = FINE 2localhost.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs 2localhost.org.apache.juli.AsyncFileHandler.prefix = localhost. 2localhost.org.apache.juli.AsyncFileHandler.maxDays = 7 2localhost.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter 3manager.org.apache.juli.AsyncFileHandler.level = FINE 3manager.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs 3manager.org.apache.juli.AsyncFileHandler.prefix = manager. 3manager.org.apache.juli.AsyncFileHandler.maxDays = 7 3manager.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter 4host-manager.org.apache.juli.AsyncFileHandler.level = FINE 4host-manager.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs 4host-manager.org.apache.juli.AsyncFileHandler.prefix = host-manager. 4host-manager.org.apache.juli.AsyncFileHandler.maxDays = 7 4host-manager.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter java.util.logging.ConsoleHandler.level = FINE java.util.logging.ConsoleHandler.formatter = org.apache.juli.OneLineFormatter java.util.logging.SimpleFormatter.format = %1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS.%1$tL [%4$s] [%3$s] %2$s %5$s %6$s%n配置日志存储&lt;Host name=\"localhost\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\"&gt; &lt;Valve className=\"org.apache.catalina.authenticator.SingleSignOn\" /&gt; &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs/localhost_access_log\" prefix=\"localhost_access_log\" suffix=\".txt\" pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt; &lt;/Host&gt; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"https://www.zhuqiaolun.com/tags/tomcat/"}]},{"title":"在Linux中安装Tomcat环境","slug":"2020/09/1599532777229/1599532777229","date":"2020-09-08T02:39:37.000Z","updated":"2021-05-13T02:54:21.526Z","comments":false,"path":"2020/09/1599532777229/1599532777229/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599532777229/1599532777229/","excerpt":"在Linux中安装Tomcat环境","text":"下载tomcat 官网地址：http://tomcat.apache.org/tomcat 官网版本文件地址：https://archive.apache.org/dist/tomcat/tomcat 指定版本下载地址：https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.27/bin/Linux在线下载： wget https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.27/bin/apache-tomcat-9.0.27.tar.gz 下载离线版本：点击红框区域,即可下载文件（免安装版本） 安装创建安装目录，并进入安装目录 mkdir /usr/local/tomcat cd /usr/local/tomcat/ rz apache-tomcat-9.0.27.tar.gz # 上传文件（如采用在线下载，则无需此步骤） tar -zxvf apache-tomcat-9.0.27.tar.gz # 解压文件 cd /usr/local/tomcat/apache-tomcat-9.0.27 # 进入目录命令启动： /usr/local/tomcat/apache-tomcat-9.0.27/bin/startup.sh停止： /usr/local/tomcat/apache-tomcat-9.0.27/bin/shutdown.sh实时日志 cd /usr/local/tomcat/apache-tomcat-9.0.27/logs tail -f catalina.out访问curl -I http://127.0.0.1:8080返回以下内容则表示启动成功 HTTP/1.1 200 Content-Type: text/html;charset=UTF-8 Transfer-Encoding: chunked Date: Tue, 08 Sep 2020 03:22:06 GMT上传项目cd /usr/local/tomcat/apache-tomcat-9.0.27/webapps document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"}],"tags":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/tags/Tomcat/"}]},{"title":"Nginx 服务器证书SSL安装","slug":"2020/09/1599456487885/1599456487885","date":"2020-09-07T05:28:07.000Z","updated":"2021-03-10T06:08:01.620Z","comments":false,"path":"2020/09/1599456487885/1599456487885/","link":"","permalink":"https://www.zhuqiaolun.com/2020/09/1599456487885/1599456487885/","excerpt":"Nginx 服务器证书SSL安装,配置Https访问","text":"检测初始安装nginx的时候没有开启ssl功能 查看是否开启ssl模块 /usr/local/nginx/sbin/nginx -V当未出现红框内的内部分，则表示没有开启ssl功能 开启ssl模块找到安装的源码包(带有版本号的位置) cd /usr/local/software/nginx-1.18.0 ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module make # 这里不要进行make install，否则就是覆盖安装 cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak # 备份 /usr/local/nginx/sbin/nginx -s stop # 停止服务 cp ./objs/nginx /usr/local/nginx/sbin/ # 将刚刚编译好的nginx覆盖掉原有的nginx当在此查看 /usr/local/nginx/sbin/nginx -V ，则表示开启成功 下载SSL证书将已获取到的 1.证书文件和 2.私钥文件从本地目录拷贝到 Nginx 服务器的 /usr/local/nginx/conf 目录下此处为 Nginx 默认安装目录，请根据实际情况操作 配置Httpsuser root; worker_processes 1; error_log /usr/local/nginx/logs/nginx_error.log crit; events { worker_connections 1024; } http { include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; # 开启gzip压缩 gzip on; gzip_comp_level 5; gzip_min_length 1024; gzip_types text/plain application/x-javascript text/css application/xml text/javascript image/jpeg image/gif image/png; # 隐藏nginx版本信息 server_tokens off; server { listen 80; server_name www.zhuqiaolun.com; if ($scheme = http ) { return 301 https://www.zhuqiaolun.com$request_uri; } location / { root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } # HTTPS server server { listen 443 ssl; server_name www.zhuqiaolun.com; root html; index index.html index.htm; ssl_certificate www.zhuqiaolun.com.crt; ssl_certificate_key www.zhuqiaolun.com.key; ssl_session_timeout 10m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_session_cache shared:SSL:10m; ssl_prefer_server_ciphers on; location / { root html; index index.html index.htm; } } }扩展Nginx SSL性能调优 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES256-SHA384:AES256-SHA256:RC4:HIGH:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!AESGCM; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://www.zhuqiaolun.com/tags/nginx/"}]},{"title":"SpringBoot2.3.x整合Freemarker","slug":"2020/08/1597309130215/1597309130215","date":"2020-08-13T08:58:50.000Z","updated":"2021-11-06T09:11:49.176Z","comments":false,"path":"2020/08/1597309130215/1597309130215/","link":"","permalink":"https://www.zhuqiaolun.com/2020/08/1597309130215/1597309130215/","excerpt":"SpringBoot2.3.x整合Freemarker","text":"FreemarkerFreeMarker Template Language（FTL） 文件一般保存为 xxx.ftl严格依赖MVC模式，不依赖Servlet容器（不占用JVM内存）内建函数 依赖12345678910111213141516&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.3.2.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;&lt;/dependency&gt; &lt;!-- 将freemarker的html内容写入生成的文件中 --&gt;&lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.6&lt;/version&gt; &lt;/dependency&gt; 配置yml内容： 123456789101112131415161718192021spring: application: name: spring-boot-freemarker jackson: default-property-inclusion: non_null # 配置模版引擎 freemarker: cache: false #是否启用模板缓存 enabled: true #是否启用freemarker template-loader-path: classpath:/templates/ #设定模板的加载路径，多个以逗号分隔 suffix: .ftl #设定模板的后缀 content-type: text/html check-template-location: true #是否检查模板位置是否存在 charset: UTF-8 #模板编码 #一些常用配置 allow-request-override: false #是否允许HttpServletRequest属性覆盖(隐藏)控制器生成的同名模型属性 allow-session-override: false #是否允许HttpSession属性覆盖(隐藏)控制器生成的同名模型属性 expose-request-attributes: false #设定所有request的属性在merge到模板的时候，是否要都添加到model中 expose-session-attributes: false #是否在merge模板的时候，将HttpSession属性都添加到model中 expose-spring-macro-helpers: true #设定是否以springMacroRequestContext的形式暴露RequestContext给Spring’s macro library使用 prefer-file-system-access: true #是否优先从文件系统加载template，以支持热加载，默认为true 数据应用 ☞传送门 页面使用文件路径： 1234src/main/java/com/demon/freemarker/controller IndexController.javasrc/main/resources/templates index1.ftl 示例代码IndexController.java @Controller public class IndexController { /** * 路由 /index1 * 返回 index1 这里默认配置自动映射到目录(templages/)下的index1.ftl */ @GetMapping(\"/index1\") public String index(Model model){ model.addAttribute(\"content\",\"hello freemarker\"); return \"index1\"; } }index.ftl &lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;freemarker&lt;/title&gt; &lt;/head&gt; &lt;body&gt; this is welcome ${content} &lt;/body&gt; &lt;/html&gt;运行示例 更多 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Freemarker","slug":"Freemarker","permalink":"https://www.zhuqiaolun.com/tags/Freemarker/"}]},{"title":"SpringBoot2.3.x 整合 Thymeleaf","slug":"2020/08/1597306338000/1597306338000","date":"2020-08-13T08:12:17.000Z","updated":"2021-07-02T03:24:58.412Z","comments":false,"path":"2020/08/1597306338000/1597306338000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/08/1597306338000/1597306338000/","excerpt":"SpringBoot2.3.x 整合 thymeleaf 模板 访问页面","text":"依赖12345678910&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.3.2.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt; Thymeleaf (主推)轻量级的模板引擎（负责逻辑业务的不推荐，解析DOM或者XML会占用多的内存）可以直接在浏览器中打开且正确显示模板页面直接是html结尾，直接编辑 配置1234567891011121314151617181920212223spring: application: name: spring-boot-thymeleaf jackson: default-property-inclusion: non_null # 配置模版引擎, 是否开启thymeleaf缓存,本地为false，生产建议为true thymeleaf: # 是否启用模板缓存,开发时关闭缓存,不然没法看到实时页面 cache: false # 是否检查模板位置是否存在。 check-template: true # 是否为Web框架启用Thymeleaf视图分辨率。 enabled: true # 编码格式, 默认UTF-8 encoding: UTF-8 # 应用于模板的模板模式。另请参阅Thymeleaf的TemplateMode枚举。 mode: HTML servlet: content-type: text/html # 后缀 默认 .html suffix: .html # 模板文件存放位置 , 默认 classpath:/templates/ prefix: classpath:/templates/ 1234src/main/java/com/demon/freemarker/controller IndexController.javasrc/main/resources/templates index2.html 示例代码IndexController.java @Controller public class IndexController { /** * 路由 /index2 * 返回 index2 这里默认配置自动映射到目录(templages/)下的index2.html */ @GetMapping(\"/index2\") public String index(Model model){ model.addAttribute(\"content\",\"hello thymeleaf\"); return \"index2\"; } }index.html &lt;!DOCTYPE html&gt; &lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Thymeleaf&lt;/title&gt; &lt;/head&gt; &lt;body&gt; this is welcome &lt;span th:text=\"${content}\"&gt;&lt;/span&gt; &lt;/body&gt; &lt;/html&gt;运行示例 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"Thymeleaf","slug":"Thymeleaf","permalink":"https://www.zhuqiaolun.com/tags/Thymeleaf/"}]},{"title":"MyCat 分库配置","slug":"2020/08/1596694227482/1596694227482","date":"2020-08-06T06:10:27.000Z","updated":"2021-03-10T06:30:38.014Z","comments":false,"path":"2020/08/1596694227482/1596694227482/","link":"","permalink":"https://www.zhuqiaolun.com/2020/08/1596694227482/1596694227482/","excerpt":"MyCat分库配置（sharding-by-intfile）","text":"创建数据库分别创建三个数据库：testdb_0，testdb_1，testdb_2 MyCat配置server.xml配置不变， &lt;user name=\"root\" defaultAccount=\"true\"&gt; &lt;property name=\"password\"&gt;123456&lt;/property&gt; &lt;property name=\"schemas\"&gt;TESTDB&lt;/property&gt; &lt;/user&gt;schema.xml配置如下： &lt;!-- 设置表的存储方式.schema name=\"TESTDB\" 与 server.xml中的 TESTDB 设置一致 --&gt; &lt;schema name=\"TESTDB\" checkSQLschema=\"true\" sqlMaxLimit=\"100\"&gt; &lt;!-- 分片规则：sharding-by-intfile --&gt; &lt;table name=\"t_users\" dataNode=\"node_db00,node_db01,node_db02\" rule=\"sharding-by-intfile\"&gt;&lt;/table&gt; &lt;/schema&gt; &lt;!-- 设置dataNode 对应的数据库,及 mycat 连接的地址dataHost --&gt; &lt;dataNode name=\"node_db00\" dataHost=\"dataHost01\" database=\"testdb_0\" /&gt; &lt;dataNode name=\"node_db01\" dataHost=\"dataHost01\" database=\"testdb_1\" /&gt; &lt;dataNode name=\"node_db02\" dataHost=\"dataHost01\" database=\"testdb_2\" /&gt; &lt;!-- mycat 逻辑主机dataHost对应的物理主机.其中也设置对应的mysql登陆信息 --&gt; &lt;dataHost name=\"dataHost01\" maxCon=\"1000\" minCon=\"10\" balance=\"1\" writeType=\"0\" dbType=\"mysql\" dbDriver=\"native\"&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;writeHost host=\"hostM1\" url=\"127.0.0.1:3306\" user=\"root\" password=\"root\"/&gt; &lt;/dataHost&gt; rule.xml配置如下： &lt;tableRule name=\"sharding-by-intfile\"&gt; &lt;rule&gt; &lt;!-- columns:对应需要进行匹配规则的字段 --&gt; &lt;columns&gt;sex&lt;/columns&gt; &lt;algorithm&gt;hash-int&lt;/algorithm&gt; &lt;/rule&gt; &lt;/tableRule&gt; &lt;function name=\"hash-int\" class=\"io.mycat.route.function.PartitionByFileMap\"&gt; &lt;property name=\"mapFile\"&gt;partition-hash-int.txt&lt;/property&gt; &lt;property name=\"type\"&gt;1&lt;/property&gt; &lt;property name=\"defaultNode\"&gt;0&lt;/property&gt; &lt;/function&gt;说明：函数配置中，type默认值为0，0表示Integer，非零表示String， 所有的节点配置都是从defaultNode=0开始，及0代表第一个节点。defaultNode 默认节点:小于0表示不设置默认节点，大于等于0表示设置默认节点,默认节点的作用;枚举分片时,如果碰到不识别的枚举值，就让它路由到默认节点;如果不配置默认节点（defaultNode值小于0表示不配置默认节点），碰到不识别的枚举值就会报错; partition-hash-int.txt #10000=0 #10010=1 m=1 w=2说明：[sex=m]的数据放入node_db01，[sex=w]的数据放入node_db02，其它的数据[mw]放入node_db00，0：表示第一个dataNode[name=node_db00]节点，以下标选择1：表示第二个dataNode[name=node_db01]节点，以下标选择2：表示第三个dataNode[name=node_db02]节点，以下标选择注意以中文的分片规则，后续， 修改配置完成后，重启mycat服务，通过mycat插入数据即可看到结果 执行mysql -uroot -p123456 -P8066 -h 127.0.0.1 mysql&gt; show databases; mysql&gt; use TESTDB; mysql&gt; DROP TABLE IF EXISTS `t_users`; mysql&gt; CREATE TABLE `t_users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `sex` varchar(10) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; mysql&gt; set names gbk; mysql&gt; insert into t_users(`name`,sex)values('张三','m'); mysql&gt; insert into t_users(`name`,sex)values('李四','w'); mysql&gt; insert into t_users(`name`,sex)values('王五','mw'); 结果分片实现 数据结果 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/categories/MyCat/"}],"tags":[{"name":"myCat","slug":"myCat","permalink":"https://www.zhuqiaolun.com/tags/myCat/"}]},{"title":"在Windows10中安装MyCat环境","slug":"2020/08/1596610285582/1596610285582","date":"2020-08-05T06:51:25.000Z","updated":"2021-05-13T05:48:40.720Z","comments":false,"path":"2020/08/1596610285582/1596610285582/","link":"","permalink":"https://www.zhuqiaolun.com/2020/08/1596610285582/1596610285582/","excerpt":"在windows10中安装MyCat环境","text":"下载官网：Mycat数据库分库分表中间件，点击下载1.6.7.3 的Windows稳定版本链接：http://dl.mycat.org.cn/1.6.7.3/20190927161129/Mycat-server-1.6.7.3-release-20190927161129-win.tar.gz 解压目录如下： 安装由于软件本身就是绿色版本，只需放在指定目录下即可， mycat： bin：命令文件 catlet：空的,扩展 conf：配置文件(server.xml,schema.xml,rule.xml等) lib：依赖的jar包 logs：启动日志简单配置创建数据库在DB中创建数据库（test_mycat），创建表（t_user） 修改xml配置server.xml，rule.xml 不改变，schema.xml改动如下： &lt;?xml version=\"1.0\"?&gt; &lt;!DOCTYPE mycat:schema SYSTEM \"schema.dtd\"&gt; &lt;mycat:schema xmlns:mycat=\"http://io.mycat/\"&gt; &lt;!-- 设置表的存储方式.schema name=\"TESTDB\" 与 server.xml中的 TESTDB 设置一致 --&gt; &lt;schema name=\"TESTDB\" checkSQLschema=\"true\" sqlMaxLimit=\"100\"&gt; &lt;!-- auto sharding by id (long) --&gt; &lt;table name=\"t_user\" dataNode=\"dn1\"/&gt; &lt;/schema&gt; &lt;!-- 设置dataNode 对应的数据库,及 mycat 连接的地址dataHost --&gt; &lt;dataNode name=\"dn1\" dataHost=\"localhost1\" database=\"test_mycat\" /&gt; &lt;!-- mycat 逻辑主机dataHost对应的物理主机.其中也设置对应的mysql登陆信息 --&gt; &lt;dataHost name=\"localhost1\" maxCon=\"1000\" minCon=\"10\" balance=\"0\" writeType=\"0\" dbType=\"mysql\" dbDriver=\"native\" switchType=\"1\" slaveThreshold=\"100\"&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;!-- can have multi write hosts --&gt; &lt;writeHost host=\"hostM1\" url=\"127.0.0.1:3306\" user=\"root\" password=\"root\"&gt; &lt;/writeHost&gt; &lt;/dataHost&gt; &lt;/mycat:schema&gt;启动本地启动双击bin目录下的startup_nowrap.bat文件 出现以下界面提示则启动成功： 服务启动以管理员的模式打开CMD命令,进入根目录下 安装服务 启动服务 当出现此启动错误：则需要将 -XX:MaxPermSize=512M 移除，该参数在jdk1.8版本中已放弃使用， 服务命令mycat.bat { console : Wrapper控制台 start : 服务启动 pause : 服务暂停 resume : 服务恢复 stop : 服务停止 restart : 服务重启 install : 服务安装 remove : 服务移除 status : 服务状态 }Navicat连接默认端口：8066用户名：root密码：server.xml的user配置，本次为 123456 查看连接： 查看数据： document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/categories/MyCat/"}],"tags":[{"name":"myCat","slug":"myCat","permalink":"https://www.zhuqiaolun.com/tags/myCat/"}]},{"title":"在Linux中安装MyCat环境","slug":"2020/08/1596536908607/1596536908607","date":"2020-08-04T10:28:28.000Z","updated":"2021-07-02T02:49:40.744Z","comments":false,"path":"2020/08/1596536908607/1596536908607/","link":"","permalink":"https://www.zhuqiaolun.com/2020/08/1596536908607/1596536908607/","excerpt":"在Linux中安装MyCat环境","text":"下载官网：Mycat数据库分库分表中间件，点击下载1.6.7.3 的Linux稳定版本链接：http://dl.mycat.org.cn/1.6.7.3/20190927161129/Mycat-server-1.6.7.3-release-20190927161129-linux.tar.gz 待续··· document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/categories/MyCat/"}],"tags":[{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/tags/MyCat/"}]},{"title":"Kafka使用 （SpringBoot调用）","slug":"2020/07/1595654393778/1595654393778","date":"2020-07-25T05:19:53.000Z","updated":"2021-03-10T06:31:03.114Z","comments":false,"path":"2020/07/1595654393778/1595654393778/","link":"","permalink":"https://www.zhuqiaolun.com/2020/07/1595654393778/1595654393778/","excerpt":"SpringBoot调用kafka服务","text":"依赖引入1234567891011121314151617181920212223&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.2.6.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt;&lt;!-- kafka start --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt; &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt; &lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;!-- kafka end --&gt; &lt;!-- fastjson --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.62&lt;/version&gt;&lt;/dependency&gt; yml配置1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950spring: # 基本配置 kafka: # 以逗号分隔的地址列表，用于建立与 Kafka 集群的初始连接 (kafka 默认的端口号为 9092) bootstrap-servers: 127.0.0.1:9092 # 定义生产者 producer: client-id: kafka.client.id # 发生错误后，消息重发的次数。 retries: 0 #当有多个消息需要被发送到同一个分区时，生产者会把它们放在同一个批次里。该参数指定了一个批次可以使用的内存大小，按照字节数计算。 batch-size: 16384 # 设置生产者内存缓冲区的大小。 buffer-memory: 33554432 # 键的序列化方式 key-serializer: org.apache.kafka.common.serialization.StringSerializer # 值的序列化方式 value-serializer: org.apache.kafka.common.serialization.StringSerializer # acks=0 ： 生产者在成功写入消息之前不会等待任何来自服务器的响应。 # acks=1 ： 只要集群的首领节点收到消息，生产者就会收到一个来自服务器成功响应。 # acks=all ：只有当所有参与复制的节点全部收到消息时，生产者才会收到一个来自服务器的成功响应。 acks: 1 # 定义消费者 consumer: # 自动提交的时间间隔 在 spring boot 2.X 版本中这里采用的是值的类型为 Duration 需要符合特定的格式，如 1S,1M,2H,5D auto-commit-interval: 3S # 该属性指定了消费者在读取一个没有偏移量的分区或者偏移量无效的情况下该作何处理： # latest（默认值）在偏移量无效的情况下，消费者将从最新的记录开始读取数据（在消费者启动之后生成的记录） # earliest ：在偏移量无效的情况下，消费者将从起始位置读取分区的记录 auto-offset-reset: earliest # 是否自动提交偏移量，默认值是 true,为了避免出现重复数据和数据丢失，可以把它设置为 false,然后手动提交偏移量 enable-auto-commit: true # 键的反序列化方式 key-deserializer: org.apache.kafka.common.serialization.StringDeserializer # 值的反序列化方式 value-deserializer: org.apache.kafka.common.serialization.StringDeserializer listener: # 在侦听器容器中运行的线程数(消费者个数即可) concurrency: 5 demon: #消费者配置 mqConfig: # 监听的主题topic topics: test,first,second,third topic: # 监听的主题first的消息执行类 first: com.demon.springbootkafka.listener.consumer.message.FirstMessage # 监听的主题second的消息执行类 second: com.demon.springbootkafka.listener.consumer.message.SecondMessage 类配置mq的消费者配置类： 123456789101112/** * @className: MqProperties.java * @description: mq的消费者配置类，映射 配置文件里面的值 * @author: Demon * @date 2020/6/16 18:00 */@Component@ConfigurationProperties(prefix = \"demon.mqConfig\")@Datapublic class MqConsumerTopicConfig { Map&lt;String,Class&lt;?&gt;&gt; topic;} 生产者KafKaProducerService 123456789101112131415161718192021222324252627282930313233343536373839404142package com.demon.springbootkafka.service;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeoutException;/** * @ClassName: KafKaProducerService * @Description: 生产者service * @Author: Demon * @Date: 2020/4/23 13:38 */public interface KafKaProducerService { /** * 发送标准消息没有回执 * @param topic 主题 * @param key key * @param data 内容 */ void sendStandardMessage(String topic, String key, String data); /** * 发送标准消息同步有阻塞 * @param topic 主题 * @param key key * @param data 内容 * @return 返回 * @throws InterruptedException 异常 * @throws ExecutionException 异常 * @throws TimeoutException 异常 */ Long sendStandardMessageSync(String topic, String key, String data) throws InterruptedException, ExecutionException, TimeoutException; /** * 发送标准消息异步无阻塞 * @param topic 主题 * @param key key * @param data 内容 */ void sendStandardMessageAsync(String topic, String key, String data);} KafKaProducerServiceImpl: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package com.demon.springbootkafka.service.impl;import lombok.extern.slf4j.Slf4j;import org.apache.kafka.clients.producer.ProducerRecord;import org.springframework.kafka.core.KafkaTemplate;import org.springframework.kafka.support.SendResult;import org.springframework.stereotype.Service;import org.springframework.util.concurrent.ListenableFuture;import org.springframework.util.concurrent.ListenableFutureCallback;import javax.annotation.Resource;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;/** * @ClassName: KafKaProducerServiceImpl * @Description: 生产者service的实现，负责执行消息发送 * @Author: Demon * @Date: 2020/4/23 13:38 */@Slf4j@Servicepublic class KafKaProducerServiceImpl implements com.demon.springbootkafka.service.KafKaProducerService { @Resource private KafkaTemplate&lt;String, String&gt; kafkaTemplate; /** * 构建待发送的消息 * @param topic topic * @param key key * @param data data * @return 返回 */ private ProducerRecord&lt;String, String&gt; getRecord(String topic, String key, String data){ if(key == null){ return new ProducerRecord&lt;&gt;(topic,data); }else{ return new ProducerRecord&lt;&gt;(topic,key,data); } } @Override public void sendStandardMessage(String topic, String key, String data){ kafkaTemplate.send(getRecord(topic,key,data)); } @Override public Long sendStandardMessageSync(String topic, String key, String data) throws InterruptedException, ExecutionException, TimeoutException { SendResult&lt;String, String&gt; stringStringSendResult = kafkaTemplate.send(getRecord(topic, key, data)).get(1, TimeUnit.SECONDS); System.out.println(stringStringSendResult.getProducerRecord().timestamp()); return stringStringSendResult.getProducerRecord().timestamp(); } @Override public void sendStandardMessageAsync(String topic, String key, String data) { ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; sendResultListenableFuture = kafkaTemplate.send(getRecord(topic,key,data)); // 发送消息回调 //noinspection NullableProblems sendResultListenableFuture.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, String&gt;&gt;() { /** 发送成功回调方法 */ @Override public void onSuccess(SendResult&lt;String, String&gt; sendResultMap) { log.debug(\"发送消息成功：\" + sendResultMap); } /** 发送失败回调方法 */ @Override public void onFailure(Throwable throwable) { log.debug(\"发送消息失败：\"+ throwable.getMessage()); } }); }} 生产者监听KafkaSendResultHandler： 12345678910111213141516171819202122232425262728package com.demon.springbootkafka.listener.producer;import lombok.extern.slf4j.Slf4j;import org.apache.kafka.clients.producer.ProducerRecord;import org.apache.kafka.clients.producer.RecordMetadata;import org.springframework.kafka.support.ProducerListener;import org.springframework.stereotype.Component;/** * @ClassName: KafkaSendResultHandler * @Description: 发送消息结果回调 * @Author: Demon * @Date: 2020/4/23 13:55 */@Slf4j@Componentpublic class KafkaSendResultHandler implements ProducerListener { @Override public void onSuccess(ProducerRecord producerRecord, RecordMetadata recordMetadata) { log.info(\"发送消息监听成功 : \" + producerRecord.toString()); } @Override public void onError(ProducerRecord producerRecord, Exception exception) { log.info(\"发送消息监听失败 : \" + exception); }} 消费者KafkaConsumerService： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.demon.springbootkafka.listener.consumer;import com.demon.springbootkafka.config.MqConsumerTopicConfig;import lombok.extern.slf4j.Slf4j;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.springframework.kafka.annotation.KafkaListener;import org.springframework.stereotype.Component;import javax.annotation.Resource;import java.lang.reflect.Method;/** * @ClassName: KafkaConsumerService * @Description: 消费者监听消息,通过类的反射执行topic消息处理 * @Author: Demon * @Date: 2020/4/23 14:44 */@Slf4j@Componentpublic class KafkaConsumerService { @Resource private MqConsumerTopicConfig mqConsumerTopicConfig; @KafkaListener(topics = \"#{'${demon.mqConfig.topics}'.split(',')}\", groupId = \"test-group\") public void receive(ConsumerRecord&lt;String, Object&gt; record) { String topic = record.topic(); log.info(\"------ \" + topic + \" 消费者处理消息------\"); try { if (mqConsumerTopicConfig.getTopic().containsKey(topic)) { String classPath = mqConsumerTopicConfig.getTopic().get(topic).getName(); try { Class&lt;?&gt; c1s = Class.forName(classPath); //判断是否有实现ConsumerMessageExecute消息处理接口，否则不予执行 if (c1s.getInterfaces().length &gt; 0 &amp;&amp; c1s.getInterfaces()[0].equals(ConsumerMessageExecute.class)) { //获得Class的Method对象,参数为方法名,参数列表的类型Class对象 Method method = c1s.getMethod(\"execute\", ConsumerRecord.class); //invoke方法，参数为cls实例对象，和想要调用的方法参数 Boolean value = (Boolean) method.invoke(c1s.newInstance(), record); //输出invoke方法的返回值 System.out.println(\"execute方法的返回值：\" + value); } else { log.error(\"============ 调用class：{} 错误:{}\", classPath, \"此类没有实现 MessageExecute 接口！！！\"); } } catch (Exception e) { e.printStackTrace(); log.error(\"============ 调用class：{} 异常：{}\", classPath, e); } } else { log.error(\"============ {}不存在\", topic); } } catch (Exception e) { e.printStackTrace(); } }} ConsumerMessageExecute： 1234567891011121314151617181920package com.demon.springbootkafka.listener.consumer;import org.apache.kafka.clients.consumer.ConsumerRecord;/** * 消息执行统一接口 * @ClassName: MessageExecute * @Description: 消息实现接口，必须实现此接口，否则无法执行消息处理 * @Author: Demon * @Date: 2020/5/24 12:55 */public interface ConsumerMessageExecute { /** * 消费者 消息执行方法 * @param record 消息体 * @return 返回 */ boolean execute(ConsumerRecord&lt;String, Object&gt; record);} FirstMessage: 123456789101112131415161718package com.demon.springbootkafka.listener.consumer.message;import com.demon.springbootkafka.listener.consumer.ConsumerMessageExecute;import org.apache.kafka.clients.consumer.ConsumerRecord;/** * @ClassName: FirstMessage * @Description: 监听topic【first】的处理 * @Author: Demon * @Date: 2020/6/17 19:14 */public class FirstMessage implements ConsumerMessageExecute { @Override public boolean execute(ConsumerRecord&lt;String, Object&gt; record) { System.out.println(String.format(\"topic = %s, key = %s, value = %s \",record.topic(), record.key(), record.value())); return true; }} SecondMessage: 123456789101112131415161718package com.demon.springbootkafka.listener.consumer.message;import com.demon.springbootkafka.listener.consumer.ConsumerMessageExecute;import org.apache.kafka.clients.consumer.ConsumerRecord;/** * @ClassName: MessageUrgent * @Description: 监听topic【second】的处理 * @Author: Demon * @Date: 2020/6/17 19:15 */public class SecondMessage implements ConsumerMessageExecute { @Override public boolean execute(ConsumerRecord&lt;String, Object&gt; record) { System.out.println(String.format(\"topic = %s, key = %s, value = %s \",record.topic(), record.key(), record.value())); return true; }} 测试SpringBootKafkaApplicationTests： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package com.demon.springbootkafka;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import com.demon.springbootkafka.service.KafKaProducerService;import org.junit.jupiter.api.Test;import org.springframework.boot.test.context.SpringBootTest;import javax.annotation.Resource;import java.util.UUID;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeoutException;@SpringBootTestclass SpringBootKafkaApplicationTests { @Resource private KafKaProducerService kafKaProducerService; @Test void contextLoads() { System.out.println(System.currentTimeMillis()); } @Test void sendStandardMessage() { String topic = \"test\"; String key = UUID.randomUUID().toString(); String data = JSON.toJSONString(new JSONObject().put(\"time\",System.currentTimeMillis())); kafKaProducerService.sendStandardMessage(topic,key,data); } @Test void sendStandardMessageAsync() { String topic = \"test\"; String key = UUID.randomUUID().toString(); String data = JSON.toJSONString(new JSONObject().put(\"time\",System.currentTimeMillis())); kafKaProducerService.sendStandardMessageAsync(topic,key,data); } @Test void sendStandardMessageSync() { String topic = \"test\"; String key = UUID.randomUUID().toString(); JSONObject jsonObject = new JSONObject(true); jsonObject.put(\"time\",System.currentTimeMillis()); String data = jsonObject.toJSONString(); try { kafKaProducerService.sendStandardMessageSync(topic, key, data); } catch (InterruptedException | TimeoutException | ExecutionException e) { e.printStackTrace(); } }} 扩展KafkaConfig: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package com.demon.springbootkafka.config;import org.apache.kafka.clients.admin.AdminClient;import org.apache.kafka.clients.admin.AdminClientConfig;import org.springframework.boot.autoconfigure.kafka.KafkaProperties;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.kafka.annotation.EnableKafka;import org.springframework.kafka.core.KafkaAdmin;import javax.annotation.Resource;import java.util.HashMap;import java.util.Map;/** * @ClassName: KafkaConfig * @Description: KafkaConfig 配置,操作topic * @Author: Demon * @Date: 2020/4/23 18:28 */@Configuration@EnableKafkapublic class KafkaConfig { @Resource private KafkaProperties kafkaProperties; /** * 创建一个kafka管理类，相当于rabbitMQ的管理类rabbitAdmin, * 没有此bean无法自定义的使用adminClient创建topic * @return 返回 */ @Bean public KafkaAdmin kafkaAdmin() { Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(1); //配置Kafka实例的连接地址 //kafka的地址，不是zookeeper props.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaProperties.getBootstrapServers().get(0)); return new KafkaAdmin(props); } /** * kafka客户端，在spring中创建这个bean之后可以注入并且创建topic, * 用于集群环境，创建对个副本 * @return 返回 */ @Bean public AdminClient adminClient() { return AdminClient.create(kafkaAdmin().getConfig()); }} SpringBootKafkaApplicationTests_topic: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package com.demon.springbootkafka;import com.alibaba.fastjson.JSON;import org.apache.kafka.clients.admin.*;import org.junit.jupiter.api.Test;import org.springframework.boot.autoconfigure.EnableAutoConfiguration;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.transaction.annotation.EnableTransactionManagement;import javax.annotation.Resource;import java.util.ArrayList;import java.util.Collections;import java.util.Set;import java.util.concurrent.ExecutionException;@SpringBootTest@EnableAutoConfigurationclass SpringBootKafkaApplicationTests_topic { @Resource private AdminClient adminClient; @Test void contextLoads() { System.out.println(System.currentTimeMillis()); } @Test void listTopics(){ try { ListTopicsResult listTopics = adminClient.listTopics(); Set&lt;String&gt; topics = listTopics.names().get(); for (String topic : topics) { System.out.println(topic); } } catch (InterruptedException | ExecutionException e) { e.printStackTrace(); } } @Test void createTopic() { ArrayList&lt;NewTopic&gt; topics = new ArrayList&lt;&gt;(); NewTopic newTopic = new NewTopic(\"test1\", 2, (short) 1); topics.add(newTopic); CreateTopicsResult result = adminClient.createTopics(topics); System.out.println( JSON.toJSONString(result)); } @Test void deleteTopics() { DeleteTopicsResult deleteTopicsResult = adminClient.deleteTopics(Collections.singletonList(\"test1\")); System.out.println( JSON.toJSONString(deleteTopicsResult)); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Kafka","slug":"Kafka","permalink":"https://www.zhuqiaolun.com/categories/Kafka/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"https://www.zhuqiaolun.com/tags/kafka/"}]},{"title":"Kafka使用 （Java普通调用）","slug":"2020/07/1595649722982/1595649722982","date":"2020-07-25T04:02:02.000Z","updated":"2021-03-10T06:31:27.099Z","comments":false,"path":"2020/07/1595649722982/1595649722982/","link":"","permalink":"https://www.zhuqiaolun.com/2020/07/1595649722982/1595649722982/","excerpt":"Java调用kafka服务","text":"依赖引入1234567891011121314151617181920212223242526&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt; &lt;artifactId&gt;kafka_2.11&lt;/artifactId&gt; &lt;version&gt;2.4.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt; &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt; &lt;version&gt;2.4.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt; &lt;version&gt;1.7.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.58&lt;/version&gt;&lt;/dependency&gt; Topic操作123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687import java.util.ArrayList;import java.util.Collections;import java.util.Properties;import java.util.Set;import java.util.concurrent.ExecutionException;import org.apache.kafka.clients.CommonClientConfigs;import org.apache.kafka.clients.admin.AdminClient;import org.apache.kafka.clients.admin.CreateTopicsResult;import org.apache.kafka.clients.admin.DeleteTopicsResult;import org.apache.kafka.clients.admin.ListTopicsResult;import org.apache.kafka.clients.admin.NewTopic;import org.junit.After;import org.junit.Before;import org.junit.Test;import com.alibaba.fastjson.JSONObject;/** * Topic操作 */public class CreateTopics { private static AdminClient adminClient = null; /** * 初始化adminClient */ @Before public void getAdminClient() { Properties props = new Properties(); props.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG, \"127.0.0.1:9092\"); adminClient = AdminClient.create(props); } /** * 获取所有Topic */ @Test public void getTopicList() { try { ListTopicsResult listTopics = adminClient.listTopics(); Set&lt;String&gt; topics = listTopics.names().get(); for (String topic : topics) { System.out.println(topic); } } catch (InterruptedException | ExecutionException e) { e.printStackTrace(); } } /** * 创建Topic 创建了3个名为\"first\", \"second\",\"third\"，分区数为1，复制因子为1的Topic. * 创建完成，返回null */ @Test public void getCreateTopic() { ArrayList&lt;NewTopic&gt; topics = new ArrayList&lt;NewTopic&gt;(); topics.add(new NewTopic(\"test\", 4, (short) 1)); topics.add(new NewTopic(\"first\", 4, (short) 1)); topics.add(new NewTopic(\"second\", 4, (short) 1)); topics.add(new NewTopic(\"third\", 4, (short) 1)); CreateTopicsResult result = adminClient.createTopics(topics); try { System.out.println(result.all().get()); } catch (InterruptedException e) { e.printStackTrace(); } catch (ExecutionException e) { e.printStackTrace(); } } /** * 删除Topic */ @Test public void getDeleteTopic() { DeleteTopicsResult deleteTopicsResult =adminClient.deleteTopics(Collections.singleton(\"test\")); System.out.println(JSONObject.toJSONString(deleteTopicsResult)); } /** * 关闭连接 */ @After public void afterClass() { adminClient.close(); }} 生产者普通生产者1234567891011121314public static void testProducer(String topic) { Properties props = new Properties(); props.put(\"bootstrap.servers\", \"127.0.0.1:9092\"); props.put(\"acks\", \"all\"); props.put(\"retries\", 0); props.put(\"batch.size\", 16384); props.put(\"key.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\"); props.put(\"value.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\"); KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(props); for (int i = 0; i &lt; 10; i++) { producer.send(new ProducerRecord&lt;String, String&gt;(topic, Integer.toString(i), Integer.toString(i))); } producer.close();} 事务生产者12345678910111213141516171819202122232425public static void testTransactionProducer(String topic) { Properties props = new Properties(); props.put(\"bootstrap.servers\", \"127.0.0.1:9092\"); props.put(\"transactional.id\", \"my-transactional-id\"); props.put(\"acks\", \"all\"); props.put(\"batch.size\", 16384); KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props, new StringSerializer(),new StringSerializer()); producer.initTransactions(); try { producer.beginTransaction(); for (int i = 0; i &lt; 3; i++) { producer.send(new ProducerRecord&lt;&gt;(topic, Integer.toString(i), Integer.toString(i))); } producer.commitTransaction(); } catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) { // We can't recover from these exceptions, so our only option is to close the // producer and exit. producer.close(); } catch (KafkaException e) { // For all other exceptions, just abort the transaction and try again. producer.abortTransaction(); } finally { producer.close(); }} 消费者1234567891011121314151617181920212223242526272829303132333435import java.time.Duration;import java.util.Arrays;import java.util.Properties;import org.apache.kafka.clients.consumer.ConsumerRecord;import org.apache.kafka.clients.consumer.ConsumerRecords;import org.apache.kafka.clients.consumer.KafkaConsumer;public class CustomConsumer { public static void main(String[] args) { Properties props = new Properties(); // 定义kakfa 服务的地址，不需要将所有broker指定上 props.put(\"bootstrap.servers\", \"127.0.0.1:9092\"); // 制定consumer group props.put(\"group.id\", \"custom_group_id\"); // 是否自动确认offset props.put(\"enable.auto.commit\", \"true\"); // 自动确认offset的时间间隔 props.put(\"auto.commit.interval.ms\", \"1000\"); // key的序列化类 props.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\"); // value的序列化类 props.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\"); // 定义consumer KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props); // 消费者订阅的topic, 可同时订阅多个 consumer.subscribe(Arrays.asList(\"test\",\"first\", \"second\",\"third\")); while (true) { // 读取数据，读取超时时间为100ms ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100)); for (ConsumerRecord&lt;String, String&gt; record : records) System.out.printf(\"offset = %d, key = %s, value = %s%n\", record.offset(), record.key(), record.value()); } }} 集群使用在配置中将bootstrap.servers，修改以下方式即可，需要将所有broker指定写上 1props.put(\"bootstrap.servers\", \"127.0.0.1:9092,127.0.0.2:9092,127.0.0.3:9092\"); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Kafka","slug":"Kafka","permalink":"https://www.zhuqiaolun.com/categories/Kafka/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"https://www.zhuqiaolun.com/tags/kafka/"}]},{"title":"kafka集群搭建 - 使用内置Zookeeper","slug":"2020/07/1595582052033/1595582052033","date":"2020-07-24T09:14:12.000Z","updated":"2021-03-10T06:10:20.514Z","comments":false,"path":"2020/07/1595582052033/1595582052033/","link":"","permalink":"https://www.zhuqiaolun.com/2020/07/1595582052033/1595582052033/","excerpt":"kafka集群搭建 - 使用内置Zookeeper","text":"下载官网下载地址：http://kafka.apache.org/downloads.html下载完成后复制一式三份，完成集群部署至少需要三台以及三台以上的服务。 kafka版本:kafka_2.12-2.5.0三台主机IP 127.0.0.1、127.0.0.2、127.0.0.3 kafka配置第一台server.properties： 12345678# 唯一值broker.id=1listeners=PLAINTEXT://127.0.0.1:9092# 建议填写服务器的数量值num.partitions=3 # 其他zk服务的连接zookeeper.connect=127.0.0.1:2181,127.0.0.2:2181,127.0.0.3:2181zookeeper.connection.timeout.ms=30000 第二台server.properties： 12345678# 唯一值broker.id=2listeners=PLAINTEXT://127.0.0.2:9092# 建议填写服务器的数量值num.partitions=3 # 其他zk服务的连接zookeeper.connect=127.0.0.1:2181,127.0.0.2:2181,127.0.0.3:2181zookeeper.connection.timeout.ms=30000 第三台server.properties： 12345678# 唯一值broker.id=3listeners=PLAINTEXT://127.0.0.3:9092# 建议填写服务器的数量值num.partitions=3 # 其他zk服务的连接zookeeper.connect=127.0.0.1:2181,127.0.0.2:2181,127.0.0.3:2181zookeeper.connection.timeout.ms=30000 zookeeper配置zookeeper可统一配置，zookeeper.properties： 12345678910111213dataDir=D:\\\\kafka_2.12-2.5.0\\\\data\\\\zookeeperdataLogDir=D:\\\\kafka_2.12-2.5.0\\\\logs\\\\zookeeperclientPort=2181# maxClientCnxns = 0 # 注释掉该配置admin.enableServer=false#设置连接参数，添加如下配置tickTime=2000initLimit=10syncLimit=5#设置broker Id的服务地址server.1=127.0.0.1:2888:3888server.2=127.0.0.2:2888:3888server.3=127.0.0.3:2888:3888同时在zookeeper数据目录dataDir下添加id配置，在各台服务的zookeeper数据目录添加myid文件且无后缀名，写入各自服务broker.id属性值， document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Kafka","slug":"Kafka","permalink":"https://www.zhuqiaolun.com/categories/Kafka/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"https://www.zhuqiaolun.com/tags/kafka/"}]},{"title":"kafka单机搭建 - 使用内置Zookeeper","slug":"2020/07/1595581721604/1595581721604","date":"2020-07-24T09:08:41.000Z","updated":"2021-03-10T06:10:40.517Z","comments":false,"path":"2020/07/1595581721604/1595581721604/","link":"","permalink":"https://www.zhuqiaolun.com/2020/07/1595581721604/1595581721604/","excerpt":"kafka搭建 - 使用内置Zookeeper","text":"前言在刚开始学习Kafka的时候，安装Kafka时说Kafka依赖ZooKeeper，所以想要安装Kafka必须先安装ZooKeeper。但是在下载Kafka的时候，官网上说，Kafka 0.5.x版本以上已经自带ZooKeeper，不需要自己安装ZooKeeper。但在使用自带ZooKeeper也没有啥缺陷，反倒针对特定版本人家 Kafka 已经验证过其稳定性了。 下载官网下载地址：http://kafka.apache.org/downloads.html 配置解压文件打开 kafka_2.12-2.5.0\\config从文本编辑器里打开 server.properties,添加或者修改内容 12345listeners=PLAINTEXT://10.200.47.142:9092log.dirs=D:\\\\kafka_2.12-2.5.0\\\\logs\\\\kafkanum.partitions=4zookeeper.connect=127.0.0.1:2181zookeeper.connection.timeout.ms=30000 端口号可以被任意修改。如果端口号设置为小于1024，那么kafka需要以root身份启动，不指定的话，按照默认9092【service.properties】port = 19092【connect-distributed.properties 】bootstrap.servers=localhost:19092【producer.properties 】bootstrap.servers=localhost:19092【connect-standalone.properties 】bootstrap.servers=localhost:19092【consumer.properties 】bootstrap.servers=localhost:19092 从文本编辑器里打开 zookeeper.properties,添加或者修改内容 12dataDir=D:\\\\kafka_2.12-2.5.0\\\\data\\\\zookeeperdataLogDir=D:\\\\kafka_2.12-2.5.0\\\\logs\\\\zookeeper 启动在根目录下编写bat文件启动： 1.start-zookeeper.bat内容如下： 12@echo offstart cmd /c \"title zookeeper-21810 &amp;&amp; .\\bin\\windows\\zookeeper-server-start .\\config\\zookeeper.properties\" 2.start-kafka.bat 12@echo offstart cmd /c \"title kafka_2.11-2.4.1-9092 &amp;&amp; .\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties\" 按照顺序启动，即可执行， document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Kafka","slug":"Kafka","permalink":"https://www.zhuqiaolun.com/categories/Kafka/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"https://www.zhuqiaolun.com/tags/kafka/"}]},{"title":"发布Java程序为Windows服务 （修改配置参数，新增对 jvm 的配置）三","slug":"2020/06/1592899073321/1592899073321","date":"2020-06-23T07:57:53.000Z","updated":"2021-05-13T02:58:53.873Z","comments":false,"path":"2020/06/1592899073321/1592899073321/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1592899073321/1592899073321/","excerpt":"使用 Java Service Wrapper 注册Windows服务（修改配置参数，新增对 jvm 的配置）","text":"前面是使用的配置会导致JVM不断重启，需要加JVM参数以及设置，同时设置服务开机启动； 配置文件新增配置参数如下： wrapper.jmx=false wrapper.on_exit.0=SHUTDOWN wrapper.on_exit.default=RESTART wrapper.ntservice.interactive = true # 服务开机启动 wrapper.ntservice.starttype=AUTO_START wrapper.tray = true # 监测JVM死锁 wrapper.java.monitor.deadlock = true wrapper.java.monitor.heap = true wrapper.java.monitor.gc.restart = true # Java Heap 初始化大小(单位：MB) wrapper.java.initmemory=128 # Java Heap 最大值(单位：MB) wrapper.java.maxmemory=128 # 32/64位选择，true为自动选择 wrapper.java.additional.auto_bits=TRUE检测JVM参数可以用jps+jmap监测即可jps:jmap -heap xxxxx 链接发布Java程序为Windows服务 （含有Java环境）一发布Java程序为Windows服务 （不含有Java环境）二发布Java程序为Windows服务 - Windows Service Wrapper 四 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"发布Java程序为Windows服务 （不含有Java环境）二","slug":"2020/06/1592898236483/1592898236483","date":"2020-06-23T07:43:56.000Z","updated":"2021-05-13T02:59:16.545Z","comments":false,"path":"2020/06/1592898236483/1592898236483/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1592898236483/1592898236483/","excerpt":"使用 Java Service Wrapper 注册Windows服务（不含有Java环境）","text":"前面在有Java环境的情况下的设置，现在假设我们不存在Java运行环境，也就是没有JRE与JDK，所以需要拷贝java安装目录下的JRE（包含bin目录和相关lib）目录到需要的服务目录下 拷贝JREJRE目录拷贝JRE目录到服务目录 修改配置文件利用拷贝过去的jre目录下的jar包和bin\\java.exe，修改wrapper.java.command的值 wrapper.java.command=../jre1.8.0_45/bin/java.exe链接发布Java程序为Windows服务 （含有Java环境）一发布Java程序为Windows服务 （修改配置参数，新增对 jvm 的配置）三发布Java程序为Windows服务 - Windows Service Wrapper 四 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"发布Java程序为Windows服务 （含有Java环境）一","slug":"2020/06/1592889892770/1592889892770","date":"2020-06-23T05:24:52.000Z","updated":"2021-05-13T02:59:29.737Z","comments":false,"path":"2020/06/1592889892770/1592889892770/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1592889892770/1592889892770/","excerpt":"使用 Java Service Wrapper 注册Windows服务（含有Java环境）","text":"描述有时候我们希望我们java写的程序作为服务注册到系统中，Java Service Wrapper 是目前较为流行的将Java程序部署成Windows服务的解决方案 下载serviceWrapper包网址：https://www.krenger.ch/blog/category/windows/ 下载zip压缩文件 解压serviceWrapper包解压wrapper-windows-x86-64-3.5.43.zip解压出来的文件多，但有些不是必须要的 注册一个简单的服务准备一个目录 建议在非中文且不含有空格的目录下目录结构如下：lang目录是存放支持其他语言的语言包，一般用不到mylib目录是存放我们的程序包 然后将下载的wrapper目录下的文件拷贝到我们上面建的目录: ···\\bin\\InstallTestWrapper-NT.bat -&gt; D:\\test\\java-service-hello\\bin\\InstallTestWrapper-NT.bat ···\\bin\\StartTestWrapper-NT.bat -&gt; D:\\test\\java-service-hello\\bin\\StartTestWrapper-NT.bat ···\\bin\\StopTestWrapper-NT.bat -&gt; D:\\test\\java-service-hello\\bin\\StopTestWrapper-NT.bat ···\\bin\\TestWrapper.bat -&gt; D:\\test\\java-service-hello\\bin\\TestWrapper.bat ···\\bin\\UninstallTestWrapper-NT.bat -&gt; D:\\test\\java-service-hello\\bin\\UninstallTestWrapper-NT.bat ···\\bin\\wrapper.exe -&gt; D:\\test\\java-service-hello\\bin\\wrapper.exe ···\\conf\\wrapper.conf -&gt; D:\\test\\java-service-hello\\conf\\wrapper.conf ···\\lib\\wrapper.jar -&gt; D:\\test\\java-service-hello\\lib\\wrapper.jar ···\\lib\\wrapper.dll -&gt; D:\\test\\java-service-hello\\lib\\wrapper.dlljava程序123456789101112131415161718192021222324import java.io.File;import java.util.concurrent.TimeUnit;import cn.hutool.core.date.DateUtil;import cn.hutool.core.io.file.FileAppender;import cn.hutool.core.lang.UUID;public class JarHelloApp { public static void main(String[] args) { while (true) { try { System.out.println(\"Hello World!\"); String str = UUID.fastUUID().toString(); System.out.println(str); //每隔3秒创建文件并写入内容 FileAppender appender = new FileAppender(new File(\"D:\\\\test\\\\jar\\\\\"+str+\".txt\"), 16, true); TimeUnit.SECONDS.sleep(3); appender.append(DateUtil.now()); appender.flush(); appender.toString(); } catch (Exception e) { e.printStackTrace(); } } }} 引入的依赖 12345&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.3.7&lt;/version&gt;&lt;/dependency&gt; java程序打包由于采用eclipse所有打包流程：项目邮件 -&gt; Export -&gt; Java/Runnable JAR file -&gt; Next 导出项目设置 导出项目文件 将程序打成的包以及自己程序依赖的包放到mylib 修改配置文件文件路径：D:\\test\\java-service-hello\\conf\\wrapper.conf内容如下： # jdk或者jre的java.exe路径，可通过环境变量获取 wrapper.java.command=%JAVA_HOME%/bin/java.exe # wrapper.java.command=C:\\Java\\jre1.8.0_45\\bin\\java # 日志级别 wrapper.java.command.loglevel=INFO wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp # 执行的程序的main方法的类的路径 wrapper.app.parameter.1=com.demon.jar_hello.JarHelloApp # 依赖的包，第一个是wrapper包，第二个是自己打的包以及程序依赖包 wrapper.java.classpath.1=../lib/wrapper.jar wrapper.java.classpath.2=../mylib/*.jar # 固定写法，依赖的wrapper的包 wrapper.java.library.path.1=../lib # 日志配置 按照日期每天创建文件 wrapper.logfile=../logs/wrapper.YYYYMMDD.log wrapper.logfile.rollmode=DATE # 服务名称以及描述信息 wrapper.console.title=jar hello Server wrapper.name=jarhelloserver wrapper.displayname=jar hello Server wrapper.description=jar hello Server # 更多配置可对 jvm 配置测试注册服务在服务目录下的bin目录下双击 TestWrapper.bat 文件，当程序执行正确时则表示可以注册服务控制台测试 注册服务在服务目录下执行（管理员模式） 注册服务命令 bin\\wrapper.exe -i ..\\conf\\wrapper.confcmd结果服务结果 启动服务命令 net start jarhelloserver 或者 bin\\wrapper.exe -t ..\\conf\\wrapper.confcmd结果服务结果 停止服务命令 net stop jarhelloserver 或者 bin\\wrapper.exe -p ..\\conf\\wrapper.conf cmd结果 服务结果 删除服务命令 sc delete jarhelloserver 或者 bin\\wrapper.exe -r ..\\conf\\wrapper.conf cmd结果 扩展 一由于使用命名操作复杂，故在服务目录创建bat文件 install-service.bat @echo off start cmd /c \"title install-service &amp;&amp; bin\\wrapper.exe -i ..\\conf\\wrapper.conf\"uninstall-service.bat @echo off start cmd /c \"title uninstall-service &amp;&amp; bin\\wrapper.exe -r ..\\conf\\wrapper.conf\"start-service.bat @echo off start cmd /c \"title start-service &amp;&amp; bin\\wrapper.exe -t ..\\conf\\wrapper.conf\"stop-service.bat @echo off start cmd /c \"title stop-service &amp;&amp; bin\\wrapper.exe -p ..\\conf\\wrapper.conf\"扩展 二我们可以用上面的service wrapper的bin包中的bat文件进行服务操作将下载解压后的wrapper-windows\\bin中的部分文件复制到我们的服务\\bin目录下我们只需要点击上面的bat文件即可实现上面的操作： 安装服务：InstallTestWrapper-NT.bat 查询服务：QueryTestWrapper-NT.bat 开启服务：StartTestWrapper-NT.bat 停止服务：StopTestWrapper-NT.bat 测试服务：TestWrapper.bat 卸载服务：UninstallTestWrapper-NT.bat链接发布Java程序为Windows服务 （不含有Java环境）二发布Java程序为Windows服务 （修改配置参数，新增对 jvm 的配置）三发布Java程序为Windows服务 - Windows Service Wrapper 四 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"SpringBoot配置RestTemplate","slug":"2020/06/1592881660483/1592881660483","date":"2020-06-23T03:07:40.000Z","updated":"2021-07-02T03:23:21.108Z","comments":false,"path":"2020/06/1592881660483/1592881660483/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1592881660483/1592881660483/","excerpt":"SpringBoot配置RestTemplate","text":"以下为2种配置方式,均可实现实现远程调用，jar引入只要其一即可； 方式一：RestTemplate + httpclient 方式二：RestTemplate + OkHttp3 依赖123456789101112131415161718&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.3.0.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt;&lt;dependency&gt; &lt;!-- 不需要版本号 --&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpclient&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt; &lt;artifactId&gt;okhttp&lt;/artifactId&gt; &lt;version&gt;3.9.1&lt;/version&gt;&lt;/dependency&gt; 配置RestTemplate + httpclient123456789101112131415161718192021222324252627282930313233import org.apache.http.conn.ssl.SSLConnectionSocketFactory;import org.apache.http.conn.ssl.TrustStrategy;import org.apache.http.impl.client.CloseableHttpClient;import org.apache.http.impl.client.HttpClients;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;import org.springframework.web.client.RestTemplate;import javax.net.ssl.SSLContext;import java.security.KeyManagementException;import java.security.KeyStoreException;import java.security.NoSuchAlgorithmException;import java.security.cert.X509Certificate;/** * @ClassName: RestConfig * @Description: * @Author: Demon * @Date: 2020/6/1 19:12 */@Configurationclass RestTemplateConfig { @Bean public RestTemplate restTemplate() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException { TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true; SSLContext sslContext = org.apache.http.ssl.SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build(); SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext); CloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(csf).build(); //使用httpclient的factory HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(); requestFactory.setHttpClient(httpClient); return new RestTemplate(requestFactory); }} RestTemplate + httpclient123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142import lombok.extern.slf4j.Slf4j;import okhttp3.ConnectionPool;import okhttp3.OkHttpClient;import org.springframework.boot.web.client.RestTemplateBuilder;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.HttpHeaders;import org.springframework.http.HttpMethod;import org.springframework.http.client.ClientHttpRequestInterceptor;import org.springframework.http.client.ClientHttpResponse;import org.springframework.http.client.OkHttp3ClientHttpRequestFactory;import org.springframework.web.client.ResponseErrorHandler;import org.springframework.web.client.RestTemplate;import javax.net.ssl.SSLContext;import javax.net.ssl.SSLSocketFactory;import javax.net.ssl.TrustManager;import javax.net.ssl.X509TrustManager;import java.io.IOException;import java.net.URI;import java.security.KeyManagementException;import java.security.NoSuchAlgorithmException;import java.security.SecureRandom;import java.security.cert.X509Certificate;import java.util.concurrent.TimeUnit;/** * className RestTemplateConfig * author demon * createTime 2021/6/8 13:09 * description RestTemplate + OkHttp3 实现远程调用 */@Slf4j@Configurationpublic class RestTemplateConfig { /** * 基于OkHttp3配置RestTemplate */ @Bean public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) { RestTemplate restTemplate = restTemplateBuilder .errorHandler(new ResponseErrorHandler() { @SuppressWarnings(\"NullableProblems\") @Override public boolean hasError(ClientHttpResponse clientHttpResponse) throws IOException { return clientHttpResponse.getStatusCode().value() != 200 &amp;&amp; clientHttpResponse.getStatusCode().value() != 302; } @SuppressWarnings(\"NullableProblems\") @Override public void handleError(ClientHttpResponse clientHttpResponse) { } @SuppressWarnings(\"NullableProblems\") @Override public void handleError(URI url, HttpMethod method, ClientHttpResponse response) throws IOException { log.error(\"=======================ERROR============================\"); log.error(\"DateTime：{}\", this.generateTimeFormatter(response.getHeaders().getDate(), \"yyyy-MM-dd HH:mm:ss\")); log.error(\"HOST:{},URI：{}\", url.getHost(), url.getPath()); log.error(\"Method：{}\", method.name()); log.error(\"Exception：{}\", response.getStatusCode()); log.error(\"========================================================\"); } }) .interceptors((ClientHttpRequestInterceptor) (httpRequest, bytes, clientHttpRequestExecution) -&gt; { HttpHeaders headers = httpRequest.getHeaders(); // 加入自定义字段 headers.add(\"Content-Type\", \"application/json;charset=UTF-8\"); return clientHttpRequestExecution.execute(httpRequest, bytes); }) .build(); restTemplate.setRequestFactory(new OkHttp3ClientHttpRequestFactory(okHttpClient())); return restTemplate; } @Bean public OkHttpClient okHttpClient() { return new OkHttpClient.Builder() .sslSocketFactory(sslSocketFactory(), x509TrustManager()) .retryOnConnectionFailure(false) .connectionPool(pool()) .connectTimeout(30, TimeUnit.SECONDS) .readTimeout(30, TimeUnit.SECONDS) .writeTimeout(30, TimeUnit.SECONDS) .build(); } @Bean public X509TrustManager x509TrustManager() { return new X509TrustManager() { @Override public void checkClientTrusted(X509Certificate[] x509Certificates, String s) { } @Override public void checkServerTrusted(X509Certificate[] x509Certificates, String s) { } @Override public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; } }; } @Bean public SSLSocketFactory sslSocketFactory() { try { //信任任何链接 SSLContext sslContext = SSLContext.getInstance(\"TLS\"); sslContext.init(null, new TrustManager[]{x509TrustManager()}, new SecureRandom()); return sslContext.getSocketFactory(); } catch (NoSuchAlgorithmException | KeyManagementException e) { e.printStackTrace(); } return null; } /** * Create a new connection pool with tuning parameters appropriate for a single-user application. * The tuning parameters in this pool are subject to change in future OkHttp releases. Currently */ @Bean public ConnectionPool pool() { return new ConnectionPool(2000, 5, TimeUnit.MINUTES); } /** * 将unix元年至某个日期的毫秒转为指定的格式 * @param Millisecond 毫秒 * @param format 格式 * @return 返回 */ private String generateTimeFormatter(long Millisecond ,String format){ DateTimeFormatter pattern = DateTimeFormatter.ofPattern(format); Instant instant = Instant.ofEpochMilli(Millisecond); return LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).format(pattern); }} 测试123456789101112@Slf4j@SpringBootTestclass SpringBootApiApplicationTests { @Resource private RestTemplate restTemplate; @Test void contextLoads(){ String url = \"https://www.baidu.com/\"; String resp = restTemplate.getForObject(url, String.class); System.out.println(resp); }} 结果 RestTemplate简单使用RestTemplate封装使用 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"}],"tags":[{"name":"RestTemplate","slug":"RestTemplate","permalink":"https://www.zhuqiaolun.com/tags/RestTemplate/"}]},{"title":"RabbitMq：使用交换机topic+routingKey的模式 - 优先级 (spring-boot)","slug":"2020/06/1591944668470/1591944668470","date":"2020-06-12T06:51:08.000Z","updated":"2021-03-10T06:31:46.325Z","comments":false,"path":"2020/06/1591944668470/1591944668470/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1591944668470/1591944668470/","excerpt":"使用交换机topic+routingKey的模式 - 优先级 (spring-boot)","text":"引入的maven依赖12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; yml配置12345678910111213141516171819202122232425262728spring: rabbitmq: addresses: 127.0.0.1:5672 username: guest password: guest connection-timeout: 15000 virtual-host: / # 开启消息发送到交换器（Exchange）后触发回调 publisher-confirm-type: simple # 开启消息发送到队列（Queue）后触发回调 publisher-returns: true listener: direct: # 开启ACK acknowledge-mode: manual # 开启手动 ，否则confirm自动确认 simple: # 开启ACK # 消息接收确认，可选模式：NONE（不确认）、AUTO（自动确认）、MANUAL（手动确认） acknowledge-mode: manual # 最小线程数量 concurrency: 10 # 最大线程数量 max-concurrency: 10 # 每个消费者可能未完成的最大未确认消息数量 prefetch: 1 template: # 交换机找不到QUEUE时，会调用Basic.Return 命令将消息返回给生产者 mandatory: true 声明绑定关系123456789101112131415161718192021222324252627282930313233343536373839404142/** * 初始化项目 就会创建 交换器，路由，队列，如果在服务中存在交换器的属性或者队列的属性不同，则会出现异常 * @return 返回 */@Configurationpublic class RabbitMqConfig { private static final String PRIORITY_QUEUE_NAME = \"priority.topic_demo\"; private static final String PRIORITY_TOPIC_ROUTING_KEY = \"priority.topic.routingKey\"; private static final String PRIORITY_EXCHANGE_NAME = \"priority.topic.exchange.name\"; /** * 声明消息队列 * @return 返回 */ @Bean(PRIORITY_QUEUE_NAME) public Queue priorityTopicDemo(){ Map&lt;String, Object&gt; arguments = new HashMap&lt;&gt;(1); arguments.put(\"x-max-priority\", 255); return new Queue(PRIORITY_QUEUE_NAME,true, false, false,arguments); } /** * 声明了一个Topic类型的交换机，durable是持久化（重启rabbitmq这个交换机不会被自动删除） * @return 返回 */ @Bean(PRIORITY_EXCHANGE_NAME) public Exchange priorityTopicExchangeName(){ return ExchangeBuilder.topicExchange(PRIORITY_EXCHANGE_NAME).durable(true).build(); } /** * 声明队列和交换机绑定关系，并且指定RoutingKey * @param queue 队列 * @param exchange 交换机 * @return 返回 */ @Bean public Binding queueBindingTopic(@Qualifier(PRIORITY_QUEUE_NAME) Queue queue,@Qualifier(PRIORITY_EXCHANGE_NAME) Exchange exchange){ return BindingBuilder.bind(queue).to(exchange).with(PRIORITY_TOPIC_ROUTING_KEY).noargs(); }} 生产者123456789101112131415161718192021222324252627@Component@Slf4jpublic class HelloSender { @Resource private RabbitTemplate rabbitTemplate; /** * 通过exchange和routingKey的方式 * rabbitTemplate.sendAndReceive(String exchange, String routingKey, Message message) * @param messageId 消息ID * @param exchange 交换机 * @param routingKey 路由 * @param priority 优先级 * @param content 内容 */ public void sendAndReceive(String messageId, String exchange, String routingKey, Integer priority, String content) { Message message = MessageBuilder.withBody(content.getBytes(Charset.forName(\"UTF-8\"))) .setContentType(MessageProperties.CONTENT_TYPE_TEXT_PLAIN) .setMessageId(messageId) .setPriority(priority) .build(); CorrelationData correlationData = new CorrelationData(); correlationData.setId(messageId); this.rabbitTemplate.convertAndSend(exchange, routingKey, message,correlationData); }} 消费者123456789101112131415161718192021222324252627@Component@Slf4jpublic class HelloReceiver { /** * @param message 队列消息对象 */ @RabbitListener(queues = TopicData.PRIORITY_QUEUE_NAME) public void queueNameTest1(Channel channel, Message message) { try { String stringBuilder = \"消息ID: \" + message.getMessageProperties().getMessageId() + \"；\" + \"优先级: \" + message.getMessageProperties().getPriority() + \"；\" + \"消息内容: \" + new String(message.getBody(), StandardCharsets.UTF_8); //告诉服务器收到这条消息 已经被我消费了 可以在队列删掉 这样以后就不会再发了 否则消息服务器以为这条消息没处理掉 后续还会在发 channel.basicAck(message.getMessageProperties().getDeliveryTag(),true); log.info(stringBuilder); } catch (IOException e) { e.printStackTrace(); try { //当发生异常时丢弃这条消息，或者 另行处理 channel.basicNack(message.getMessageProperties().getDeliveryTag(), false,false); System.out.println(\"receiver fail\"); } catch (IOException e1) { e1.printStackTrace(); } } }} 回调自定义 RabbitTemplate.ConfirmCallback 实现类 1234567891011@Slf4jpublic class RabbitConfirmCallBack implements RabbitTemplate.ConfirmCallback{ @Override public void confirm(CorrelationData correlationData, boolean ack, String cause) { log.info(\"收到回调，成功发送到broker\"); log.info(\"消息唯一标识: {}\", correlationData.getId()); log.info(\"确认状态: {}\", ack); log.info(\"造成原因: {}\", cause); }} 自定义 RabbitTemplate.ConfirmCallback 实现类 12345678910111213@Slf4jpublic class RabbitReturnCallback implements RabbitTemplate.ReturnCallback{ @Override public void returnedMessage(Message message, int replyCode, String replyText, String exchange, String routingKey) { log.info(\"收到回调，交换机找不到队列\"); log.info(\"消息主体: {}\", message); log.info(\"回复编码: {}\", replyCode); log.info(\"回复内容: {}\", replyText); log.info(\"交换器: {}\", exchange); log.info(\"路由键: {}\", routingKey); }} 添加回调，配置 rabbitTemplate 123456789101112@Component@AllArgsConstructorpublic class RabbitTemplateInitializingBean implements InitializingBean { private final RabbitTemplate rabbitTemplate; @Override public void afterPropertiesSet(){ rabbitTemplate.setConfirmCallback(new RabbitConfirmCallBack()); rabbitTemplate.setReturnCallback(new RabbitReturnCallback()); }} 测试123456789101112131415161718@SpringBootTestclass SpringBootRabbitmqExampleApplicationTest { @Resource private HelloSender helloSender; @Test void content(){ Random r = new Random(); int number = 1; for (int i = 0; i &lt; number ; i++) { String messageId = UUID.randomUUID().toString().replace(\"-\",\"\"); String exchange = \"priority.topic.exchange.name\"; String routingKey = \"priority.topic.routingKey\"; Integer priority = r.nextInt(255); String content = \"这是第[\"+i+\"]个消息\"; helloSender.sendAndReceive(messageId, exchange, routingKey, priority, content); } }} 结果： 当删除交换机时的执行错误 当删除队列时的执行错误 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"RabbitMq","slug":"RabbitMq","permalink":"https://www.zhuqiaolun.com/categories/RabbitMq/"}],"tags":[{"name":"rabbitMq","slug":"rabbitMq","permalink":"https://www.zhuqiaolun.com/tags/rabbitMq/"}]},{"title":"RabbitMq：使用交换机topic+routingKey的模式 - 优先级","slug":"2020/06/1591941634146/1591941634146","date":"2020-06-12T06:00:34.000Z","updated":"2021-03-10T06:32:08.566Z","comments":false,"path":"2020/06/1591941634146/1591941634146/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1591941634146/1591941634146/","excerpt":"使用交换机topic+routingKey的模式 - 优先级","text":"引入的maven依赖 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt; &lt;artifactId&gt;amqp-client&lt;/artifactId&gt; &lt;version&gt;5.9.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;1.7.30&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt; &lt;version&gt;1.7.30&lt;/version&gt;&lt;/dependency&gt; 生产者123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import com.rabbitmq.client.AMQP;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;import java.io.IOException;import java.util.HashMap;import java.util.Map;import java.util.UUID;import java.util.concurrent.TimeoutException;public class PriorityProducer { public final static String QUEUENAME = \"priority.topic_demo\";// 队列名称 public final static String HOST = \"localhost\"; // 主机名 public final static String USERNAME = \"guest\"; //用户名 public final static String PASSWORD = \"guest\"; //密码 public final static String EXCHANGE_NAME = \"priority.topic.exchange.name\"; //交换机 public final static String ROUTING_KEY = \"priority.topic.routingKey\"; //路由 public static void main(String[] arggs) throws IOException, TimeoutException { ConnectionFactory connectionFactory = new ConnectionFactory(); connectionFactory.setPassword(USERNAME); connectionFactory.setUsername(PASSWORD); connectionFactory.setPort(5672); connectionFactory.setHost(HOST); Connection connection = connectionFactory.newConnection(); Channel channel = connection.createChannel(); // 创建交换机 channel.exchangeDeclare(EXCHANGE_NAME, \"topic\", true); // 创建优先级 Map&lt;String, Object&gt; args = new HashMap&lt;String, Object&gt;(); args.put(\"x-max-priority\", 255);//定义优先级最大值 channel.queueDeclare(QUEUENAME, true, false, false, args); channel.queueBind(QUEUENAME, EXCHANGE_NAME, ROUTING_KEY); // 发送优先级消息 for (int i = 0; i &lt; 10; i++) { AMQP.BasicProperties.Builder builder = new AMQP.BasicProperties.Builder(); builder.messageId(UUID.randomUUID().toString()); if (i % 2 != 0) { builder.priority(i); //判断 新增 优先级 }else{ builder.priority(0); } AMQP.BasicProperties properties = builder.build(); System.out.println( (\"messages-\" + i)); channel.basicPublish(EXCHANGE_NAME, ROUTING_KEY, properties, (\"messages-\" + i).getBytes()); } channel.close(); connection.close(); System.out.println(\"客户端信息发送完毕！\"); }} 消费者1234567891011121314151617181920212223242526272829303132333435import com.rabbitmq.client.AMQP.BasicProperties;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;import com.rabbitmq.client.DefaultConsumer;import com.rabbitmq.client.Envelope;import java.io.IOException;import java.util.concurrent.TimeoutException;public class PriorityConsumer { public final static String QUEUENAME = \"priority.topic_demo\";// 队列名称 public final static String HOST = \"localhost\"; // 主机名 public final static String USERNAME = \"guest\"; public final static String PASSWORD = \"guest\"; public final static String EXCHANGE_NAME = \"priority.topic.exchange.name\"; public final static String ROUTING_KEY = \"priority.topic.routingKey\"; public static void main(String[] args) throws IOException, TimeoutException, InterruptedException { ConnectionFactory connectionFactory = new ConnectionFactory(); connectionFactory.setPassword(PASSWORD); connectionFactory.setUsername(USERNAME); connectionFactory.setPort(5672); connectionFactory.setHost(HOST); Connection connection = connectionFactory.newConnection(); Channel channel = connection.createChannel(); DefaultConsumer c = new DefaultConsumer(channel) { @Override public void handleDelivery(String consumerTag, Envelope envelope, BasicProperties properties, byte[] body) throws IOException { System.out.println(properties.getMessageId()+\" - \"+properties.getPriority()+\" - \"+ new String(body)); } }; channel.basicConsume(QUEUENAME, true, c); System.out.println(\"消费端开启···\"); }} 结果：生产者： 消费者：当生产者在适度发送消息消费时 (没有消息积累) 当生产者在过度发送消息消费时 (有消息积累) 具有优先级的先执行操作，先进后出。消费者可多个，当交换机和路由和队列名相同时则不会进行重复消费，在生产者发出消息后会进行轮询分发消费。 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"RabbitMq","slug":"RabbitMq","permalink":"https://www.zhuqiaolun.com/categories/RabbitMq/"}],"tags":[{"name":"rabbitMq","slug":"rabbitMq","permalink":"https://www.zhuqiaolun.com/tags/rabbitMq/"}]},{"title":"在Windows下安装RabbitMQ及配置","slug":"2020/06/1591869892000/1591869892000","date":"2020-06-11T10:04:52.000Z","updated":"2021-05-13T05:48:17.358Z","comments":false,"path":"2020/06/1591869892000/1591869892000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1591869892000/1591869892000/","excerpt":"Windows下RabbitMQ安装及配置","text":"介绍rabbitMQ是一个在AMQP协议标准基础上完整的，可服用的企业消息系统。它遵循Mozilla Public License开源协议，采用 Erlang 实现的工业级的消息队列(MQ)服务器，Rabbit MQ 是建立在Erlang OTP平台上。 安装 Erlang下载地址：​https://www.erlang.org/downloads，下载与系统对应的版本文件安装时，一路 next 即可安装完成设置环境变量， &nbsp;&nbsp;变量名：ERLANG_HOME &nbsp;&nbsp;变量值：D:\\erl-23.0（安装根目录） 修改环境变量path，增加Erlang变量至path，%ERLANG_HOME%\\bin;打开cmd命令框，输入erl至此，Erlang 安装完成 安装 RabbitMq下载地址：https://www.rabbitmq.com/install-windows-manual.html本文选择解压缩安装 rabbitmq-server-windows-3.8.4.zip配置环境变量： &nbsp;&nbsp;变量名：RABBITMQ_SERVER &nbsp;&nbsp;变量值：D:\\rabbitmq_server-3.8.4（安装根目录）打开cmd命令框，进入 安装目录安装插件，命令：rabbitmq-plugins.bat enable rabbitmq_management启动：rabbitmq-server.batrabbitmq启动成功，浏览器中http://localhost:15672，输入guest,guest进入rabbitMQ管理控制台：至此，rabbitMQ安装部署完成。 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"RabbitMq","slug":"RabbitMq","permalink":"https://www.zhuqiaolun.com/categories/RabbitMq/"}],"tags":[{"name":"rabbitMq","slug":"rabbitMq","permalink":"https://www.zhuqiaolun.com/tags/rabbitMq/"}]},{"title":"修改hexo文章目录位置","slug":"2020/06/1591760460000/1591760460000","date":"2020-06-10T03:41:00.000Z","updated":"2021-03-11T05:44:27.728Z","comments":false,"path":"2020/06/1591760460000/1591760460000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/06/1591760460000/1591760460000/","excerpt":"修改hexo创建文章名称规则","text":"打开 根目录下的 node_modules 找到 hexo 添加前缀时间戳新增文章操作： hexo new helloINFO Created: D:\\workspace-webstorm\\demon\\blog\\myblog\\source_posts\\1591933260490-hello.md 添加前缀路径新增文章操作： $ hexo new helloD:\\workspace-webstorm\\demon\\blog\\myblog\\source_posts\\1601024145664/1601024145664INFO Created: D:\\workspace-webstorm\\demon\\blog\\myblog\\source_posts\\1601024145664\\1601024145664.md 添加年月前缀路径新增文章操作： $ hexo new helloD:\\workspace-webstorm\\demon\\blog\\myblog\\source_posts\\2021\\03\\1615440974493/1615440974493INFO Created: D:\\workspace-webstorm\\demon\\blog\\myblog\\source_posts\\2021\\03\\1615440974493\\1615440974493.md 创建 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Blog","slug":"Blog","permalink":"https://www.zhuqiaolun.com/categories/Blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://www.zhuqiaolun.com/tags/hexo/"}]},{"title":"如何让hexo博客被百度收录","slug":"2020/05/1590766728000/1590766728000","date":"2020-05-29T15:38:48.000Z","updated":"2021-03-10T02:42:54.241Z","comments":false,"path":"2020/05/1590766728000/1590766728000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590766728000/1590766728000/","excerpt":"hexo博客被百度收录","text":"​前言​博客，分享才是真理。 HTTPS认证​找到 百度站长平台 -&gt; HTTPS认证认证似乎能加速百度收录速度在认证中，需要下载百度的专属识别文件，放在项目根目录，然后进行测试验证即可配置301 server { listen 80; server_name www.zhuqiaolun.com; if ($scheme = http ) { return 301 https://www.zhuqiaolun.com$request_uri; } location / { root html; index index.html index.htm; } }认证结果： 安装网站地图插件先安装sitemap插件，生成网站地图 npm install hexo-generator-sitemap --save npm install hexo-generator-baidu-sitemap --save12修改配置文件​修改博客根路径下的_config.yml配置文件中的url站点地址 url: https://www.zhuqiaolun.com/ # 在这儿填写你的博客域名 root: / permalink: :year/:month/:day/:title/ permalink_defaults: pretty_urls: trailing_index: true # Set to false to remove trailing 'index.html' from permalinks trailing_html: true # Set to false to remove trailing '.html' from permalinks验证xml文件​执行命令 hexo s 完之后就会在博客路径下生成 sitemap.xml 文件和 baidusitemap.xml 文件，可以通过 https://www.zhuqiaolun.com/baidusitemap.xml 查看该文件是否生成sitemap.xml文件是搜索引擎通用的文件baidusitemap.xml是百度专用的sitemap文件 向百度提交链接​找到 百度站长平台-&gt;普通收录 -&gt; 资源提交 -&gt; sitemap在其中填写百度专用的baidusitemap.xml的请求路径 https://www.zhuqiaolun.com/baidusitemap.xml 收录结果通过认证之后进入baidusitemap提交，响应速度超快，不到5分钟就把链接收录完成 查询收录结果访问 百度站长工具 输入网址地址，点击查询，即可看到结果 快捷查看百度网站 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Blog","slug":"Blog","permalink":"https://www.zhuqiaolun.com/categories/Blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://www.zhuqiaolun.com/tags/hexo/"}]},{"title":"在Linux中安装Nginx环境","slug":"2020/05/1590376771000/1590376771000","date":"2020-05-25T03:19:31.000Z","updated":"2021-10-12T03:17:43.424Z","comments":false,"path":"2020/05/1590376771000/1590376771000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590376771000/1590376771000/","excerpt":"在Linux中安装nginx环境","text":"下载nginxnginx 官网下载地址：http://nginx.org/en/download.htmlnginx 文件下载地址：https://nginx.org/download/ 下载稳定（Stable version）版本即可:Windows：http://nginx.org/download/nginx-1.18.0.zipLinux：http://nginx.org/download/nginx-1.18.0.tar.gz 上传nginxmkdir /usr/local/software # 创建软件安装目录 cd /usr/local/software # 进入软件安装目录 rz # 上传nginx文件，需要安装 yum install lrzsz ll # 查看上传文件 tar -zxvf nginx-1.18.0.tar.gz # 解压文件到当前目录 检测nginx环境在安装nginx前首先要确认系统中安装了gcc、zlib 、zlib-devel、pcre、pcre-devel、openssl、openssl-develLinux下检查是否安装过某软件包： yum list installed | grep gcc # 查看是否安装了gcc yum list installed | grep pcre yum list installed | grep pcre-devel yum list installed | grep zlib yum list installed | grep zlib-devel yum list installed | grep openssl yum list installed | grep openssl-devel 在此发现只安装了gcc和openssl，其他都没有安装，所以需要安装前置环境，输入以下命令： yum -y install zlib zlib-devel pcre pcre-devel openssl openssl-devel # 一键安装 至此前置软件安装结束，下面进入正式安装nginx 安装nginxcd /usr/local/software/nginx-1.18.0 # 进入nginx的安装根目录 配置nginx安装目录./configure --prefix=/usr/local/nginx # 配置nginx安装目录，执行完成后不会产生nginx目录执行完成后会出现一个 Makefile 的文件 编译并安装make &amp;&amp; make install # 编译、安装，执行完成后会产生nginx目录 cd /usr/local/nginx/ # 进入nginx目录nginx目录内容 测试是否安装成功./sbin/nginx -t出现 test is successful 表示安装成功，同时会生成一些文件 启动nginxcd /usr/local/nginx/sbin # 进入启动目录 ./nginx # 启动nginx，默认读取 /usr/local/nginx/conf 目录下的 nginx.conf 配置文件 ps -ef | grep nginx # 查看nginx是否启动当出现 worker process 则表示运行成功 另 执行命令： ps -A | grep nginx ，如果返回结果的话，也说明有nginx在运行，服务已经启动 访问nginxcurl http://localhost # 默认端口为：80当出现 Welcome to nginx! 则表示访问成功 修改nginx.confcd /usr/local/nginx/conf/ # 进入nginx配置文件目录 vim nginx.conf # 进入编辑文件模式 1234567location / { autoindex on; #打开目录列表 autoindex_exact_size off; #on显示文件的确切大小，off则会用M、G等单位 autoindex_localtime on; #显示文件服务器时间，off显示GMT时间 root html; index index.html index.htm;} 修改完成后使用 /usr/local/nginx/sbin/nginx -t 命令检测语句是否修改正确，如出现 test is successful，则表示正确 扩展/usr/local/nginx/sbin/nginx # 启动服务 /usr/local/nginx/sbin/nginx -s stop # 停止服务 /usr/local/nginx/sbin/nginx -s reload # 重启服务 /usr/local/nginx/sbin/nginx -t # 检测语句 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/tags/Nginx/"}]},{"title":"使本地git与Github连接","slug":"2020/05/1590309165000/1590309165000","date":"2020-05-24T08:32:45.000Z","updated":"2021-03-10T06:11:41.009Z","comments":false,"path":"2020/05/1590309165000/1590309165000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590309165000/1590309165000/","excerpt":"使本地git与Github连接","text":"创建github账号在 github 中创建一个账号，如有账号则不需创建 配置github账户安装成功后打开Git Bash Here，执行命令 git config –global -e 操作进入全局配置文件 1git config --global -e 按 i 进行编辑以下内容： [user] name = zhuqiaolun # github的Username email =zhuqlchina@163.com # github的Email按下ESC，输入 :wq 保存退出 输入以下命令禁用自动转换，防止 Git 提交时报错warning: LF will be replaced by CRLF in 1git config --global core.autocrlf false 输入以下命令查看配置 1git config -l 生成ssh认证输入以下命令，回车会让你输入存放保存ssh key的地址，它给了一个默认地址就是括号了那里，再回车就是你选择了默认地址，然后会让你输入密码并且确认密码，ok生成了，过程如下图 1ssh-keygen -t rsa -C \"zhuqlchina@163.com\" # github的Email 按照你存放ssk key的地址，去复制key，比如我的在下图这个位置，打开id_rsa.pub,复制里面的key 配置ssh认证登录 github ,setting -&gt; SSH and GPG keys -&gt; new SSH key输入key后 点击 Add SSH key 完成 验证ssh认证在git bash 下输入命令，如在前面设置过密码则会提示输入密码，那输入设置的密码即可 1ssh -T git@github.com 拉去github文件到本地仓库 选好本地仓库的目录，进去鼠标右键-&gt;Git Bash Here,输入以下命令拉去github上面的代码并进入拉去的代码目录 1git clone https://github.com/zhuqiaolun/spring-boot-code # repositories的url 修改内容后则需要提交文件 提交代码到远程仓库输入命令，查看修改了哪些文件，出现的红色字则为修改了内容的文件 1git status 修改文件状态，将本地文件更新全部提交到暂缓区 1.全部修改 1git add . # 更新文件状态，将文件添加到暂存区，注意后面一个点 2.修改只提交的文件 1touch .gitignore # 创建忽略提交的文件 在里面添加 不必要提交的文件路径或者文件名，过滤文件夹设置：.idea 表示过滤这个文件夹过滤文件设置：*.iml 输入命令： 1git add .gitignore # 更新单个文件状态 当前需要的文件变成绿色后，就可以提交了，先提交本地在提交远程，中间有可能要输入用户密码验证 12git commit -m '相关注释文字' #提交到本地仓库git push origin master #提交到远程仓库 查看远程github 扩展从本地上传代码到github上操作：在git bash 下输入命令1、仓库初始化git init2、连接仓库，没有则需新建git remote add origin 仓库地址3、查看状态git status4、将文件添加到暂存区git add 状态里的新文件5、将文件添加到仓库git commit -m’相关注释文字’6、将本地代码提交到远程仓库git push origin master ssh和https提交代码时其实都需要验证，ssh用的是key， https用的是登录名和密码的方式 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Git","slug":"Git","permalink":"https://www.zhuqiaolun.com/categories/Git/"}],"tags":[{"name":"Github","slug":"Github","permalink":"https://www.zhuqiaolun.com/tags/Github/"}]},{"title":"Java反射机制","slug":"2020/05/1590300096000/1590300096000","date":"2020-05-24T06:01:36.000Z","updated":"2021-03-01T06:43:07.216Z","comments":false,"path":"2020/05/1590300096000/1590300096000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590300096000/1590300096000/","excerpt":"Java反射机制","text":"什么是反射JAVA反射机制是在运行状态中，对于任意一个类。都能都知道这个类的所有属性和方法，对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称之为java语言的反射机制； 反射的作用反射类： java.lang.reflect反编译： .class –à .java通过反射机制可以访问java对象中的属性，方法，构造方法，自定义方法 创建Class对象的三种方式实例对象： 1234567891011121314public class Person { private String name; private int age ; // 构造方法（无参，有参） // get 方法·· // set 方法·· // 自定义一个执行方法，方法名称：execute， // 参数1：name，类型：String.class // 参数2：age，类型：int.class public String execute(String name, int age) { return \"姓名:\" + name + \"；年龄：\"+ age; }} 创建Class对象的方式一对象.getClass()，获取Person类中的字节码文件 1Class&lt;?&gt; class1 = new Person().getClass(); 创建Class对象的方式二.class，一个明确的类，任意一个类型都有一个静态的class属性 1Class&lt;?&gt; class2 = Person.class; 创建Class对象的方式三 （推荐）必须是全路径名称，如：com.demon.hello.Person，如找不到则出现异常：ClassNotFoundException 12345try { Class&lt;?&gt; class3 = Class.forName(classPath); } catch (ClassNotFoundException e) { e.printStackTrace(); } 获取类的实例获取class类型之后，可以创建该类型的对象，如：class3.newInstance() 执行类的方法获得class类型的Method对象，根据方法参数定义填写参数类型说明 参数类型与需要反射的类的参数类型保持一致，如int.class不要写成Integer.classinvoke方法，参数为cls实例对象，和想要调用的方法参数输出invoke方法的返回值(返回值类型可为方法定义的返回值类型，强制转化即可) // 第一个参数为方法名,第二个参数为参数name的类型Class对象，第三个参数为参数age的类型Class对象 Method method2 = class3.getMethod(\"execute\", String.class, int.class); Object obj = method1.invoke(c1s.newInstance(), \"张三\", 30); System.out.println(\"execute方法的返回值：\" + value); // 姓名:张三；年龄：30扩展在获取创建类型的对象后，获取根据类的方法判断该执行类是否满足执行条件，如是否有实现接口：c1s.getInterfaces()，返回是一个数组，是否有注解类：c1s.getAnnotation(aCls.class)，参数为注解类.class，更多查看 api ··· document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"安装Java环境","slug":"2020/05/1590236390000/1590236390000","date":"2020-05-23T12:19:50.000Z","updated":"2021-07-12T03:06:23.482Z","comments":false,"path":"2020/05/1590236390000/1590236390000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590236390000/1590236390000/","excerpt":"安装Java环境","text":"下载JDK由于是安装在服务器，所以只需jre即可，选择对应的系统版本点击下载，没有登陆则跳转登陆页面，此提供一位同学账号： `2028056560@qq.com/Oracle1234 方便使用 （感谢同学） Windows新建JAVA_HOME 变量 12变量名：JAVA_HOME变量值：电脑上JDK安装的绝对路径，如：C:\\Java\\jdk1.8.0_45 新建/修改 CLASSPATH 变量 12变量名：CLASSPATH变量值：.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar; 修改Path 变量新建两条路径： 12%JAVA_HOME%\\bin%JAVA_HOME%\\jre\\bin 验证JDK环境变量使用 java -version 查看环境是否安装完全 Linux上传JDK到服务器安装命令 yum install -y lrzsz 工具，此为在Xshell下使用，rz:上传，sz:下载在local下创建java目录，在弹出的窗口中选择要上传的jdk压缩文件，上传文件到Linux上java安装目录并解压，此时安装目录为：/usr/local/java/jdk1.8.0_231 mkdir /use/local/java # 创建目录 cd /use/local/java # 进入目录 rz # 上传文件 tar -zxvf jdk-8u231-linux-x64.tar.gz # 解压文件 配置JDK环境变量使用 vim /etc/profile 命令进入编辑器，添加以下内容： set java environment JAVA_HOME=/usr/local/java/jdk1.8.0_231 JRE_HOME=$JAVA_HOME/jre CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin export JAVA_HOME JRE_HOME CLASS_PATH PATH使用 Esc wq 对内容保存并退出使用 source /etc/profile 让内容生效 验证JDK环境变量使用 java -version 查看环境是否安装完全 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"}]},{"title":"在idea中创建项目与github关联","slug":"2020/05/1590142873000/1590142873000","date":"2020-05-22T10:21:13.000Z","updated":"2021-03-01T06:42:59.343Z","comments":false,"path":"2020/05/1590142873000/1590142873000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590142873000/1590142873000/","excerpt":"在idea中创建项目与github关联","text":"在IDEA中配置git在IDEA中设置Git，在File–&gt;Setting-&gt;Version Control–&gt;Git ，git安装环境变量成功会自动识别安装路径，点击Test，测试是否设置成功 在IDEA中连接github中心在IDEA中，File–&gt;Setting-&gt;Version Control–&gt;GibHub，点击右侧 “ + “ 按钮，建议在Server的中添加[https://]，Login为Github的账户，Password为Github的密码，点击Log In，成功则显示， 创建本地仓库在IDEA中，VCS–&gt;Import into Version Control–&gt;Create Git Repository 在弹窗中选择项目所在的位置 点击OK，此时项目文件全部变成红色，同时在项目目录下生成一个隐藏的.git的文件目录 上传文件到本地仓库在IDEA中，选择项目鼠标右键–&gt; git –&gt; Add，此时项目文件变成绿色，此时文件只处于本地库的暂存区，并没有同步到github版本库中 同步到本地github版本在IDEA中，选择项目鼠标右键–&gt; git –&gt; Commit Directory，出现提交弹窗，在弹窗勾掉.idea排除不必要的文件，在弹窗中输入Commit Message，否则不允许提交，点击commit，此时项目文件从暂存区真正进入本地github版本库中，项目文件变成白色 上传项目到GitHub中在IDEA中，选择项目，VCS–&gt;Import into Version Control–&gt;Share Project on GitHub，在弹框中自动输入仓库名，输入描述，选择要Share的链接， 点击Share，即可上传，中间会弹窗输入GitHub的用户名和密码（已输入过用户名和密码并记住的不会再次弹框输入），上传成功后IDEA右下角会给出提示 同步结束此至，可访问github上查看 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"工具","slug":"工具","permalink":"https://www.zhuqiaolun.com/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Idea","slug":"Idea","permalink":"https://www.zhuqiaolun.com/tags/Idea/"}]},{"title":"在Windows上安装git-v2.26.2","slug":"2020/05/1590132000000/1590132000000","date":"2020-05-22T07:20:00.000Z","updated":"2021-05-13T02:55:56.376Z","comments":false,"path":"2020/05/1590132000000/1590132000000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1590132000000/1590132000000/","excerpt":"在Windows上安装git-v2.26.2","text":"下载git官网下载并安装 git 进入自动识别系统， 点击自动弹出下载窗口 安装包下载地址：https://gitforwindows.org/官网慢，可以用国内的镜像：https://npm.taobao.org/mirrors/git-for-windows/ 安装git下载结束后，双击进行安装，如已安装点击运行则为修复版本 是否显示桌面图，可不勾选，在安装结束后鼠标右键有选项显示 此项完全不修改PATH变量值，仅在Git Bash中使用Git，绝对安全，所以cmd的git –version 无效 Git命令与Linux一样，所以最好在OpenSSL中操作命令 启用文件缓存 在桌面或者文件目录空白处点击鼠标右键，选择 Git Bash Here 选项，即可打开命令界面 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Git","slug":"Git","permalink":"https://www.zhuqiaolun.com/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://www.zhuqiaolun.com/tags/Git/"}]},{"title":"Hello World","slug":"2020/05/1589344022000/1589344022000","date":"2020-05-13T04:27:02.000Z","updated":"2021-03-10T08:09:24.443Z","comments":false,"path":"2020/05/1589344022000/1589344022000/","link":"","permalink":"https://www.zhuqiaolun.com/2020/05/1589344022000/1589344022000/","excerpt":"『你好,世界』","text":"『你好,世界』Java1234567public class HelloWorld{ public static void main(String[] args) { System.out.println( \"Hello, World!\" ); }} C12345#include &lt;stdio.h&gt;int main(){ printf(\"Hello, World!\");} Python 31print(\"Hello, World!\") 可以使用单引号’’，双引号”” 或三引号””” “””或’’’ ‘’’ C++123456#include &lt;iostream&gt;using namespace std;int main(){ cout&lt;&lt;\"Hello, World!\"&lt;&lt;endl;} C#12345678910namespace HelloWorld{ class Program { static void Main(string[] args) { System.Console.Write(\"Hello, World!\"); } }} VB12345Module MainFrm Sub Main() System.Console.WriteLine(\"Hello, World!\") End SubEnd Module JavaScript1alert (\"Hello, World!\"); 1document.write(\"Hello, World!\"); PHP123&lt;?php echo 'Hello, world!';?&gt; SQL1SELECT 列名称 FROM 表名称 Object-C12345#import &lt;stdio.h&gt;int main(int argc,const char *argv[]){ printf(\"Hello World\");} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"世界","slug":"世界","permalink":"https://www.zhuqiaolun.com/categories/%E4%B8%96%E7%95%8C/"}],"tags":[{"name":"other","slug":"other","permalink":"https://www.zhuqiaolun.com/tags/other/"}]}],"categories":[{"name":"J-Tools","slug":"J-Tools","permalink":"https://www.zhuqiaolun.com/categories/J-Tools/"},{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/categories/Maven/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/categories/SpringBoot/"},{"name":"论扩","slug":"论扩","permalink":"https://www.zhuqiaolun.com/categories/%E8%AE%BA%E6%89%A9/"},{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/categories/Java/"},{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://www.zhuqiaolun.com/categories/ElasticSearch/"},{"name":"Linux","slug":"Linux","permalink":"https://www.zhuqiaolun.com/categories/Linux/"},{"name":"MySQL","slug":"MySQL","permalink":"https://www.zhuqiaolun.com/categories/MySQL/"},{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/categories/Nginx/"},{"name":"Go-FastDfs","slug":"Go-FastDfs","permalink":"https://www.zhuqiaolun.com/categories/Go-FastDfs/"},{"name":"工具","slug":"工具","permalink":"https://www.zhuqiaolun.com/categories/%E5%B7%A5%E5%85%B7/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://www.zhuqiaolun.com/categories/MyBatis/"},{"name":"WebService","slug":"WebService","permalink":"https://www.zhuqiaolun.com/categories/WebService/"},{"name":"Blog","slug":"Blog","permalink":"https://www.zhuqiaolun.com/categories/Blog/"},{"name":"世界","slug":"世界","permalink":"https://www.zhuqiaolun.com/categories/%E4%B8%96%E7%95%8C/"},{"name":"JavaFx","slug":"JavaFx","permalink":"https://www.zhuqiaolun.com/categories/JavaFx/"},{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/categories/Redis/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/categories/Tomcat/"},{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/categories/MyCat/"},{"name":"Kafka","slug":"Kafka","permalink":"https://www.zhuqiaolun.com/categories/Kafka/"},{"name":"RabbitMq","slug":"RabbitMq","permalink":"https://www.zhuqiaolun.com/categories/RabbitMq/"},{"name":"Git","slug":"Git","permalink":"https://www.zhuqiaolun.com/categories/Git/"}],"tags":[{"name":"Yaml","slug":"Yaml","permalink":"https://www.zhuqiaolun.com/tags/Yaml/"},{"name":"pom","slug":"pom","permalink":"https://www.zhuqiaolun.com/tags/pom/"},{"name":"logback","slug":"logback","permalink":"https://www.zhuqiaolun.com/tags/logback/"},{"name":"Snowflake","slug":"Snowflake","permalink":"https://www.zhuqiaolun.com/tags/Snowflake/"},{"name":"Go-FastDfs","slug":"Go-FastDfs","permalink":"https://www.zhuqiaolun.com/tags/Go-FastDfs/"},{"name":"接口","slug":"接口","permalink":"https://www.zhuqiaolun.com/tags/%E6%8E%A5%E5%8F%A3/"},{"name":"Java","slug":"Java","permalink":"https://www.zhuqiaolun.com/tags/Java/"},{"name":"ElasticSearch-Plug","slug":"ElasticSearch-Plug","permalink":"https://www.zhuqiaolun.com/tags/ElasticSearch-Plug/"},{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://www.zhuqiaolun.com/tags/ElasticSearch/"},{"name":"Freemarker","slug":"Freemarker","permalink":"https://www.zhuqiaolun.com/tags/Freemarker/"},{"name":"RedisTemplate","slug":"RedisTemplate","permalink":"https://www.zhuqiaolun.com/tags/RedisTemplate/"},{"name":"RestTemplate","slug":"RestTemplate","permalink":"https://www.zhuqiaolun.com/tags/RestTemplate/"},{"name":"firewall","slug":"firewall","permalink":"https://www.zhuqiaolun.com/tags/firewall/"},{"name":"MySQL","slug":"MySQL","permalink":"https://www.zhuqiaolun.com/tags/MySQL/"},{"name":"command","slug":"command","permalink":"https://www.zhuqiaolun.com/tags/command/"},{"name":"Vue","slug":"Vue","permalink":"https://www.zhuqiaolun.com/tags/Vue/"},{"name":"exe","slug":"exe","permalink":"https://www.zhuqiaolun.com/tags/exe/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://www.zhuqiaolun.com/tags/SpringBoot/"},{"name":"hexo","slug":"hexo","permalink":"https://www.zhuqiaolun.com/tags/hexo/"},{"name":"Maven","slug":"Maven","permalink":"https://www.zhuqiaolun.com/tags/Maven/"},{"name":"chrome","slug":"chrome","permalink":"https://www.zhuqiaolun.com/tags/chrome/"},{"name":"CheckBox","slug":"CheckBox","permalink":"https://www.zhuqiaolun.com/tags/CheckBox/"},{"name":"VBox","slug":"VBox","permalink":"https://www.zhuqiaolun.com/tags/VBox/"},{"name":"TreeView","slug":"TreeView","permalink":"https://www.zhuqiaolun.com/tags/TreeView/"},{"name":"halo","slug":"halo","permalink":"https://www.zhuqiaolun.com/tags/halo/"},{"name":"Email","slug":"Email","permalink":"https://www.zhuqiaolun.com/tags/Email/"},{"name":"Zip","slug":"Zip","permalink":"https://www.zhuqiaolun.com/tags/Zip/"},{"name":"Excel","slug":"Excel","permalink":"https://www.zhuqiaolun.com/tags/Excel/"},{"name":"nginx","slug":"nginx","permalink":"https://www.zhuqiaolun.com/tags/nginx/"},{"name":"Redis","slug":"Redis","permalink":"https://www.zhuqiaolun.com/tags/Redis/"},{"name":"tomcat","slug":"tomcat","permalink":"https://www.zhuqiaolun.com/tags/tomcat/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://www.zhuqiaolun.com/tags/Tomcat/"},{"name":"Thymeleaf","slug":"Thymeleaf","permalink":"https://www.zhuqiaolun.com/tags/Thymeleaf/"},{"name":"myCat","slug":"myCat","permalink":"https://www.zhuqiaolun.com/tags/myCat/"},{"name":"MyCat","slug":"MyCat","permalink":"https://www.zhuqiaolun.com/tags/MyCat/"},{"name":"kafka","slug":"kafka","permalink":"https://www.zhuqiaolun.com/tags/kafka/"},{"name":"rabbitMq","slug":"rabbitMq","permalink":"https://www.zhuqiaolun.com/tags/rabbitMq/"},{"name":"Nginx","slug":"Nginx","permalink":"https://www.zhuqiaolun.com/tags/Nginx/"},{"name":"Github","slug":"Github","permalink":"https://www.zhuqiaolun.com/tags/Github/"},{"name":"Idea","slug":"Idea","permalink":"https://www.zhuqiaolun.com/tags/Idea/"},{"name":"Git","slug":"Git","permalink":"https://www.zhuqiaolun.com/tags/Git/"},{"name":"other","slug":"other","permalink":"https://www.zhuqiaolun.com/tags/other/"}]}